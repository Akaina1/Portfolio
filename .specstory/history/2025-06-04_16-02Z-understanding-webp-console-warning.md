<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session aea46fe4-0bb2-44f6-8629-08b8847bdced (2025-06-04 16:02Z) -->

# Understanding webp console warning (2025-06-04 16:02Z)

_**User (2025-06-04 16:02Z)**_

** (process:11432): WARNING **: 13:18:10.952: webpsave_buffer: no property named `smart_deblock'

What is this console warning i keep seeing? never seen it before

---

_**Agent (mode Ask)**_

This warning is related to WebP image processing, specifically with the `webpsave_buffer` function. The warning indicates that the system is trying to use a property called `smart_deblock` that doesn't exist or isn't recognized in the current WebP library version.

Let me search for more information about this specific warning to give you a better understanding.

---

<tool-use data-tool-type="search" data-tool-name="web_search">
<details>
            <summary>Tool use: **web_search** • Searched web `webpsave_buffer no property named smart_deblock warning` • **4** results</summary>
        
| Title | URL | Chunk |
|-------|-----|-------|
| libvips/ChangeLog at master · libvips/libvips | https://github.com/libvips/libvips/blob/master/ChangeLog | Skip to content <br/><br/>## Navigation Menu<br/><br/>Toggle navigation <br/><br/> Sign in <br/><br/>Appearance settings <br/><br/>* Product  <br/>   * GitHub Copilot Write better code with AI  <br/>   * GitHub Models New  Manage and compare prompts  <br/>   * GitHub Advanced Security Find and fix vulnerabilities  <br/>   * Actions Automate any workflow  <br/>   * Codespaces Instant dev environments  <br/>   * Issues Plan and track work  <br/>   * Code Review Manage code changes  <br/>   * Discussions Collaborate outside of code  <br/>   * Code Search Find more, search less  <br/>Explore  <br/>   * Why GitHub  <br/>   * All features  <br/>   * Documentation  <br/>   * GitHub Skills  <br/>   * Blog<br/>* Solutions  <br/>By company size  <br/>   * Enterprises  <br/>   * Small and medium teams  <br/>   * Startups  <br/>   * Nonprofits  <br/>By use case  <br/>   * DevSecOps  <br/>   * DevOps  <br/>   * CI/CD  <br/>   * View all use cases  <br/>By industry  <br/>   * Healthcare  <br/>   * Financial services  <br/>   * Manufacturing  <br/>   * Government  <br/>   * View all industries  <br/> View all solutions<br/>* Resources  <br/>Topics  <br/>   * AI  <br/>   * DevOps  <br/>   * Security  <br/>   * Software Development  <br/>   * View all  <br/>Explore  <br/>   * Learning Pathways  <br/>   * Events & Webinars  <br/>   * Ebooks & Whitepapers  <br/>   * Customer Stories  <br/>   * Partners  <br/>   * Executive Insights<br/>* Open Source  <br/>   * GitHub Sponsors Fund open source developers  <br/>   * The ReadME Project GitHub community articles  <br/>Repositories  <br/>   * Topics  <br/>   * Trending  <br/>   * Collections<br/>* Enterprise  <br/>   * Enterprise platform AI-powered developer platform  <br/>Available add-ons  <br/>   * GitHub Advanced Security Enterprise-grade security features  <br/>   * Copilot for business Enterprise-grade AI features  <br/>   * Premium Support Enterprise-grade 24/7 support<br/>* Pricing<br/><br/>Search or jump to... <br/><br/># Search code, repositories, users, issues, pull requests...<br/><br/> Search <br/><br/>Clear <br/><br/>Search syntax tips <br/><br/>#  Provide feedback<br/><br/>We read every piece of feedback, and take your input very seriously.<br/><br/>Include my email address so I can be contacted <br/><br/> Cancel  Submit feedback <br/><br/>#  Saved searches<br/><br/>## Use saved searches to filter your results more quickly<br/><br/>Name <br/><br/>Query <br/><br/> To see all available qualifiers, see our documentation.<br/><br/> Cancel  Create saved search <br/><br/> Sign in <br/><br/> Sign up <br/><br/>Appearance settings <br/><br/>Resetting focus <br/><br/>You signed in with another tab or window. Reload to refresh your session. You signed out in another tab or window. Reload to refresh your session. You switched accounts on another tab or window. Reload to refresh your session. Dismiss alert <br/><br/>\{{ message \}}<br/><br/> libvips / **libvips** Public <br/><br/>* ###  Uh oh!  <br/>There was an error while loading. Please reload this page.<br/>* Notifications You must be signed in to change notification settings<br/>* Fork702<br/>* Star 10.4k<br/><br/>* Code<br/>* Issues 60<br/>* Pull requests 8<br/>* Discussions<br/>* Actions<br/>* Projects 0<br/>* Wiki<br/>* Security  <br/> Uh oh!  <br/>There was an error while loading. Please reload this page.<br/>* Insights<br/><br/>Additional navigation options <br/><br/>* Code<br/>* Issues<br/>* Pull requests<br/>* Discussions<br/>* Actions<br/>* Projects<br/>* Wiki<br/>* Security<br/>* Insights<br/><br/>## Footer<br/><br/> © 2025 GitHub, Inc. <br/><br/>### Footer navigation<br/><br/>* Terms<br/>* Privacy<br/>* Security<br/>* Status<br/>* Docs<br/>* Contact<br/>* Manage cookies<br/>* Do not share my personal information<br/><br/> You can’t perform that action at this time. |
| GitHub - Asd-g/AviSynth-vsDeblockPP7: A port of the MPlayer PP7 deblocking filter. | https://github.com/Asd-g/AviSynth-vsDeblockPP7 | Skip to content <br/><br/>## Navigation Menu<br/><br/>Toggle navigation <br/><br/> Sign in <br/><br/>Appearance settings <br/><br/>* Product  <br/>   * GitHub Copilot Write better code with AI  <br/>   * GitHub Models New  Manage and compare prompts  <br/>   * GitHub Advanced Security Find and fix vulnerabilities  <br/>   * Actions Automate any workflow  <br/>   * Codespaces Instant dev environments  <br/>   * Issues Plan and track work  <br/>   * Code Review Manage code changes  <br/>   * Discussions Collaborate outside of code  <br/>   * Code Search Find more, search less  <br/>Explore  <br/>   * Why GitHub  <br/>   * All features  <br/>   * Documentation  <br/>   * GitHub Skills  <br/>   * Blog<br/>* Solutions  <br/>By company size  <br/>   * Enterprises  <br/>   * Small and medium teams  <br/>   * Startups  <br/>   * Nonprofits  <br/>By use case  <br/>   * DevSecOps  <br/>   * DevOps  <br/>   * CI/CD  <br/>   * View all use cases  <br/>By industry  <br/>   * Healthcare  <br/>   * Financial services  <br/>   * Manufacturing  <br/>   * Government  <br/>   * View all industries  <br/> View all solutions<br/>* Resources  <br/>Topics  <br/>   * AI  <br/>   * DevOps  <br/>   * Security  <br/>   * Software Development  <br/>   * View all  <br/>Explore  <br/>   * Learning Pathways  <br/>   * Events & Webinars  <br/>   * Ebooks & Whitepapers  <br/>   * Customer Stories  <br/>   * Partners  <br/>   * Executive Insights<br/>* Open Source  <br/>   * GitHub Sponsors Fund open source developers  <br/>   * The ReadME Project GitHub community articles  <br/>Repositories  <br/>   * Topics  <br/>   * Trending  <br/>   * Collections<br/>* Enterprise  <br/>   * Enterprise platform AI-powered developer platform  <br/>Available add-ons  <br/>   * GitHub Advanced Security Enterprise-grade security features  <br/>   * Copilot for business Enterprise-grade AI features  <br/>   * Premium Support Enterprise-grade 24/7 support<br/>* Pricing<br/><br/>Search or jump to... <br/><br/># Search code, repositories, users, issues, pull requests...<br/><br/> Search <br/><br/>Clear <br/><br/>Search syntax tips <br/><br/>#  Provide feedback<br/><br/>We read every piece of feedback, and take your input very seriously.<br/><br/>Include my email address so I can be contacted <br/><br/> Cancel  Submit feedback <br/><br/>#  Saved searches<br/><br/>## Use saved searches to filter your results more quickly<br/><br/>Name <br/><br/>Query <br/><br/> To see all available qualifiers, see our documentation.<br/><br/> Cancel  Create saved search <br/><br/> Sign in <br/><br/> Sign up <br/><br/>Appearance settings <br/><br/>Resetting focus <br/><br/>You signed in with another tab or window. Reload to refresh your session. You signed out in another tab or window. Reload to refresh your session. You switched accounts on another tab or window. Reload to refresh your session. Dismiss alert <br/><br/>\{{ message \}}<br/><br/> Asd-g / **AviSynth-vsDeblockPP7** Public <br/><br/>* Notifications You must be signed in to change notification settings<br/>* Fork1<br/>* Star 7<br/><br/> A port of the MPlayer PP7 deblocking filter.<br/><br/>### License<br/><br/> GPL-3.0 license <br/><br/>7 stars 1 fork Branches Tags Activity <br/><br/> Star <br/><br/>Notifications You must be signed in to change notification settings <br/><br/>* Code<br/>* Issues 0<br/>* Pull requests 0<br/>* Actions<br/>* Projects 0<br/>* Security  <br/> Uh oh!  <br/>There was an error while loading. Please reload this page.<br/>* Insights<br/><br/>Additional navigation options <br/><br/>* Code<br/>* Issues<br/>* Pull requests<br/>* Actions<br/>* Projects<br/>* Security<br/>* Insights<br/><br/># Asd-g/AviSynth-vsDeblockPP7<br/><br/>master<br/><br/>BranchesTags<br/><br/>Go to file<br/><br/>Code<br/><br/>## Folders and files<br/><br/>\| Name                                                                                       \| Name                                                                                       \| Last commit message \| Last commit date \|<br/>\| ------------------------------------------------------------------------------------------ \| ------------------------------------------------------------------------------------------ \| ------------------- \| ---------------- \|<br/>\| Latest commit History[4 Commits](/Asd-g/AviSynth-vsDeblockPP7/commits/master/)             \|                                                                                            \|                     \|                  \|<br/>\| [build](/Asd-g/AviSynth-vsDeblockPP7/tree/master/build "build")                            \| [build](/Asd-g/AviSynth-vsDeblockPP7/tree/master/build "build")                            \|                     \|                  \|<br/>\| [src](/Asd-g/AviSynth-vsDeblockPP7/tree/master/src "src")                                  \| [src](/Asd-g/AviSynth-vsDeblockPP7/tree/master/src "src")                                  \|                     \|                  \|<br/>\| [.gitattributes](/Asd-g/AviSynth-vsDeblockPP7/blob/master/.gitattributes ".gitattributes") \| [.gitattributes](/Asd-g/AviSynth-vsDeblockPP7/blob/master/.gitattributes ".gitattributes") \|                     \|                  \|<br/>\| [.gitignore](/Asd-g/AviSynth-vsDeblockPP7/blob/master/.gitignore ".gitignore")             \| [.gitignore](/Asd-g/AviSynth-vsDeblockPP7/blob/master/.gitignore ".gitignore")             \|                     \|                  \|<br/>\| [LICENSE](/Asd-g/AviSynth-vsDeblockPP7/blob/master/LICENSE "LICENSE")                      \| [LICENSE](/Asd-g/AviSynth-vsDeblockPP7/blob/master/LICENSE "LICENSE")                      \|                     \|                  \|<br/>\| [README.md](/Asd-g/AviSynth-vsDeblockPP7/blob/master/README.md "README.md")                \| [README.md](/Asd-g/AviSynth-vsDeblockPP7/blob/master/README.md "README.md")                \|                     \|                  \|<br/>\| View all files                                                                             \|                                                                                            \|                     \|                  \|<br/><br/>## Repository files navigation<br/><br/>* README<br/>* GPL-3.0 license<br/><br/>## Description<br/><br/>Variant of the spp filter in MPlayer, similar to spp=6 with 7 point DCT where only the center sample is used after IDCT.<br/><br/>This is a port of the VapourSynth plugin DeblockPP7.<br/><br/>### Requirements:<br/><br/>* AviSynth 2.60 / AviSynth+ 3.4 or later<br/>* Microsoft VisualC++ Redistributable Package 2022 (can be downloaded from here)<br/><br/>### Usage:<br/><br/>```<br/>vsDeblockPP7 (clip, float "qp", int "mode", int "y", int "u", int "v")<br/><br/>```<br/><br/>### Parameters:<br/><br/>* clip  <br/>A clip to process. It must be in planar format.<br/>* qp  <br/>Constant quantization parameter.  <br/>Must be between 1.0 and 63.0.  <br/>Default: 2.0.<br/>* mode  <br/>0: Hard threshold.  <br/>1: Soft threshold (better deringing, but blurrier).  <br/>2: Medium threshold (compromise between hard and soft).  <br/>Default: 0.<br/>* y, u, v  <br/>Planes to process.  <br/>1: Return garbage.  <br/>2: Copy plane.  <br/>3: Process plane. Always process planes when the clip is RGB.  <br/>Default: y = 3, u = 3, v = 3.<br/><br/>## About<br/><br/> A port of the MPlayer PP7 deblocking filter.<br/><br/>### Resources<br/><br/> Readme <br/><br/>### License<br/><br/> GPL-3.0 license <br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>Activity <br/><br/>### Stars<br/><br/>**7** stars <br/><br/>### Watchers<br/><br/>**2** watching <br/><br/>### Forks<br/><br/>**1** fork <br/><br/> Report repository <br/><br/>## Releases1<br/><br/>Initial release.  Latest Jul 11, 2020 <br/><br/>## Packages0<br/><br/> No packages published   <br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>## Languages<br/><br/>* C++ 100.0%<br/><br/>## Footer<br/><br/> © 2025 GitHub, Inc. <br/><br/>### Footer navigation<br/><br/>* Terms<br/>* Privacy<br/>* Security<br/>* Status<br/>* Docs<br/>* Contact<br/>* Manage cookies<br/>* Do not share my personal information<br/><br/> You can’t perform that action at this time. |
| GitHub - HomeOfVapourSynthEvolution/VapourSynth-Deblock: Deblock filter for VapourSynth | https://github.com/HomeOfVapourSynthEvolution/VapourSynth-Deblock | Skip to content <br/><br/>## Navigation Menu<br/><br/>Toggle navigation <br/><br/> Sign in <br/><br/>Appearance settings <br/><br/>* Product  <br/>   * GitHub Copilot Write better code with AI  <br/>   * GitHub Models New  Manage and compare prompts  <br/>   * GitHub Advanced Security Find and fix vulnerabilities  <br/>   * Actions Automate any workflow  <br/>   * Codespaces Instant dev environments  <br/>   * Issues Plan and track work  <br/>   * Code Review Manage code changes  <br/>   * Discussions Collaborate outside of code  <br/>   * Code Search Find more, search less  <br/>Explore  <br/>   * Why GitHub  <br/>   * All features  <br/>   * Documentation  <br/>   * GitHub Skills  <br/>   * Blog<br/>* Solutions  <br/>By company size  <br/>   * Enterprises  <br/>   * Small and medium teams  <br/>   * Startups  <br/>   * Nonprofits  <br/>By use case  <br/>   * DevSecOps  <br/>   * DevOps  <br/>   * CI/CD  <br/>   * View all use cases  <br/>By industry  <br/>   * Healthcare  <br/>   * Financial services  <br/>   * Manufacturing  <br/>   * Government  <br/>   * View all industries  <br/> View all solutions<br/>* Resources  <br/>Topics  <br/>   * AI  <br/>   * DevOps  <br/>   * Security  <br/>   * Software Development  <br/>   * View all  <br/>Explore  <br/>   * Learning Pathways  <br/>   * Events & Webinars  <br/>   * Ebooks & Whitepapers  <br/>   * Customer Stories  <br/>   * Partners  <br/>   * Executive Insights<br/>* Open Source  <br/>   * GitHub Sponsors Fund open source developers  <br/>   * The ReadME Project GitHub community articles  <br/>Repositories  <br/>   * Topics  <br/>   * Trending  <br/>   * Collections<br/>* Enterprise  <br/>   * Enterprise platform AI-powered developer platform  <br/>Available add-ons  <br/>   * GitHub Advanced Security Enterprise-grade security features  <br/>   * Copilot for business Enterprise-grade AI features  <br/>   * Premium Support Enterprise-grade 24/7 support<br/>* Pricing<br/><br/>Search or jump to... <br/><br/># Search code, repositories, users, issues, pull requests...<br/><br/> Search <br/><br/>Clear <br/><br/>Search syntax tips <br/><br/>#  Provide feedback<br/><br/>We read every piece of feedback, and take your input very seriously.<br/><br/>Include my email address so I can be contacted <br/><br/> Cancel  Submit feedback <br/><br/>#  Saved searches<br/><br/>## Use saved searches to filter your results more quickly<br/><br/>Name <br/><br/>Query <br/><br/> To see all available qualifiers, see our documentation.<br/><br/> Cancel  Create saved search <br/><br/> Sign in <br/><br/> Sign up <br/><br/>Appearance settings <br/><br/>Resetting focus <br/><br/>You signed in with another tab or window. Reload to refresh your session. You signed out in another tab or window. Reload to refresh your session. You switched accounts on another tab or window. Reload to refresh your session. Dismiss alert <br/><br/>\{{ message \}}<br/><br/> HomeOfVapourSynthEvolution / **VapourSynth-Deblock** Public <br/><br/>* Notifications You must be signed in to change notification settings<br/>* Fork1<br/>* Star 8<br/><br/> Deblock filter for VapourSynth<br/><br/>### License<br/><br/> GPL-2.0 license <br/><br/>8 stars 1 fork Branches Tags Activity <br/><br/> Star <br/><br/>Notifications You must be signed in to change notification settings <br/><br/>* Code<br/>* Issues 0<br/>* Pull requests 0<br/>* Discussions<br/>* Actions<br/>* Projects 0<br/>* Security  <br/> Uh oh!  <br/>There was an error while loading. Please reload this page.<br/>* Insights<br/><br/>Additional navigation options <br/><br/>* Code<br/>* Issues<br/>* Pull requests<br/>* Discussions<br/>* Actions<br/>* Projects<br/>* Security<br/>* Insights<br/><br/># HomeOfVapourSynthEvolution/VapourSynth-Deblock<br/><br/>master<br/><br/>BranchesTags<br/><br/>Go to file<br/><br/>Code<br/><br/>## Folders and files<br/><br/>\| Name                                                                                                          \| Name                                                                                                          \| Last commit message \| Last commit date \|<br/>\| ------------------------------------------------------------------------------------------------------------- \| ------------------------------------------------------------------------------------------------------------- \| ------------------- \| ---------------- \|<br/>\| Latest commit History[45 Commits](/HomeOfVapourSynthEvolution/VapourSynth-Deblock/commits/master/)            \|                                                                                                               \|                     \|                  \|<br/>\| [Deblock](/HomeOfVapourSynthEvolution/VapourSynth-Deblock/tree/master/Deblock "Deblock")                      \| [Deblock](/HomeOfVapourSynthEvolution/VapourSynth-Deblock/tree/master/Deblock "Deblock")                      \|                     \|                  \|<br/>\| [.gitattributes](/HomeOfVapourSynthEvolution/VapourSynth-Deblock/blob/master/.gitattributes ".gitattributes") \| [.gitattributes](/HomeOfVapourSynthEvolution/VapourSynth-Deblock/blob/master/.gitattributes ".gitattributes") \|                     \|                  \|<br/>\| [.gitignore](/HomeOfVapourSynthEvolution/VapourSynth-Deblock/blob/master/.gitignore ".gitignore")             \| [.gitignore](/HomeOfVapourSynthEvolution/VapourSynth-Deblock/blob/master/.gitignore ".gitignore")             \|                     \|                  \|<br/>\| [LICENSE](/HomeOfVapourSynthEvolution/VapourSynth-Deblock/blob/master/LICENSE "LICENSE")                      \| [LICENSE](/HomeOfVapourSynthEvolution/VapourSynth-Deblock/blob/master/LICENSE "LICENSE")                      \|                     \|                  \|<br/>\| [Makefile.am](/HomeOfVapourSynthEvolution/VapourSynth-Deblock/blob/master/Makefile.am "Makefile.am")          \| [Makefile.am](/HomeOfVapourSynthEvolution/VapourSynth-Deblock/blob/master/Makefile.am "Makefile.am")          \|                     \|                  \|<br/>\| [README.md](/HomeOfVapourSynthEvolution/VapourSynth-Deblock/blob/master/README.md "README.md")                \| [README.md](/HomeOfVapourSynthEvolution/VapourSynth-Deblock/blob/master/README.md "README.md")                \|                     \|                  \|<br/>\| [autogen.sh](/HomeOfVapourSynthEvolution/VapourSynth-Deblock/blob/master/autogen.sh "autogen.sh")             \| [autogen.sh](/HomeOfVapourSynthEvolution/VapourSynth-Deblock/blob/master/autogen.sh "autogen.sh")             \|                     \|                  \|<br/>\| [configure.ac](/HomeOfVapourSynthEvolution/VapourSynth-Deblock/blob/master/configure.ac "configure.ac")       \| [configure.ac](/HomeOfVapourSynthEvolution/VapourSynth-Deblock/blob/master/configure.ac "configure.ac")       \|                     \|                  \|<br/>\| [meson.build](/HomeOfVapourSynthEvolution/VapourSynth-Deblock/blob/master/meson.build "meson.build")          \| [meson.build](/HomeOfVapourSynthEvolution/VapourSynth-Deblock/blob/master/meson.build "meson.build")          \|                     \|                  \|<br/>\| View all files                                                                                                \|                                                                                                               \|                     \|                  \|<br/><br/>## Repository files navigation<br/><br/>* README<br/>* GPL-2.0 license<br/><br/># Description<br/><br/>It does a deblocking of the picture, using the deblocking filter of h264\. Ported from AviSynth plugin <http://www.avisynth.nl/users/fizick/mvtools/deblock.html><br/><br/># Usage<br/><br/>```<br/>deblock.Deblock(clip clip[, int quant=25, int aoffset=0, int boffset=0, int[] planes])<br/><br/>```<br/><br/>* clip: Clip to process. Any planar format with either integer sample type of 8-16 bit depth or float sample type of 32 bit depth is supported.<br/>* quant: The higher the quant, the stronger the deblocking. It can range from 0 to 60.<br/>* aoffset: Quant modifier to the blocking detector threshold. Setting it higher means than more edges will deblocked.<br/>* boffset: Another quant modifier, for block detecting and for deblocking's strength. There again, the higher, the stronger.<br/>* planes: A list of the planes to process. By default all planes are processed.<br/><br/>If `quant` \+ `aoffset` is inferior to 16, the filter does nothing at all. The same goes for `quant` \+ `boffset`.<br/><br/># Compilation<br/><br/>```<br/>meson build<br/>ninja -C build<br/><br/>```<br/><br/>or<br/><br/>```<br/>./autogen.sh<br/>./configure<br/>make<br/><br/>```<br/><br/>## About<br/><br/> Deblock filter for VapourSynth<br/><br/>### Resources<br/><br/> Readme <br/><br/>### License<br/><br/> GPL-2.0 license <br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>Activity <br/><br/>Custom properties <br/><br/>### Stars<br/><br/>**8** stars <br/><br/>### Watchers<br/><br/>**5** watching <br/><br/>### Forks<br/><br/>**1** fork <br/><br/> Report repository <br/><br/>## Releases7<br/><br/>r6.1  Latest Nov 29, 2018 <br/><br/>\+ 6 releases<br/><br/>## Packages0<br/><br/> No packages published   <br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>## Languages<br/><br/>* C++ 88.5%<br/>* M4 5.2%<br/>* Meson 3.9%<br/>* Makefile 2.1%<br/>* Shell 0.3%<br/><br/>## Footer<br/><br/> © 2025 GitHub, Inc. <br/><br/>### Footer navigation<br/><br/>* Terms<br/>* Privacy<br/>* Security<br/>* Status<br/>* Docs<br/>* Contact<br/>* Manage cookies<br/>* Do not share my personal information<br/><br/> You can’t perform that action at this time. |
| L-SMASH Source - Page 40 | https://forum.doom9.org/showthread.php?p=1879042 | \| **Welcome to [Doom9](http://www.doom9.org/)'s Forum, THE in-place to be for everyone interested in DVD conversion.** **Before you start posting please read the [forum rules](http://forum.doom9.org/forum-rules.htm). By posting to this forum you agree to abide by the rules.** \|  \|<br/>\| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \|  \|<br/><br/>  <br/>\| [Go Back](#) [Doom9's Forum](index.php?s=75cb4a08365f3910e07973f4b0489a43) \> [Capturing and Editing Video](forumdisplay.php?s=75cb4a08365f3910e07973f4b0489a43&f=67) \> [Avisynth Development](forumdisplay.php?s=75cb4a08365f3910e07973f4b0489a43&f=69) [Reload this Page](/showthread.php?p=1879042)   **L-SMASH Source** \| User Name Remember Me? Password \|<br/>\| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| ------------------------------- \|<br/><br/>\| [Register](register.php?s=75cb4a08365f3910e07973f4b0489a43) \| [FAQ](faq.php?s=75cb4a08365f3910e07973f4b0489a43) \| [Search](search.php?s=75cb4a08365f3910e07973f4b0489a43) \| [Today's Posts](search.php?s=75cb4a08365f3910e07973f4b0489a43&do=getdaily) \| [Mark Forums Read](forumdisplay.php?s=75cb4a08365f3910e07973f4b0489a43&do=markread&markreadhash=guest) \|<br/>\| ----------------------------------------------------------- \| ------------------------------------------------- \| ------------------------------------------------------- \| -------------------------------------------------------------------------- \| ------------------------------------------------------------------------------------------------------ \|<br/><br/>  <br/>\| [Reply](newreply.php?s=75cb4a08365f3910e07973f4b0489a43&do=newreply&noquote=1&p=1874507) \| Page 40 of 85 [**«** First](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&t=167435 "First Page - Results 1 to 20 of 1,688") [<](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&t=167435&page=39 "Prev Page - Results 761 to 780 of 1,688") [30](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&t=167435&page=30 "Show results 581 to 600 of 1,688")[38](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&t=167435&page=38 "Show results 741 to 760 of 1,688")[39](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&t=167435&page=39 "Show results 761 to 780 of 1,688") **40** [41](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&t=167435&page=41 "Show results 801 to 820 of 1,688")[42](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&t=167435&page=42 "Show results 821 to 840 of 1,688")[50](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&t=167435&page=50 "Show results 981 to 1,000 of 1,688") [\>](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&t=167435&page=41 "Next Page - Results 801 to 820 of 1,688") [Last **»**](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&t=167435&page=85 "Last Page - Results 1,681 to 1,688 of 1,688") \|<br/>\| ---------------------------------------------------------------------------------------- \| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \|<br/><br/>\| \|  [Thread Tools](#goto%5Fthreadtools) \| [Search this Thread](#goto%5Fthreadsearch) \| [Display Modes](#goto%5Fdisplaymodes) \|<br/>\| -------------------------------------- \| ------------------------------------------ \| ------------------------------------- \|<br/><br/>\| ![Old](images/statusicon/post_old.gif) 15th May 2019, 22:28                                                                                                                                                      \| #[**781**](showpost.php?s=75cb4a08365f3910e07973f4b0489a43&p=1874507&postcount=781)  \\| [**Link**](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&p=1874507#post1874507)           \|<br/>\| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \|<br/>\| [stax76](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=13377) Registered User [stax76's Avatar](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=13377) Join Date: Jun 2002 Location: On thin ice  Posts: 6,846 \| 935 from the link above might have a memory leak problem.  \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ <https://github.com/stax76/software-list> <https://www.youtube.com/@stax76/playlists> \|<br/>\| ![stax76 is offline](images/statusicon/user_offline.gif)                                                                                                                                                         \| [Reply With Quote](newreply.php?s=75cb4a08365f3910e07973f4b0489a43&do=newreply&p=1874507)                                                                                             \|<br/><br/>\| stax76                                                                                         \|<br/>\| ---------------------------------------------------------------------------------------------- \|<br/>\| [View Public Profile](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=13377)                   \|<br/>\| [Find More Posts by stax76](search.php?s=75cb4a08365f3910e07973f4b0489a43&do=finduser&u=13377) \|<br/><br/>\| ![Old](images/statusicon/post_old.gif) 16th May 2019, 10:38                                                                                                                                                                \| #[**782**](showpost.php?s=75cb4a08365f3910e07973f4b0489a43&p=1874528&postcount=782)  \\| [**Link**](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&p=1874528#post1874528)                                                                                                                                                                                                                                                                                                                                                                                                                                                \|                                                 \|                                                 \|                                                    \|<br/>\| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| ----------------------------------------------- \| ----------------------------------------------- \| -------------------------------------------------- \|<br/>\| [LigH](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=73) German doom9/Gleitz SuMo [LigH's Avatar](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=73) Join Date: Oct 2001 Location: Germany, rural Altmark  Posts: 7,241 \| If you want to use L-SMASH Works in AviSynth also for audio processing, you may want to prefer LwLibavAudioSource over LSMASHAudioSource even for ISO base media containers. I had an MP4 as source which contains AVC video and AAC audio (surprisingly in 44.1 kHz, possibly accidently resampled). Using LSMASHAudioSource, the audio contained annoying crackles; using LwLibavAudioSource, the sound was clean.  \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ [_New_ German Gleitz board](https://gleitz.info)MediaFire: [x264](https://www.mediafire.com/?bxvu1vvld31k1) \\| [x265](https://www.mediafire.com/?6lfp2jlygogwa) \| [VPx](https://www.mediafire.com/?n2k6a44pxns40) \| [AOM](https://www.mediafire.com/?21254ingvippg) \| [Xvid](https://forum.videohelp.com/threads/386228) \|<br/>\| ![LigH is offline](images/statusicon/user_offline.gif)                                                                                                                                                                     \| [Reply With Quote](newreply.php?s=75cb4a08365f3910e07973f4b0489a43&do=newreply&p=1874528)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  \|                                                 \|                                                 \|                                                    \|<br/><br/>\| LigH                                                                                      \|<br/>\| ----------------------------------------------------------------------------------------- \|<br/>\| [View Public Profile](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=73)                 \|<br/>\| [Visit LigH's homepage!](http://www.ligh.de)                                              \|<br/>\| [Find More Posts by LigH](search.php?s=75cb4a08365f3910e07973f4b0489a43&do=finduser&u=73) \|<br/><br/>\| ![Old](images/statusicon/post_old.gif) 16th May 2019, 10:46                                                                                                                                                      \| #[**783**](showpost.php?s=75cb4a08365f3910e07973f4b0489a43&p=1874530&postcount=783)  \\| [**Link**](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&p=1874530#post1874530)                                                                                                                                                                                               \|<br/>\| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \|<br/>\| [stax76](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=13377) Registered User [stax76's Avatar](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=13377) Join Date: Jun 2002 Location: On thin ice  Posts: 6,846 \| Quote:  If you want to use L-SMASH Works in AviSynth also for audio processing Audio processing with avs is not something staxrip does by default. Which build are you using? Maybe have a look in task manager regarding memory consumption.  \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ <https://github.com/stax76/software-list> <https://www.youtube.com/@stax76/playlists> \|<br/>\| ![stax76 is offline](images/statusicon/user_offline.gif)                                                                                                                                                         \| [Reply With Quote](newreply.php?s=75cb4a08365f3910e07973f4b0489a43&do=newreply&p=1874530)                                                                                                                                                                                                                                                                                 \|<br/><br/>\| stax76                                                                                         \|<br/>\| ---------------------------------------------------------------------------------------------- \|<br/>\| [View Public Profile](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=13377)                   \|<br/>\| [Find More Posts by stax76](search.php?s=75cb4a08365f3910e07973f4b0489a43&do=finduser&u=13377) \|<br/><br/>\| ![Old](images/statusicon/post_old.gif) 17th May 2019, 13:32                                                                                                                                                                \| #[**784**](showpost.php?s=75cb4a08365f3910e07973f4b0489a43&p=1874676&postcount=784)  \\| [**Link**](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&p=1874676#post1874676)                                                                                                                                                                                                                                                \|                                                 \|                                                 \|                                                    \|<br/>\| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| ----------------------------------------------- \| ----------------------------------------------- \| -------------------------------------------------- \|<br/>\| [LigH](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=73) German doom9/Gleitz SuMo [LigH's Avatar](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=73) Join Date: Oct 2001 Location: Germany, rural Altmark  Posts: 7,241 \| My report was not directed specifically to you, stax76, rather to the general audience. ![](images/smilies/tongue.gif "Stick Out Tongue") I have a file date 2018-05-30\. Probably LSMASHSource r941 MSVC hydra3333.  \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ [_New_ German Gleitz board](https://gleitz.info)MediaFire: [x264](https://www.mediafire.com/?bxvu1vvld31k1) \\| [x265](https://www.mediafire.com/?6lfp2jlygogwa) \| [VPx](https://www.mediafire.com/?n2k6a44pxns40) \| [AOM](https://www.mediafire.com/?21254ingvippg) \| [Xvid](https://forum.videohelp.com/threads/386228) \|<br/>\| ![LigH is offline](images/statusicon/user_offline.gif)                                                                                                                                                                     \| [Reply With Quote](newreply.php?s=75cb4a08365f3910e07973f4b0489a43&do=newreply&p=1874676)                                                                                                                                                                                                                                                                                                                                  \|                                                 \|                                                 \|                                                    \|<br/><br/>\| LigH                                                                                      \|<br/>\| ----------------------------------------------------------------------------------------- \|<br/>\| [View Public Profile](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=73)                 \|<br/>\| [Visit LigH's homepage!](http://www.ligh.de)                                              \|<br/>\| [Find More Posts by LigH](search.php?s=75cb4a08365f3910e07973f4b0489a43&do=finduser&u=73) \|<br/><br/>\| ![Old](images/statusicon/post_old.gif) 17th May 2019, 14:02                                                                                                                                                      \| #[**785**](showpost.php?s=75cb4a08365f3910e07973f4b0489a43&p=1874678&postcount=785)  \\| [**Link**](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&p=1874678#post1874678)                                                                                                                                                   \|<br/>\| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \|<br/>\| [stax76](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=13377) Registered User [stax76's Avatar](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=13377) Join Date: Jun 2002 Location: On thin ice  Posts: 6,846 \| @LigH staxrip was using 929, I've checked 941 memory usage and it's fine. L-SMASH Source 941: <http://www.mediafire.com/file/id4dp2zqha08wvx/>  \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ <https://github.com/stax76/software-list> <https://www.youtube.com/@stax76/playlists>   _Last edited by stax76; 17th May 2019 at 14:26._ \|<br/>\| ![stax76 is offline](images/statusicon/user_offline.gif)                                                                                                                                                         \| [Reply With Quote](newreply.php?s=75cb4a08365f3910e07973f4b0489a43&do=newreply&p=1874678)                                                                                                                                                                                                                                     \|<br/><br/>\| stax76                                                                                         \|<br/>\| ---------------------------------------------------------------------------------------------- \|<br/>\| [View Public Profile](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=13377)                   \|<br/>\| [Find More Posts by stax76](search.php?s=75cb4a08365f3910e07973f4b0489a43&do=finduser&u=13377) \|<br/><br/>\| ![Old](images/statusicon/post_old.gif) 17th May 2019, 14:22                                                                                                                                                                \| #[**786**](showpost.php?s=75cb4a08365f3910e07973f4b0489a43&p=1874680&postcount=786)  \\| [**Link**](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&p=1874680#post1874680)                                                                                                                                                                                                                                \|                                                 \|                                                 \|                                                    \|<br/>\| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| ----------------------------------------------- \| ----------------------------------------------- \| -------------------------------------------------- \|<br/>\| [LigH](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=73) German doom9/Gleitz SuMo [LigH's Avatar](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=73) Join Date: Oct 2001 Location: Germany, rural Altmark  Posts: 7,241 \| I don't think the crackling sound of my issue is related to a memory leak, rather to the L-SMASH demultiplexer handling audio streams incorrectly (the libav demultiplexer instead works correctly).  \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ [_New_ German Gleitz board](https://gleitz.info)MediaFire: [x264](https://www.mediafire.com/?bxvu1vvld31k1) \\| [x265](https://www.mediafire.com/?6lfp2jlygogwa) \| [VPx](https://www.mediafire.com/?n2k6a44pxns40) \| [AOM](https://www.mediafire.com/?21254ingvippg) \| [Xvid](https://forum.videohelp.com/threads/386228) \|<br/>\| ![LigH is offline](images/statusicon/user_offline.gif)                                                                                                                                                                     \| [Reply With Quote](newreply.php?s=75cb4a08365f3910e07973f4b0489a43&do=newreply&p=1874680)                                                                                                                                                                                                                                                                                                                  \|                                                 \|                                                 \|                                                    \|<br/><br/>\| LigH                                                                                      \|<br/>\| ----------------------------------------------------------------------------------------- \|<br/>\| [View Public Profile](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=73)                 \|<br/>\| [Visit LigH's homepage!](http://www.ligh.de)                                              \|<br/>\| [Find More Posts by LigH](search.php?s=75cb4a08365f3910e07973f4b0489a43&do=finduser&u=73) \|<br/><br/>\| ![Old](images/statusicon/post_old.gif) 21st May 2019, 10:08                                                                     \| #[**787**](showpost.php?s=75cb4a08365f3910e07973f4b0489a43&p=1874977&postcount=787)  \\| [**Link**](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&p=1874977#post1874977)                   \|<br/>\| ------------------------------------------------------------------------------------------------------------------------------- \| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \|<br/>\| [Forteen88](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=166023) Herr Join Date: Apr 2009 Location: North Europe  Posts: 558 \| I don't get it, which L-SMASH should I use? Should I use L-SMASH-Works-r935+3-win64-20190401 or L-SMASH Source 941, or l33tmeatwad's "SWResample Test"-version that was released 2018-Jun-20? \|<br/>\| ![Forteen88 is offline](images/statusicon/user_offline.gif)                                                                     \| [Reply With Quote](newreply.php?s=75cb4a08365f3910e07973f4b0489a43&do=newreply&p=1874977)                                                                                                     \|<br/><br/>\| Forteen88                                                                                          \|<br/>\| -------------------------------------------------------------------------------------------------- \|<br/>\| [View Public Profile](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=166023)                      \|<br/>\| [Find More Posts by Forteen88](search.php?s=75cb4a08365f3910e07973f4b0489a43&do=finduser&u=166023) \|<br/><br/>\| ![Old](images/statusicon/post_old.gif) 11th July 2019, 19:26                                                                                                                                                     \| #[**788**](showpost.php?s=75cb4a08365f3910e07973f4b0489a43&p=1879009&postcount=788)  \\| [**Link**](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&p=1879009#post1879009)                                                          \|<br/>\| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ \|<br/>\| [stax76](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=13377) Registered User [stax76's Avatar](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=13377) Join Date: Jun 2002 Location: On thin ice  Posts: 6,846 \| Quote:  Removed parameter stacked. Now supports native high bit depth format. Sounds awesome, thank you.  \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ <https://github.com/stax76/software-list> <https://www.youtube.com/@stax76/playlists> \|<br/>\| ![stax76 is offline](images/statusicon/user_offline.gif)                                                                                                                                                         \| [Reply With Quote](newreply.php?s=75cb4a08365f3910e07973f4b0489a43&do=newreply&p=1879009)                                                                                                                                            \|<br/><br/>\| stax76                                                                                         \|<br/>\| ---------------------------------------------------------------------------------------------- \|<br/>\| [View Public Profile](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=13377)                   \|<br/>\| [Find More Posts by stax76](search.php?s=75cb4a08365f3910e07973f4b0489a43&do=finduser&u=13377) \|<br/><br/>\| ![Old](images/statusicon/post_old.gif) 11th July 2019, 23:44                                                                                                                                                     \| #[**789**](showpost.php?s=75cb4a08365f3910e07973f4b0489a43&p=1879025&postcount=789)  \\| [**Link**](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&p=1879025#post1879025)                                                          \|<br/>\| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ \|<br/>\| [stax76](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=13377) Registered User [stax76's Avatar](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=13377) Join Date: Jun 2002 Location: On thin ice  Posts: 6,846 \| What I don't understand is, when I close the avifile API the memory is not instantly reclaimed entirely.  \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ <https://github.com/stax76/software-list> <https://www.youtube.com/@stax76/playlists> \|<br/>\| ![stax76 is offline](images/statusicon/user_offline.gif)                                                                                                                                                         \| [Reply With Quote](newreply.php?s=75cb4a08365f3910e07973f4b0489a43&do=newreply&p=1879025)                                                                                                                                            \|<br/><br/>\| stax76                                                                                         \|<br/>\| ---------------------------------------------------------------------------------------------- \|<br/>\| [View Public Profile](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=13377)                   \|<br/>\| [Find More Posts by stax76](search.php?s=75cb4a08365f3910e07973f4b0489a43&do=finduser&u=13377) \|<br/><br/>\| ![Old](images/statusicon/post_old.gif) 12th July 2019, 00:44                                                              \| #[**790**](showpost.php?s=75cb4a08365f3910e07973f4b0489a43&p=1879029&postcount=790)  \\| [**Link**](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&p=1879029#post1879029)                                                                                                                                                                                                                                                                                                                                     \|                                       \|       \|         \|          \|                 \|<br/>\| ------------------------------------------------------------------------------------------------------------------------- \| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| ------------------------------------- \| ----- \| ------- \| -------- \| --------------- \|<br/>\| [MeteorRain](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=46781) 結城有紀 Join Date: Dec 2003 Location: Oregon  Posts: 895 \| I also have a copy at [https://github.com/HomeOfAviSynthPlu.../L-SMASH-Works](https://github.com/HomeOfAviSynthPlusEvolution/L-SMASH-Works) basically I integrated patches from multiple forks. Binaries compiled by myself can be found at [https://down.7086.in/AviSynthPlus%20...\_r935%2B26.zip](https://down.7086.in/AviSynthPlus%20Filters/LSMASHSource-Release%5Fr935%2B26.zip) .  \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ **My Projects**x265 - Yuuki-Asuna-modTS - ADTS AAC Splitter \\| LATM AAC Splitter \| BS4K-ASSNeo AviSynth+ filters - F3KDB \| FFT3D \| DFTTest \| MiniDeen \| Temporal Median \|<br/>\| ![MeteorRain is offline](images/statusicon/user_offline.gif)                                                              \| [Reply With Quote](newreply.php?s=75cb4a08365f3910e07973f4b0489a43&do=newreply&p=1879029)                                                                                                                                                                                                                                                                                                                                                                                                                       \|                                       \|       \|         \|          \|                 \|<br/><br/>\| MeteorRain                                                                                         \|<br/>\| -------------------------------------------------------------------------------------------------- \|<br/>\| [View Public Profile](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=46781)                       \|<br/>\| [Find More Posts by MeteorRain](search.php?s=75cb4a08365f3910e07973f4b0489a43&do=finduser&u=46781) \|<br/><br/>\| ![Old](images/statusicon/post_old.gif) 12th July 2019, 02:59                                                                                                                                        \| #[**791**](showpost.php?s=75cb4a08365f3910e07973f4b0489a43&p=1879039&postcount=791)  \\| [**Link**](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&p=1879039#post1879039)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       \|         \|                                                           \|<br/>\| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| ------- \| --------------------------------------------------------- \|<br/>\| [Sparktank](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=196128) 47.952fps@71.928Hz [Sparktank's Avatar](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=196128) Join Date: Mar 2011  Posts: 940 \| Quote:  Originally Posted by **HolyWu** [View Post](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&p=1879004#post1879004) [L-SMASH-Works-r935+25-win64-20190711](https://www.mediafire.com/file/tjtjrwc63vjxi9e/L-SMASH-Works-r935+25-win64-20190711.7z/file) Thanks for this update! Quote:  Originally Posted by **MeteorRain** [View Post](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&p=1879029#post1879029)  basically I integrated patches from multiple forks. Can you tell us a little more about these patches?  \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ Win**10** (x64) build 19041  NVIDIA GeForce **GTX 1060** 3GB (GP106) 3071MB/GDDR5 \\| (r435\_95-4)**NTSC** \| DVD: R1 \| BD: AAMD Ryzen 5 2600 @3.4GHz (6c/12th, I'm on AVX2 now!) \|<br/>\| ![Sparktank is offline](images/statusicon/user_offline.gif)                                                                                                                                         \| [Reply With Quote](newreply.php?s=75cb4a08365f3910e07973f4b0489a43&do=newreply&p=1879039)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         \|         \|                                                           \|<br/><br/>\| Sparktank                                                                                          \|<br/>\| -------------------------------------------------------------------------------------------------- \|<br/>\| [View Public Profile](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=196128)                      \|<br/>\| [Find More Posts by Sparktank](search.php?s=75cb4a08365f3910e07973f4b0489a43&do=finduser&u=196128) \|<br/><br/>\| ![Old](images/statusicon/post_old.gif) 12th July 2019, 04:18                                                              \| #[**792**](showpost.php?s=75cb4a08365f3910e07973f4b0489a43&p=1879042&postcount=792)  \\| [**Link**](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&p=1879042#post1879042)                                                                                                        \|                                       \|       \|         \|          \|                 \|<br/>\| ------------------------------------------------------------------------------------------------------------------------- \| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| ------------------------------------- \| ----- \| ------- \| -------- \| --------------- \|<br/>\| [MeteorRain](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=46781) 結城有紀 Join Date: Dec 2003 Location: Oregon  Posts: 895 \| The same patch set HolyWu used, which was copied from enccc, and one more patch to use swresample instead of avresample, which was copied from l33tmeatwad.  \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ **My Projects**x265 - Yuuki-Asuna-modTS - ADTS AAC Splitter \\| LATM AAC Splitter \| BS4K-ASSNeo AviSynth+ filters - F3KDB \| FFT3D \| DFTTest \| MiniDeen \| Temporal Median \|<br/>\| ![MeteorRain is offline](images/statusicon/user_offline.gif)                                                              \| [Reply With Quote](newreply.php?s=75cb4a08365f3910e07973f4b0489a43&do=newreply&p=1879042)                                                                                                                                                                                          \|                                       \|       \|         \|          \|                 \|<br/><br/>\| MeteorRain                                                                                         \|<br/>\| -------------------------------------------------------------------------------------------------- \|<br/>\| [View Public Profile](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=46781)                       \|<br/>\| [Find More Posts by MeteorRain](search.php?s=75cb4a08365f3910e07973f4b0489a43&do=finduser&u=46781) \|<br/><br/>\| ![Old](images/statusicon/post_old.gif) 12th July 2019, 05:51                                                                                                                                                     \| #[**793**](showpost.php?s=75cb4a08365f3910e07973f4b0489a43&p=1879046&postcount=793)  \\| [**Link**](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&p=1879046#post1879046) \|<br/>\| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \|<br/>\| [stax76](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=13377) Registered User [stax76's Avatar](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=13377) Join Date: Jun 2002 Location: On thin ice  Posts: 6,846 \| ![](images/smilies/thanks-t.gif "thanks")  \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ <https://github.com/stax76/software-list> <https://www.youtube.com/@stax76/playlists>       \|<br/>\| ![stax76 is offline](images/statusicon/user_offline.gif)                                                                                                                                                         \| [Reply With Quote](newreply.php?s=75cb4a08365f3910e07973f4b0489a43&do=newreply&p=1879046)                                                                                   \|<br/><br/>\| stax76                                                                                         \|<br/>\| ---------------------------------------------------------------------------------------------- \|<br/>\| [View Public Profile](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=13377)                   \|<br/>\| [Find More Posts by stax76](search.php?s=75cb4a08365f3910e07973f4b0489a43&do=finduser&u=13377) \|<br/><br/>\| ![Old](images/statusicon/post_old.gif) 25th July 2019, 17:04                                                                                                                                                                \| #[**794**](showpost.php?s=75cb4a08365f3910e07973f4b0489a43&p=1880153&postcount=794)  \\| [**Link**](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&p=1880153#post1880153)                                                                                                                                                                                                                                                                                                                                                                                                                                              \|<br/>\| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ \|<br/>\| [Atak\_Snajpera](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=99881) RipBot264 author [Atak_Snajpera's Avatar](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=99881) Join Date: May 2006 Location: Poland  Posts: 7,929 \| Feature request:Add option cachefile to LWLibavVideoSource so user can specify where index file will be created. Example Code: LWLibavVideoSource("..\\video.mkv",cachefile="C:\\temp\\MyIndex.lwi") Currently LWLibavVideoSource is creating index file in the same folder as source video and thus creating an annoying mess. BTW. Standalone indexer similar to ffmsindex.exe would be also useful.  \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ [**Windows 7 Image Updater** \- SkyLake\\KabyLake\\CoffeLake\\Ryzen Threadripper](https://tinyurl.com/y7vy9s5u)   _Last edited by Atak\_Snajpera; 25th July 2019 at 17:09._ \|<br/>\| ![Atak_Snajpera is offline](images/statusicon/user_offline.gif)                                                                                                                                                             \| [Reply With Quote](newreply.php?s=75cb4a08365f3910e07973f4b0489a43&do=newreply&p=1880153)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \|<br/><br/>\| Atak\_Snajpera                                                                                         \|<br/>\| ------------------------------------------------------------------------------------------------------ \|<br/>\| [View Public Profile](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=99881)                           \|<br/>\| [Find More Posts by Atak\_Snajpera](search.php?s=75cb4a08365f3910e07973f4b0489a43&do=finduser&u=99881) \|<br/><br/>\| ![Old](images/statusicon/post_old.gif) 25th July 2019, 23:30                                                              \| #[**795**](showpost.php?s=75cb4a08365f3910e07973f4b0489a43&p=1880187&postcount=795)  \\| [**Link**](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&p=1880187#post1880187)                                \|                                       \|       \|         \|          \|                 \|<br/>\| ------------------------------------------------------------------------------------------------------------------------- \| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| ------------------------------------- \| ----- \| ------- \| -------- \| --------------- \|<br/>\| [MeteorRain](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=46781) 結城有紀 Join Date: Dec 2003 Location: Oregon  Posts: 895 \| I recalled I found one on GitHub before, but it was not maintained for a few years.  \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ **My Projects**x265 - Yuuki-Asuna-modTS - ADTS AAC Splitter \\| LATM AAC Splitter \| BS4K-ASSNeo AviSynth+ filters - F3KDB \| FFT3D \| DFTTest \| MiniDeen \| Temporal Median \|<br/>\| ![MeteorRain is offline](images/statusicon/user_offline.gif)                                                              \| [Reply With Quote](newreply.php?s=75cb4a08365f3910e07973f4b0489a43&do=newreply&p=1880187)                                                                                                                  \|                                       \|       \|         \|          \|                 \|<br/><br/>\| MeteorRain                                                                                         \|<br/>\| -------------------------------------------------------------------------------------------------- \|<br/>\| [View Public Profile](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=46781)                       \|<br/>\| [Find More Posts by MeteorRain](search.php?s=75cb4a08365f3910e07973f4b0489a43&do=finduser&u=46781) \|<br/><br/>\| ![Old](images/statusicon/post_old.gif) 26th July 2019, 00:02                                                                                                                                                                       \| #[**796**](showpost.php?s=75cb4a08365f3910e07973f4b0489a43&p=1880189&postcount=796)  \\| [**Link**](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&p=1880189#post1880189)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      \|<br/>\| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ \|<br/>\| [StainlessS](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=175358) HeartlessS Usurer [StainlessS's Avatar](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=175358) Join Date: Dec 2009 Location: Over the rainbow  Posts: 11,183 \| To maybe avoid possible misunderstanding and unnecessary work, Code:         ffms2\_ORDERED\_Function\_List  There follows a list of all function names together with CPP style argument specifiers that inform Avisynth the argument types and optional names. Optional arguments have square brackets surrounding their name as in \[name\] and are followed by a type specifier character that gives the type. Unnamed arguments are not optional. eg "cc\[arg1\]b\[arg2\]i" would be two compulsory unnamed clip args, followed by optional 'arg1' of type bool and optional 'arg2' of type int. \# Argument type specifier strings.  c - Video Clip  i - Integer number  f - Float number  s - String  b - boolean  . - Any type (dot) \# Array Specifiers  i\* - Integer Array, zero or more  i+ - Integer Array, one or more  .\* - Any type Array, zero or more  .+ - Any type Array, one or more \#    Etc ################################### FFAudioSource "\[source\]s\[track\]i\[cache\]b\[cachefile\]s\[adjustdelay\]i\[utf8\]b\[varprefix\]s" FFGetLogLevel "" FFGetVersion  "" FFIndex       "\[source\]s\[cachefile\]s\[indexmask\]i\[dumpmask\]i\[audiofile\]s\[errorhandling\]i\[overwrite\]b\[utf8\]b" FFSetLogLevel "i" FFVideoSource "\[source\]s\[track\]i\[cache\]b\[cachefile\]s\[fpsnum\]i\[fpsden\]i\[threads\]i\[timecodes\]s\[seekmode\]i\[rffmode\]i\[width\]i\[height\]i\[resizer\]s\[colorspace\]s\[utf8\]b\[varprefix\]s" Perhaps it is not the standalone, but plugin function that is required. \[Ffindex.Exe is not required to call ffindex() in script\]. and just for good luck. Code:         LSMASHSource\_ORDERED\_Function\_List  LSMASHAudioSource  "\[source\]s\[track\]i\[skip\_priming\]b\[layout\]s\[rate\]i\[decoder\]s" LSMASHVideoSource  "\[source\]s\[track\]i\[threads\]i\[seek\_mode\]i\[seek\_threshold\]i\[dr\]b\[fpsnum\]i\[fpsden\]i\[stacked\]b\[format\]s\[decoder\]s" LWLibavAudioSource "\[source\]s\[stream\_index\]i\[cache\]b\[av\_sync\]b\[layout\]s\[rate\]i\[decoder\]s" LWLibavVideoSource "\[source\]s\[stream\_index\]i\[threads\]i\[cache\]b\[seek\_mode\]i\[seek\_threshold\]i\[dr\]b\[fpsnum\]i\[fpsden\]i\[repeat\]b\[dominance\]i\[stacked\]b\[format\]s\[decoder\]s"  \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ I sometimes post sober. [StainlessS@MediaFire ](https://www.mediafire.com/folder/hb26mthbjz7z6/StainlessS) **::: AND/OR :::** [StainlessS@SendSpace](http://www.sendspace.com/folder/2mwrco) "Some infinities are bigger than other infinities", but how many of them are infinitely bigger ???   _Last edited by StainlessS; 26th July 2019 at 00:54._ \|<br/>\| ![StainlessS is offline](images/statusicon/user_offline.gif)                                                                                                                                                                       \| [Reply With Quote](newreply.php?s=75cb4a08365f3910e07973f4b0489a43&do=newreply&p=1880189)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        \|<br/><br/>\| StainlessS                                                                                          \|<br/>\| --------------------------------------------------------------------------------------------------- \|<br/>\| [View Public Profile](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=175358)                       \|<br/>\| [Find More Posts by StainlessS](search.php?s=75cb4a08365f3910e07973f4b0489a43&do=finduser&u=175358) \|<br/><br/>\| ![Old](images/statusicon/post_old.gif) 26th July 2019, 16:32                                                              \| #[**797**](showpost.php?s=75cb4a08365f3910e07973f4b0489a43&p=1880219&postcount=797)  \\| [**Link**](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&p=1880219#post1880219)                                                                                                                                                                               \|                                       \|       \|         \|          \|                 \|<br/>\| ------------------------------------------------------------------------------------------------------------------------- \| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| ------------------------------------- \| ----- \| ------- \| -------- \| --------------- \|<br/>\| [MeteorRain](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=46781) 結城有紀 Join Date: Dec 2003 Location: Oregon  Posts: 895 \| I meant I found a standalone version of lsmash indexing tool on GitHub -- if that was causing misunderstanding. Although I'm just using symbolic links to link the source into encoding directory, so no pollution to the sources.  \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ **My Projects**x265 - Yuuki-Asuna-modTS - ADTS AAC Splitter \\| LATM AAC Splitter \| BS4K-ASSNeo AviSynth+ filters - F3KDB \| FFT3D \| DFTTest \| MiniDeen \| Temporal Median \|<br/>\| ![MeteorRain is offline](images/statusicon/user_offline.gif)                                                              \| [Reply With Quote](newreply.php?s=75cb4a08365f3910e07973f4b0489a43&do=newreply&p=1880219)                                                                                                                                                                                                                                                                 \|                                       \|       \|         \|          \|                 \|<br/><br/>\| MeteorRain                                                                                         \|<br/>\| -------------------------------------------------------------------------------------------------- \|<br/>\| [View Public Profile](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=46781)                       \|<br/>\| [Find More Posts by MeteorRain](search.php?s=75cb4a08365f3910e07973f4b0489a43&do=finduser&u=46781) \|<br/><br/>\| ![Old](images/statusicon/post_old.gif) 26th July 2019, 16:59                                                                                                                                                                       \| #[**798**](showpost.php?s=75cb4a08365f3910e07973f4b0489a43&p=1880220&postcount=798)  \\| [**Link**](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&p=1880220#post1880220)                                                                                                                                                                                                                                                                                                                                                           \|<br/>\| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \|<br/>\| [StainlessS](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=175358) HeartlessS Usurer [StainlessS's Avatar](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=175358) Join Date: Dec 2009 Location: Over the rainbow  Posts: 11,183 \| Was intended just incase Atak\_Snajpera thought ffmsindex.exe was required for indexing in script via ffmsindex(clip).\[I at one time thought that the executable was necessary for indexing\].  \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ I sometimes post sober. [StainlessS@MediaFire ](https://www.mediafire.com/folder/hb26mthbjz7z6/StainlessS) **::: AND/OR :::** [StainlessS@SendSpace](http://www.sendspace.com/folder/2mwrco) "Some infinities are bigger than other infinities", but how many of them are infinitely bigger ??? \|<br/>\| ![StainlessS is offline](images/statusicon/user_offline.gif)                                                                                                                                                                       \| [Reply With Quote](newreply.php?s=75cb4a08365f3910e07973f4b0489a43&do=newreply&p=1880220)                                                                                                                                                                                                                                                                                                                                                                                                                                             \|<br/><br/>\| StainlessS                                                                                          \|<br/>\| --------------------------------------------------------------------------------------------------- \|<br/>\| [View Public Profile](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=175358)                       \|<br/>\| [Find More Posts by StainlessS](search.php?s=75cb4a08365f3910e07973f4b0489a43&do=finduser&u=175358) \|<br/><br/>\| ![Old](images/statusicon/post_old.gif) 26th July 2019, 18:29                                                                                                                                                     \| #[**799**](showpost.php?s=75cb4a08365f3910e07973f4b0489a43&p=1880232&postcount=799)  \\| [**Link**](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&p=1880232#post1880232)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \|<br/>\| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \|<br/>\| [stax76](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=13377) Registered User [stax76's Avatar](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=13377) Join Date: Jun 2002 Location: On thin ice  Posts: 6,846 \| cachefile feature would be very helpful and it would be awesome if the filter would write progress like 'Progress: 1%' to stdout. Please note that any code can write to stdout, console tools can but GUIs and libraries like LSMASHSource.dll can do that as well. An indexing app would be nice but using ffmpeg or vspipe will work as well: Code:                 Using proc As New Proc                     proc.Header = "Index LWLibav"                     proc.Encoding = Encoding.UTF8                     If p.Script.Engine = ScriptEngine.AviSynth Then                         proc.File = Package.ffmpeg.Path                         proc.Arguments = "-i " + p.Script.Path.Escape + " -hide\_banner"                     Else                         proc.File = Package.vspipe.Path                         proc.Arguments = p.Script.Path.Escape + " NUL -i"                     End If                     proc.AllowedExitCodes = \{0, 1\}                     proc.Start()                 End Using  \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ <https://github.com/stax76/software-list> <https://www.youtube.com/@stax76/playlists>   _Last edited by stax76; 26th July 2019 at 18:32._ \|<br/>\| ![stax76 is offline](images/statusicon/user_offline.gif)                                                                                                                                                         \| [Reply With Quote](newreply.php?s=75cb4a08365f3910e07973f4b0489a43&do=newreply&p=1880232)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  \|<br/><br/>\| stax76                                                                                         \|<br/>\| ---------------------------------------------------------------------------------------------- \|<br/>\| [View Public Profile](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=13377)                   \|<br/>\| [Find More Posts by stax76](search.php?s=75cb4a08365f3910e07973f4b0489a43&do=finduser&u=13377) \|<br/><br/>\| ![Old](images/statusicon/post_old.gif) 27th July 2019, 00:20                                                                                                                                                             \| #[**800**](showpost.php?s=75cb4a08365f3910e07973f4b0489a43&p=1880265&postcount=800)  \\| [**Link**](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&p=1880265#post1880265)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             \|<br/>\| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ \| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \|<br/>\| [manolito](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=41597) Registered User [manolito's Avatar](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=41597) Join Date: Sep 2003 Location: Berlin, Germany  Posts: 3,114 \| Another question about the different LSMASH versions... A while ago Ligh recommended to use the LSMASH versions which come with the current MeGUI distribution. Maybe not the latest and greatest, but proven and well tested. I did that (pleasantly surprised about the included latest XP-compatible version), and the non-XP version from the MeGui download is r929. I used this version without any problems, but now I see that there are some newer builds which also incorporate a couple of patches, and I am curious again... ![](images/smilies/smile.gif "Smilie") There is r941 by hydra3333, and also interesting is r935 by MeteorRain. I only need the 32-bit versions, and they should work under classic AVS 2.60 as well as under the latest AVS+ version. And stability is my major concern. I did some test conversions with r935 by MeteorRain under classic AVS 2.61 Alpha without any problems. What confused me is that the readme says that this is a plugin for AVS+ and VapourSynth, no mention of classic AVS. Can I safely ignore this for the 32-bit version, or am I playing with fire? Cheersmanolito \|<br/>\| ![manolito is offline](images/statusicon/user_offline.gif)                                                                                                                                                               \| [Reply With Quote](newreply.php?s=75cb4a08365f3910e07973f4b0489a43&do=newreply&p=1880265)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \|<br/><br/>\| manolito                                                                                         \|<br/>\| ------------------------------------------------------------------------------------------------ \|<br/>\| [View Public Profile](member.php?s=75cb4a08365f3910e07973f4b0489a43&u=41597)                     \|<br/>\| [Find More Posts by manolito](search.php?s=75cb4a08365f3910e07973f4b0489a43&do=finduser&u=41597) \|<br/><br/>\| [Reply](newreply.php?s=75cb4a08365f3910e07973f4b0489a43&do=newreply&noquote=1&p=1880265) \| Page 40 of 85 [**«** First](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&t=167435 "First Page - Results 1 to 20 of 1,688") [<](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&t=167435&page=39 "Prev Page - Results 761 to 780 of 1,688") [30](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&t=167435&page=30 "Show results 581 to 600 of 1,688")[38](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&t=167435&page=38 "Show results 741 to 760 of 1,688")[39](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&t=167435&page=39 "Show results 761 to 780 of 1,688") **40** [41](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&t=167435&page=41 "Show results 801 to 820 of 1,688")[42](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&t=167435&page=42 "Show results 821 to 840 of 1,688")[50](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&t=167435&page=50 "Show results 981 to 1,000 of 1,688") [\>](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&t=167435&page=41 "Next Page - Results 801 to 820 of 1,688") [Last **»**](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&t=167435&page=85 "Last Page - Results 1,681 to 1,688 of 1,688") \|<br/>\| ---------------------------------------------------------------------------------------- \| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \|<br/><br/>  <br/>**«** Previous Thread \|Next Thread **»** <br/><br/>\| Thread Tools                                                                                                                                                                                                                                                                                                                                                                      \| Search this Thread                                                                                             \|<br/>\| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| -------------------------------------------------------------------------------------------------------------- \|<br/>\| ![Show Printable Version](images/buttons/printer.gif) [Show Printable Version](printthread.php?s=75cb4a08365f3910e07973f4b0489a43&t=167435) ![Email this Page](images/buttons/sendtofriend.gif) [Email this Page](sendmessage.php?s=75cb4a08365f3910e07973f4b0489a43&do=sendtofriend&t=167435)                                                                                    \| **Search this Thread**: [Advanced Search](search.php?s=75cb4a08365f3910e07973f4b0489a43&searchthreadid=167435) \|<br/>\| Display Modes                                                                                                                                                                                                                                                                                                                                                                     \|                                                                                                                \|<br/>\| ![Linear Mode](images/buttons/mode_linear.gif) **Linear Mode** ![Hybrid Mode](images/buttons/mode_hybrid.gif) [Switch to Hybrid Mode](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&mode=hybrid&t=167435) ![Threaded Mode](images/buttons/mode_threaded.gif) [Switch to Threaded Mode](showthread.php?s=75cb4a08365f3910e07973f4b0489a43&p=1874507&mode=threaded#post1874507) \|                                                                                                                \|<br/><br/>  <br/>\| [](#top) Posting Rules You **may not** post new threads You **may not** post replies You **may not** post attachments You **may not** edit your posts [BB code](misc.php?s=75cb4a08365f3910e07973f4b0489a43&do=bbcode) is **On** [Smilies](misc.php?s=75cb4a08365f3910e07973f4b0489a43&do=showsmilies) are **On** [\[IMG\]](misc.php?s=75cb4a08365f3910e07973f4b0489a43&do=bbcode#imgcode) code is **On** HTML code is **Off** [Forum Rules](misc.php?s=75cb4a08365f3910e07973f4b0489a43&do=showrules) \| **Forum Jump** User Control Panel Private Messages Subscriptions Who's Online Search Forums Forums Home  Announcements and Chat  General Discussion  News  Forum / Site Suggestions & Help  General  Decrypting  Newbies  DVD2AVI / DGIndex  Audio encoding  Subtitles  Linux, Mac OS X, & Co  Capturing and Editing Video  Avisynth Usage  Avisynth Development  VapourSynth  Capturing Video  DV  HDTV / DVB / TiVo  NLE - Non Linear Editing  VirtualDub, VDubMod & AviDemux  New and alternative a/v containers  Video Encoding  (Auto) Gordian Knot  MPEG-4 ASP  MPEG-4 Encoder GUIs  MPEG-4 AVC / H.264  High Efficiency Video Coding (HEVC)  New and alternative video codecs  MPEG-2 Encoding  VP9 and AV1  (HD) DVD, Blu-ray & (S)VCD  One click suites for DVD backup and DVD creation  DVD & BD Rebuilder  (HD) DVD & Blu-ray authoring  Advanced authoring  IFO/VOB Editors  DVD burning  Hardware & Software  Software players  Hardware players  PC Hard & Software  Programming and Hacking  Development  Translations \|<br/>\| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ \| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \|<br/>  <br/>  <br/>All times are GMT +1\. The time now is 17:18.<br/><br/>  <br/>\| **[doom9.org](http://www.doom9.org/) \-[Archive](archive/index.php) \-[Top](#top)** \|<br/>\| ----------------------------------------------------------------------------------- \|<br/><br/>  <br/> Powered by vBulletin® Version 3.8.11  <br/>Copyright ©2000 - 2025, vBulletin Solutions Inc. |

</details>
</tool-use>

---

Let me search for more specific information about this warning.

---

<tool-use data-tool-type="search" data-tool-name="web_search">
<details>
            <summary>Tool use: **web_search** • Searched web `libvips webpsave_buffer smart_deblock property warning fix` • **6** results</summary>
        
| Title | URL | Chunk |
|-------|-----|-------|
| VipsForeign — load and save images in a variety of formats | https://www.libvips.org/API/8.16/VipsForeignSave.html | # libvips<br/><br/>## A fast image processing library with low memory needs.<br/><br/>Download Install Documentation Issues Wiki libvips projects libvips on GitHub <br/><br/>\| [Top](#) \\| [Description](#VipsForeignSave.description) \| [Object Hierarchy](#VipsForeignSave.object-hierarchy) \| [Properties](#VipsForeignSave.properties) \| [Home](index.html) \| [Up](ch03.html) \| [Prev](libvips-convolution.html) \| [Next](libvips-freqfilt.html) \|<br/>\| ------------------------------------------------------- \| ----------------------------------------------------- \| ----------------------------------------- \| ------------------ \| --------------- \| -------------------------------- \| ----------------------------- \|<br/><br/>\| VipsForeign VipsForeign — load and save images in a variety of formats \|<br/>\| ---------------------------------------------------------------------- \|<br/><br/>## Stability Level<br/><br/>Stable, unless otherwise indicated<br/><br/>## Functions<br/><br/>\| void \*                                                                           \| [vips\_foreign\_map](VipsForeignSave.html#vips-foreign-map "vips_foreign_map ()") ()                                          \|<br/>\| --------------------------------------------------------------------------------- \| ----------------------------------------------------------------------------------------------------------------------------- \|<br/>\| const char \*                                                                     \| [vips\_foreign\_find\_load](VipsForeignSave.html#vips-foreign-find-load "vips_foreign_find_load ()") ()                       \|<br/>\| const char \*                                                                     \| [vips\_foreign\_find\_load\_buffer](VipsForeignSave.html#vips-foreign-find-load-buffer "vips_foreign_find_load_buffer ()") () \|<br/>\| const char \*                                                                     \| [vips\_foreign\_find\_load\_source](VipsForeignSave.html#vips-foreign-find-load-source "vips_foreign_find_load_source ()") () \|<br/>\| [VipsForeignFlags](VipsForeignSave.html#VipsForeignFlags "enum VipsForeignFlags") \| [vips\_foreign\_flags](VipsForeignSave.html#vips-foreign-flags "vips_foreign_flags ()") ()                                    \|<br/>\| gboolean                                                                          \| [vips\_foreign\_is\_a](VipsForeignSave.html#vips-foreign-is-a "vips_foreign_is_a ()") ()                                      \|<br/>\| gboolean                                                                          \| [vips\_foreign\_is\_a\_buffer](VipsForeignSave.html#vips-foreign-is-a-buffer "vips_foreign_is_a_buffer ()") ()                \|<br/>\| gboolean                                                                          \| [vips\_foreign\_is\_a\_source](VipsForeignSave.html#vips-foreign-is-a-source "vips_foreign_is_a_source ()") ()                \|<br/>\| void                                                                              \| [vips\_foreign\_load\_invalidate](VipsForeignSave.html#vips-foreign-load-invalidate "vips_foreign_load_invalidate ()") ()     \|<br/>\| const char \*                                                                     \| [vips\_foreign\_find\_save](VipsForeignSave.html#vips-foreign-find-save "vips_foreign_find_save ()") ()                       \|<br/>\| gchar \*\*                                                                        \| [vips\_foreign\_get\_suffixes](VipsForeignSave.html#vips-foreign-get-suffixes "vips_foreign_get_suffixes ()") ()              \|<br/>\| const char \*                                                                     \| [vips\_foreign\_find\_save\_buffer](VipsForeignSave.html#vips-foreign-find-save-buffer "vips_foreign_find_save_buffer ()") () \|<br/>\| const char \*                                                                     \| [vips\_foreign\_find\_save\_target](VipsForeignSave.html#vips-foreign-find-save-target "vips_foreign_find_save_target ()") () \|<br/>\| int                                                                               \| [vips\_vipsload](VipsForeignSave.html#vips-vipsload "vips_vipsload ()") ()                                                    \|<br/>\| int                                                                               \| [vips\_vipsload\_source](VipsForeignSave.html#vips-vipsload-source "vips_vipsload_source ()") ()                              \|<br/>\| int                                                                               \| [vips\_vipssave](VipsForeignSave.html#vips-vipssave "vips_vipssave ()") ()                                                    \|<br/>\| int                                                                               \| [vips\_vipssave\_target](VipsForeignSave.html#vips-vipssave-target "vips_vipssave_target ()") ()                              \|<br/>\| int                                                                               \| [vips\_openslideload](VipsForeignSave.html#vips-openslideload "vips_openslideload ()") ()                                     \|<br/>\| int                                                                               \| [vips\_openslideload\_source](VipsForeignSave.html#vips-openslideload-source "vips_openslideload_source ()") ()               \|<br/>\| int                                                                               \| [vips\_jpegload](VipsForeignSave.html#vips-jpegload "vips_jpegload ()") ()                                                    \|<br/>\| int                                                                               \| [vips\_jpegload\_buffer](VipsForeignSave.html#vips-jpegload-buffer "vips_jpegload_buffer ()") ()                              \|<br/>\| int                                                                               \| [vips\_jpegload\_source](VipsForeignSave.html#vips-jpegload-source "vips_jpegload_source ()") ()                              \|<br/>\| int                                                                               \| [vips\_jpegsave\_target](VipsForeignSave.html#vips-jpegsave-target "vips_jpegsave_target ()") ()                              \|<br/>\| int                                                                               \| [vips\_jpegsave](VipsForeignSave.html#vips-jpegsave "vips_jpegsave ()") ()                                                    \|<br/>\| int                                                                               \| [vips\_jpegsave\_buffer](VipsForeignSave.html#vips-jpegsave-buffer "vips_jpegsave_buffer ()") ()                              \|<br/>\| int                                                                               \| [vips\_jpegsave\_mime](VipsForeignSave.html#vips-jpegsave-mime "vips_jpegsave_mime ()") ()                                    \|<br/>\| int                                                                               \| [vips\_webpload\_source](VipsForeignSave.html#vips-webpload-source "vips_webpload_source ()") ()                              \|<br/>\| int                                                                               \| [vips\_webpload](VipsForeignSave.html#vips-webpload "vips_webpload ()") ()                                                    \|<br/>\| int                                                                               \| [vips\_webpload\_buffer](VipsForeignSave.html#vips-webpload-buffer "vips_webpload_buffer ()") ()                              \|<br/>\| int                                                                               \| [vips\_webpsave\_target](VipsForeignSave.html#vips-webpsave-target "vips_webpsave_target ()") ()                              \|<br/>\| int                                                                               \| [vips\_webpsave](VipsForeignSave.html#vips-webpsave "vips_webpsave ()") ()                                                    \|<br/>\| int                                                                               \| [vips\_webpsave\_buffer](VipsForeignSave.html#vips-webpsave-buffer "vips_webpsave_buffer ()") ()                              \|<br/>\| int                                                                               \| [vips\_webpsave\_mime](VipsForeignSave.html#vips-webpsave-mime "vips_webpsave_mime ()") ()                                    \|<br/>\| int                                                                               \| [vips\_tiffload](VipsForeignSave.html#vips-tiffload "vips_tiffload ()") ()                                                    \|<br/>\| int                                                                               \| [vips\_tiffload\_buffer](VipsForeignSave.html#vips-tiffload-buffer "vips_tiffload_buffer ()") ()                              \|<br/>\| int                                                                               \| [vips\_tiffload\_source](VipsForeignSave.html#vips-tiffload-source "vips_tiffload_source ()") ()                              \|<br/>\| int                                                                               \| [vips\_tiffsave](VipsForeignSave.html#vips-tiffsave "vips_tiffsave ()") ()                                                    \|<br/>\| int                                                                               \| [vips\_tiffsave\_buffer](VipsForeignSave.html#vips-tiffsave-buffer "vips_tiffsave_buffer ()") ()                              \|<br/>\| int                                                                               \| [vips\_tiffsave\_target](VipsForeignSave.html#vips-tiffsave-target "vips_tiffsave_target ()") ()                              \|<br/>\| int                                                                               \| [vips\_openexrload](VipsForeignSave.html#vips-openexrload "vips_openexrload ()") ()                                           \|<br/>\| int                                                                               \| [vips\_fitsload](VipsForeignSave.html#vips-fitsload "vips_fitsload ()") ()                                                    \|<br/>\| int                                                                               \| [vips\_fitssave](VipsForeignSave.html#vips-fitssave "vips_fitssave ()") ()                                                    \|<br/>\| int                                                                               \| [vips\_analyzeload](VipsForeignSave.html#vips-analyzeload "vips_analyzeload ()") ()                                           \|<br/>\| int                                                                               \| [vips\_rawload](VipsForeignSave.html#vips-rawload "vips_rawload ()") ()                                                       \|<br/>\| int                                                                               \| [vips\_rawsave](VipsForeignSave.html#vips-rawsave "vips_rawsave ()") ()                                                       \|<br/>\| int                                                                               \| [vips\_rawsave\_buffer](VipsForeignSave.html#vips-rawsave-buffer "vips_rawsave_buffer ()") ()                                 \|<br/>\| int                                                                               \| [vips\_rawsave\_target](VipsForeignSave.html#vips-rawsave-target "vips_rawsave_target ()") ()                                 \|<br/>\| int                                                                               \| [vips\_csvload](VipsForeignSave.html#vips-csvload "vips_csvload ()") ()                                                       \|<br/>\| int                                                                               \| [vips\_csvload\_source](VipsForeignSave.html#vips-csvload-source "vips_csvload_source ()") ()                                 \|<br/>\| int                                                                               \| [vips\_csvsave](VipsForeignSave.html#vips-csvsave "vips_csvsave ()") ()                                                       \|<br/>\| int                                                                               \| [vips\_csvsave\_target](VipsForeignSave.html#vips-csvsave-target "vips_csvsave_target ()") ()                                 \|<br/>\| int                                                                               \| [vips\_matrixload](VipsForeignSave.html#vips-matrixload "vips_matrixload ()") ()                                              \|<br/>\| int                                                                               \| [vips\_matrixload\_source](VipsForeignSave.html#vips-matrixload-source "vips_matrixload_source ()") ()                        \|<br/>\| int                                                                               \| [vips\_matrixsave](VipsForeignSave.html#vips-matrixsave "vips_matrixsave ()") ()                                              \|<br/>\| int                                                                               \| [vips\_matrixsave\_target](VipsForeignSave.html#vips-matrixsave-target "vips_matrixsave_target ()") ()                        \|<br/>\| int                                                                               \| [vips\_matrixprint](VipsForeignSave.html#vips-matrixprint "vips_matrixprint ()") ()                                           \|<br/>\| int                                                                               \| [vips\_magickload](VipsForeignSave.html#vips-magickload "vips_magickload ()") ()                                              \|<br/>\| int                                                                               \| [vips\_magickload\_buffer](VipsForeignSave.html#vips-magickload-buffer "vips_magickload_buffer ()") ()                        \|<br/>\| int                                                                               \| [vips\_magicksave](VipsForeignSave.html#vips-magicksave "vips_magicksave ()") ()                                              \|<br/>\| int                                                                               \| [vips\_magicksave\_buffer](VipsForeignSave.html#vips-magicksave-buffer "vips_magicksave_buffer ()") ()                        \|<br/>\| int                                                                               \| [vips\_pngload\_source](VipsForeignSave.html#vips-pngload-source "vips_pngload_source ()") ()                                 \|<br/>\| int                                                                               \| [vips\_pngload](VipsForeignSave.html#vips-pngload "vips_pngload ()") ()                                                       \|<br/>\| int                                                                               \| [vips\_pngload\_buffer](VipsForeignSave.html#vips-pngload-buffer "vips_pngload_buffer ()") ()                                 \|<br/>\| int                                                                               \| [vips\_pngsave\_target](VipsForeignSave.html#vips-pngsave-target "vips_pngsave_target ()") ()                                 \|<br/>\| int                                                                               \| [vips\_pngsave](VipsForeignSave.html#vips-pngsave "vips_pngsave ()") ()                                                       \|<br/>\| int                                                                               \| [vips\_pngsave\_buffer](VipsForeignSave.html#vips-pngsave-buffer "vips_pngsave_buffer ()") ()                                 \|<br/>\| int                                                                               \| [vips\_ppmload](VipsForeignSave.html#vips-ppmload "vips_ppmload ()") ()                                                       \|<br/>\| int                                                                               \| [vips\_ppmload\_source](VipsForeignSave.html#vips-ppmload-source "vips_ppmload_source ()") ()                                 \|<br/>\| int                                                                               \| [vips\_ppmsave](VipsForeignSave.html#vips-ppmsave "vips_ppmsave ()") ()                                                       \|<br/>\| int                                                                               \| [vips\_ppmsave\_target](VipsForeignSave.html#vips-ppmsave-target "vips_ppmsave_target ()") ()                                 \|<br/>\| int                                                                               \| [vips\_matload](VipsForeignSave.html#vips-matload "vips_matload ()") ()                                                       \|<br/>\| int                                                                               \| [vips\_radload\_source](VipsForeignSave.html#vips-radload-source "vips_radload_source ()") ()                                 \|<br/>\| int                                                                               \| [vips\_radload](VipsForeignSave.html#vips-radload "vips_radload ()") ()                                                       \|<br/>\| int                                                                               \| [vips\_radload\_buffer](VipsForeignSave.html#vips-radload-buffer "vips_radload_buffer ()") ()                                 \|<br/>\| int                                                                               \| [vips\_radsave](VipsForeignSave.html#vips-radsave "vips_radsave ()") ()                                                       \|<br/>\| int                                                                               \| [vips\_radsave\_buffer](VipsForeignSave.html#vips-radsave-buffer "vips_radsave_buffer ()") ()                                 \|<br/>\| int                                                                               \| [vips\_radsave\_target](VipsForeignSave.html#vips-radsave-target "vips_radsave_target ()") ()                                 \|<br/>\| int                                                                               \| [vips\_pdfload](VipsForeignSave.html#vips-pdfload "vips_pdfload ()") ()                                                       \|<br/>\| int                                                                               \| [vips\_pdfload\_buffer](VipsForeignSave.html#vips-pdfload-buffer "vips_pdfload_buffer ()") ()                                 \|<br/>\| int                                                                               \| [vips\_pdfload\_source](VipsForeignSave.html#vips-pdfload-source "vips_pdfload_source ()") ()                                 \|<br/>\| int                                                                               \| [vips\_svgload](VipsForeignSave.html#vips-svgload "vips_svgload ()") ()                                                       \|<br/>\| int                                                                               \| [vips\_svgload\_buffer](VipsForeignSave.html#vips-svgload-buffer "vips_svgload_buffer ()") ()                                 \|<br/>\| int                                                                               \| [vips\_svgload\_string](VipsForeignSave.html#vips-svgload-string "vips_svgload_string ()") ()                                 \|<br/>\| int                                                                               \| [vips\_svgload\_source](VipsForeignSave.html#vips-svgload-source "vips_svgload_source ()") ()                                 \|<br/>\| int                                                                               \| [vips\_gifload](VipsForeignSave.html#vips-gifload "vips_gifload ()") ()                                                       \|<br/>\| int                                                                               \| [vips\_gifload\_buffer](VipsForeignSave.html#vips-gifload-buffer "vips_gifload_buffer ()") ()                                 \|<br/>\| int                                                                               \| [vips\_gifload\_source](VipsForeignSave.html#vips-gifload-source "vips_gifload_source ()") ()                                 \|<br/>\| int                                                                               \| [vips\_gifsave](VipsForeignSave.html#vips-gifsave "vips_gifsave ()") ()                                                       \|<br/>\| int                                                                               \| [vips\_gifsave\_buffer](VipsForeignSave.html#vips-gifsave-buffer "vips_gifsave_buffer ()") ()                                 \|<br/>\| int                                                                               \| [vips\_gifsave\_target](VipsForeignSave.html#vips-gifsave-target "vips_gifsave_target ()") ()                                 \|<br/>\| int                                                                               \| [vips\_heifload](VipsForeignSave.html#vips-heifload "vips_heifload ()") ()                                                    \|<br/>\| int                                                                               \| [vips\_heifload\_buffer](VipsForeignSave.html#vips-heifload-buffer "vips_heifload_buffer ()") ()                              \|<br/>\| int                                                                               \| [vips\_heifload\_source](VipsForeignSave.html#vips-heifload-source "vips_heifload_source ()") ()                              \|<br/>\| int                                                                               \| [vips\_heifsave](VipsForeignSave.html#vips-heifsave "vips_heifsave ()") ()                                                    \|<br/>\| int                                                                               \| [vips\_heifsave\_buffer](VipsForeignSave.html#vips-heifsave-buffer "vips_heifsave_buffer ()") ()                              \|<br/>\| int                                                                               \| [vips\_heifsave\_target](VipsForeignSave.html#vips-heifsave-target "vips_heifsave_target ()") ()                              \|<br/>\| int                                                                               \| [vips\_niftiload](VipsForeignSave.html#vips-niftiload "vips_niftiload ()") ()                                                 \|<br/>\| int                                                                               \| [vips\_niftiload\_source](VipsForeignSave.html#vips-niftiload-source "vips_niftiload_source ()") ()                           \|<br/>\| int                                                                               \| [vips\_niftisave](VipsForeignSave.html#vips-niftisave "vips_niftisave ()") ()                                                 \|<br/>\| int                                                                               \| [vips\_jp2kload](VipsForeignSave.html#vips-jp2kload "vips_jp2kload ()") ()                                                    \|<br/>\| int                                                                               \| [vips\_jp2kload\_buffer](VipsForeignSave.html#vips-jp2kload-buffer "vips_jp2kload_buffer ()") ()                              \|<br/>\| int                                                                               \| [vips\_jp2kload\_source](VipsForeignSave.html#vips-jp2kload-source "vips_jp2kload_source ()") ()                              \|<br/>\| int                                                                               \| [vips\_jp2ksave](VipsForeignSave.html#vips-jp2ksave "vips_jp2ksave ()") ()                                                    \|<br/>\| int                                                                               \| [vips\_jp2ksave\_buffer](VipsForeignSave.html#vips-jp2ksave-buffer "vips_jp2ksave_buffer ()") ()                              \|<br/>\| int                                                                               \| [vips\_jp2ksave\_target](VipsForeignSave.html#vips-jp2ksave-target "vips_jp2ksave_target ()") ()                              \|<br/>\| int                                                                               \| [vips\_jxlload\_source](VipsForeignSave.html#vips-jxlload-source "vips_jxlload_source ()") ()                                 \|<br/>\| int                                                                               \| [vips\_jxlload\_buffer](VipsForeignSave.html#vips-jxlload-buffer "vips_jxlload_buffer ()") ()                                 \|<br/>\| int                                                                               \| [vips\_jxlload](VipsForeignSave.html#vips-jxlload "vips_jxlload ()") ()                                                       \|<br/>\| int                                                                               \| [vips\_jxlsave](VipsForeignSave.html#vips-jxlsave "vips_jxlsave ()") ()                                                       \|<br/>\| int                                                                               \| [vips\_jxlsave\_buffer](VipsForeignSave.html#vips-jxlsave-buffer "vips_jxlsave_buffer ()") ()                                 \|<br/>\| int                                                                               \| [vips\_jxlsave\_target](VipsForeignSave.html#vips-jxlsave-target "vips_jxlsave_target ()") ()                                 \|<br/>\| int                                                                               \| [vips\_dzsave](VipsForeignSave.html#vips-dzsave "vips_dzsave ()") ()                                                          \|<br/>\| int                                                                               \| [vips\_dzsave\_buffer](VipsForeignSave.html#vips-dzsave-buffer "vips_dzsave_buffer ()") ()                                    \|<br/>\| int                                                                               \| [vips\_dzsave\_target](VipsForeignSave.html#vips-dzsave-target "vips_dzsave_target ()") ()                                    \|<br/><br/>## Properties<br/><br/>\| [VipsAccess](VipsImage.html#VipsAccess "enum VipsAccess")                         \| [access](VipsForeignSave.html#VipsForeignLoad--access "The “access” property")                \| Read / Write \|<br/>\| --------------------------------------------------------------------------------- \| --------------------------------------------------------------------------------------------- \| ------------ \|<br/>\| gboolean                                                                          \| [disc](VipsForeignSave.html#VipsForeignLoad--disc "The “disc” property")                      \| Read / Write \|<br/>\| gboolean                                                                          \| [fail](VipsForeignSave.html#VipsForeignLoad--fail "The “fail” property")                      \| Read / Write \|<br/>\| [VipsFailOn](VipsForeignSave.html#VipsFailOn "enum VipsFailOn")                   \| [fail-on](VipsForeignSave.html#VipsForeignLoad--fail-on "The “fail-on” property")             \| Read / Write \|<br/>\| [VipsForeignFlags](VipsForeignSave.html#VipsForeignFlags "enum VipsForeignFlags") \| [flags](VipsForeignSave.html#VipsForeignLoad--flags "The “flags” property")                   \| Read / Write \|<br/>\| gboolean                                                                          \| [memory](VipsForeignSave.html#VipsForeignLoad--memory "The “memory” property")                \| Read / Write \|<br/>\| [VipsImage](VipsImage.html "VipsImage") \*                                        \| [out](VipsForeignSave.html#VipsForeignLoad--out "The “out” property")                         \| Read / Write \|<br/>\| gboolean                                                                          \| [revalidate](VipsForeignSave.html#VipsForeignLoad--revalidate "The “revalidate” property")    \| Read / Write \|<br/>\| gboolean                                                                          \| [sequential](VipsForeignSave.html#VipsForeignLoad--sequential "The “sequential” property")    \| Read / Write \|<br/>\| [VipsArrayDouble](libvips-type.html#VipsArrayDouble) \*                           \| [background](VipsForeignSave.html#VipsForeignSave--background "The “background” property")    \| Read / Write \|<br/>\| [VipsImage](VipsImage.html "VipsImage") \*                                        \| [in](VipsForeignSave.html#VipsForeignSave--in "The “in” property")                            \| Read / Write \|<br/>\| [VipsForeignKeep](VipsForeignSave.html#VipsForeignKeep "enum VipsForeignKeep")    \| [keep](VipsForeignSave.html#VipsForeignSave--keep "The “keep” property")                      \| Read / Write \|<br/>\| int                                                                               \| [page-height](VipsForeignSave.html#VipsForeignSave--page-height "The “page-height” property") \| Read / Write \|<br/>\| char \*                                                                           \| [profile](VipsForeignSave.html#VipsForeignSave--profile "The “profile” property")             \| Read / Write \|<br/>\| gboolean                                                                          \| [strip](VipsForeignSave.html#VipsForeignSave--strip "The “strip” property")                   \| Read / Write \|<br/><br/>## Types and Values<br/><br/>\| enum \| [VipsForeignFlags](VipsForeignSave.html#VipsForeignFlags "enum VipsForeignFlags")                               \|<br/>\| ---- \| --------------------------------------------------------------------------------------------------------------- \|<br/>\| enum \| [VipsFailOn](VipsForeignSave.html#VipsFailOn "enum VipsFailOn")                                                 \|<br/>\| enum \| [VipsSaveable](VipsForeignSave.html#VipsSaveable "enum VipsSaveable")                                           \|<br/>\| enum \| [VipsForeignKeep](VipsForeignSave.html#VipsForeignKeep "enum VipsForeignKeep")                                  \|<br/>\| enum \| [VipsForeignSubsample](VipsForeignSave.html#VipsForeignSubsample "enum VipsForeignSubsample")                   \|<br/>\| enum \| [VipsForeignWebpPreset](VipsForeignSave.html#VipsForeignWebpPreset "enum VipsForeignWebpPreset")                \|<br/>\| enum \| [VipsForeignTiffCompression](VipsForeignSave.html#VipsForeignTiffCompression "enum VipsForeignTiffCompression") \|<br/>\| enum \| [VipsForeignTiffPredictor](VipsForeignSave.html#VipsForeignTiffPredictor "enum VipsForeignTiffPredictor")       \|<br/>\| enum \| [VipsForeignTiffResunit](VipsForeignSave.html#VipsForeignTiffResunit "enum VipsForeignTiffResunit")             \|<br/>\| enum \| [VipsForeignPngFilter](VipsForeignSave.html#VipsForeignPngFilter "enum VipsForeignPngFilter")                   \|<br/>\| enum \| [VipsForeignPpmFormat](VipsForeignSave.html#VipsForeignPpmFormat "enum VipsForeignPpmFormat")                   \|<br/>\| enum \| [VipsForeignDzLayout](VipsForeignSave.html#VipsForeignDzLayout "enum VipsForeignDzLayout")                      \|<br/>\| enum \| [VipsForeignDzDepth](VipsForeignSave.html#VipsForeignDzDepth "enum VipsForeignDzDepth")                         \|<br/>\| enum \| [VipsForeignDzContainer](VipsForeignSave.html#VipsForeignDzContainer "enum VipsForeignDzContainer")             \|<br/>\| enum \| [VipsForeignHeifCompression](VipsForeignSave.html#VipsForeignHeifCompression "enum VipsForeignHeifCompression") \|<br/>\| enum \| [VipsForeignHeifEncoder](VipsForeignSave.html#VipsForeignHeifEncoder "enum VipsForeignHeifEncoder")             \|<br/><br/>## Object Hierarchy<br/><br/>    GEnum<br/>    ├── VipsFailOn<br/>    ├── VipsForeignDzContainer<br/>    ├── VipsForeignDzDepth<br/>    ├── VipsForeignDzLayout<br/>    ├── VipsForeignHeifCompression<br/>    ├── VipsForeignHeifEncoder<br/>    ├── VipsForeignPpmFormat<br/>    ├── VipsForeignSubsample<br/>    ├── VipsForeignTiffCompression<br/>    ├── VipsForeignTiffPredictor<br/>    ├── VipsForeignTiffResunit<br/>    ├── VipsForeignWebpPreset<br/>    ╰── VipsSaveable<br/>    GFlags<br/>    ├── VipsForeignFlags<br/>    ├── VipsForeignKeep<br/>    ╰── VipsForeignPngFilter<br/>    GObject<br/>    ╰── VipsObject<br/>        ╰── VipsOperation<br/>            ╰── VipsForeign<br/>                ├── VipsForeignLoad<br/>                ╰── VipsForeignSave<br/><br/>## Includes<br/><br/>#include <vips/vips.h><br/><br/>## Description<br/><br/>This set of operations load and save images in a variety of formats.<br/><br/>### Load and save<br/><br/>You can load and save from and to files, memory areas, and the libvips IO abstractions, VipsSource and VipsTarget.<br/><br/>Use vips\_foreign\_find\_load(), vips\_foreign\_find\_load\_buffer() andvips\_foreign\_find\_load\_source() to find a loader for an object. Usevips\_foreign\_find\_save(), vips\_foreign\_find\_save\_buffer() andvips\_foreign\_find\_save\_target() to find a saver for a format. You can then run these operations using vips\_call() and friends to perform the load or save.<br/><br/>vips\_image\_write\_to\_file() and vips\_image\_new\_from\_file() and friends use these functions to automate file load and save.<br/><br/>You can also invoke the operations directly, for example:<br/><br/>\| 1 2 3 \| vips\_tiffsave(my\_image, "frank.anything",     "compression", VIPS\_FOREIGN\_TIFF\_COMPRESSION\_JPEG,     NULL); \|<br/>\| ----- \| ----------------------------------------------------------------------------------------------------------------- \|<br/><br/>---<br/><br/>### Image metadata<br/><br/>All loaders attach all image metadata as libvips properties on load.<br/><br/>You can change metadata with vips\_image\_set\_int() and friends.<br/><br/>During save, you can use _`keep`_ to specify which metadata to retain, defaults to all, see VipsForeignKeep. Setting _`profile`_ will automatically keep the ICC profile.<br/><br/>---<br/><br/>### Many page images<br/><br/>By default, libvips will only load the first page of many page or animated images. Use _`page`_ and _`n`_ to set the start page and the number of pages to load. Set _`n`_ to -1 to load all pages.<br/><br/>Many page images are loaded as a tall, thin strip of pages.<br/><br/>Use vips\_image\_get\_page\_height() and vips\_image\_get\_n\_pages() to find the page height and number of pages of a loaded image.<br/><br/>Use _`pageheight`_ to set the page height for image save.<br/><br/>---<br/><br/>### Alpha save<br/><br/>Not all image formats support alpha. If you try to save an image with an alpha channel to a format that does not support it, the alpha will be automatically flattened out. Use _`background`_ (default 0) to set the colour that alpha should be flattened against.<br/><br/>---<br/><br/>### Adding new formats<br/><br/>To add support for a new file format to vips, simply define a new subclass of VipsForeignLoad or VipsForeignSave.<br/><br/>If you define a new operation which is a subclass of VipsForeign, support for it automatically appears in all VIPS user-interfaces. It will also be transparently supported by vips\_image\_new\_from\_file() and friends.<br/><br/>#### Writing a new loader<br/><br/>Add a new loader to VIPS by subclassing VipsForeignLoad. Subclasses need to implement at least _`` `header()` ``_.<br/><br/>_`` `header()` ``_ must set at least the header fields of _`out`_. _`` `load()` ``_, if defined, must load the pixels to _`real`_.<br/><br/>The suffix list is used to select a format to save a file in, and to pick a loader if you don't define `is_a()`.<br/><br/>You should also define _`nickname`_ and _`description`_ in VipsObject.<br/><br/>As a complete example, here's code for a PNG loader, minus the actual calls to libpng.<br/><br/>\| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 \| typedef struct \_VipsForeignLoadPng \{     VipsForeignLoad parent\_object;     char \*filename; \} VipsForeignLoadPng; typedef VipsForeignLoadClass VipsForeignLoadPngClass; G\_DEFINE\_TYPE(VipsForeignLoadPng, vips\_foreign\_load\_png,     VIPS\_TYPE\_FOREIGN\_LOAD); static VipsForeignFlags vips\_foreign\_load\_png\_get\_flags\_filename(const char \*filename) \{     VipsForeignFlags flags;     flags \= 0;     if (vips\_\_png\_isinterlaced(filename))          flags \= VIPS\_FOREIGN\_PARTIAL;     else          flags \= VIPS\_FOREIGN\_SEQUENTIAL;     return flags; \} static VipsForeignFlags vips\_foreign\_load\_png\_get\_flags(VipsForeignLoad \*load) \{   VipsForeignLoadPng \*png \= (VipsForeignLoadPng \*) load;   return vips\_foreign\_load\_png\_get\_flags\_filename(png\->filename); \} static int vips\_foreign\_load\_png\_header(VipsForeignLoad \*load) \{     VipsForeignLoadPng \*png \= (VipsForeignLoadPng \*) load;     if (vips\_\_png\_header(png\->filename, load\->out))         return \-1;     return 0; \} static int vips\_foreign\_load\_png\_load(VipsForeignLoad \*load) \{     VipsForeignLoadPng \*png \= (VipsForeignLoadPng \*) load;     if (vips\_\_png\_read(png\->filename, load\->real))         return \-1;     return 0; \} static void vips\_foreign\_load\_png\_class\_init(VipsForeignLoadPngClass \*class) \{     GObjectClass \*gobject\_class \= G\_OBJECT\_CLASS(class);     VipsObjectClass \*object\_class \= (VipsObjectClass \*) class;     VipsForeignClass \*foreign\_class \= (VipsForeignClass \*) class;     VipsForeignLoadClass \*load\_class \= (VipsForeignLoadClass \*) class;     gobject\_class\->set\_property \= vips\_object\_set\_property;     gobject\_class\->get\_property \= vips\_object\_get\_property;     object\_class\->nickname \= "pngload";     object\_class\->description \= \_("load png from file");     foreign\_class\->suffs \= vips\_\_png\_suffs;     load\_class\->is\_a \= vips\_\_png\_ispng;     load\_class\->get\_flags\_filename \=         vips\_foreign\_load\_png\_get\_flags\_filename;     load\_class\->get\_flags \= vips\_foreign\_load\_png\_get\_flags;     load\_class\->header \= vips\_foreign\_load\_png\_header;     load\_class\->load \= vips\_foreign\_load\_png\_load;     VIPS\_ARG\_STRING(class, "filename", 1,         \_("Filename"),         \_("Filename to load from"),         VIPS\_ARGUMENT\_REQUIRED\_INPUT,         G\_STRUCT\_OFFSET(VipsForeignLoadPng, filename),         NULL); \} static void vips\_foreign\_load\_png\_init(VipsForeignLoadPng \*png) \{ \} \|<br/>\| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \|<br/><br/>#### Writing a new saver<br/><br/>Call your saver in the class' _`` `build()` ``_ method after chaining up. The prepared image should be ready for you to save in _`ready`_.<br/><br/>As a complete example, here's the code for the CSV saver, minus the calls to the actual save routines.<br/><br/>\| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 \| typedef struct \_VipsForeignSaveCsv \{     VipsForeignSave parent\_object;     char \*filename;     const char \*separator; \} VipsForeignSaveCsv; typedef VipsForeignSaveClass VipsForeignSaveCsvClass; G\_DEFINE\_TYPE(VipsForeignSaveCsv, vips\_foreign\_save\_csv,   VIPS\_TYPE\_FOREIGN\_SAVE); static int vips\_foreign\_save\_csv\_build(VipsObject \*object) \{     VipsForeignSave \*save \= (VipsForeignSave \*) object;     VipsForeignSaveCsv \*csv \= (VipsForeignSaveCsv \*) object;     if (VIPS\_OBJECT\_CLASS(vips\_foreign\_save\_csv\_parent\_class)             \->build(object))         return \-1;     if (vips\_\_csv\_write(save\->ready, csv\->filename, csv\->separator))         return \-1;     return 0; \} static void vips\_foreign\_save\_csv\_class\_init(VipsForeignSaveCsvClass \*class) \{     GObjectClass \*gobject\_class \= G\_OBJECT\_CLASS(class);     VipsObjectClass \*object\_class \= (VipsObjectClass \*) class;     VipsForeignClass \*foreign\_class \= (VipsForeignClass \*) class;     VipsForeignSaveClass \*save\_class \= (VipsForeignSaveClass \*) class;     gobject\_class\->set\_property \= vips\_object\_set\_property;     gobject\_class\->get\_property \= vips\_object\_get\_property;     object\_class\->nickname \= "csvsave";     object\_class\->description \= \_("save image to csv file");     object\_class\->build \= vips\_foreign\_save\_csv\_build;     foreign\_class\->suffs \= vips\_\_foreign\_csv\_suffs;     save\_class\->saveable \= VIPS\_SAVEABLE\_MONO;     // no need to define ->format\_table, we don't want the input     // cast for us     VIPS\_ARG\_STRING(class, "filename", 1,         \_("Filename"),         \_("Filename to save to"),         VIPS\_ARGUMENT\_REQUIRED\_INPUT,         G\_STRUCT\_OFFSET(VipsForeignSaveCsv, filename),         NULL);     VIPS\_ARG\_STRING(class, "separator", 13,         \_("Separator"),         \_("Separator characters"),         VIPS\_ARGUMENT\_OPTIONAL\_INPUT,         G\_STRUCT\_OFFSET(VipsForeignSaveCsv, separator),         "\\t"); \} static void vips\_foreign\_save\_csv\_init(VipsForeignSaveCsv \*csv) \{     csv\->separator \= g\_strdup("\\t"); \} \|<br/>\| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \|<br/><br/>## Functions<br/><br/>### vips\_foreign\_map ()<br/><br/>void *<br/>vips_foreign_map (_`const char *base`_,<br/>                  _`VipsSListMap2Fn fn`_,<br/>                  _`void *a`_,<br/>                  _`void *b`_);<br/><br/>Apply a function to every VipsForeignClass that VIPS knows about. Foreigns are presented to the function in priority order.<br/><br/>Like all VIPS map functions, if _`fn`_ returns `NULL`, iteration continues. If it returns non-`NULL`, iteration terminates and that value is returned. The map function returns `NULL` if all calls return `NULL`.<br/><br/>See also: `vips_slist_map()`.<br/><br/>#### Parameters<br/><br/>\| base \| base class to search below (eg. "VipsForeignLoad") \|                \|<br/>\| ---- \| -------------------------------------------------- \| -------------- \|<br/>\| fn   \| function to apply to each VipsForeignClass.        \| \[scope call\] \|<br/>\| a    \| user data                                          \|                \|<br/>\| b    \| user data                                          \|                \|<br/><br/>#### Returns<br/><br/>the result of iteration. <br/><br/>\[transfer none\]<br/><br/>---<br/><br/>### vips\_foreign\_find\_load ()<br/><br/>const char *<br/>vips_foreign_find_load (_`const char *filename`_);<br/><br/>Searches for an operation you could use to load _`filename`_. Any trailing options on _`filename`_ are stripped and ignored.<br/><br/>See also: vips\_foreign\_find\_load\_buffer(), vips\_image\_new\_from\_file().<br/><br/>#### Parameters<br/><br/>\| filename \| file to find a loader for \|  \|<br/>\| -------- \| ------------------------- \|  \|<br/><br/>#### Returns<br/><br/> the name of an operation on success, `NULL` on error<br/><br/>---<br/><br/>### vips\_foreign\_find\_load\_buffer ()<br/><br/>const char *<br/>vips_foreign_find_load_buffer (_`const void *data`_,<br/>                               _`sizet size`_);<br/><br/>Searches for an operation you could use to load a memory buffer. To see the range of buffer loaders supported by your vips, try something like:<br/><br/> vips -l \| grep load\_buffer<br/><br/>See also: vips\_image\_new\_from\_buffer().<br/><br/>#### Parameters<br/><br/>\| data \| start of memory buffer.    \| \[array length=size\]\[element-type guint8\]\[transfer none\] \|<br/>\| ---- \| -------------------------- \| ------------------------------------------------------------- \|<br/>\| size \| number of bytes in _data_. \| \[type gsize\]                                                \|<br/><br/>#### Returns<br/><br/>the name of an operation on success, `NULL` on error. <br/><br/>\[transfer none\]<br/><br/>---<br/><br/>### vips\_foreign\_find\_load\_source ()<br/><br/>const char *<br/>vips_foreign_find_load_source (_`VipsSource *source`_);<br/><br/>Searches for an operation you could use to load a source. To see the range of source loaders supported by your vips, try something like:<br/><br/> vips -l \| grep load\_source<br/><br/>See also: vips\_image\_new\_from\_source().<br/><br/>#### Parameters<br/><br/>\| source \| source to load from \|  \|<br/>\| ------ \| ------------------- \|  \|<br/><br/>#### Returns<br/><br/>the name of an operation on success, `NULL` on error. <br/><br/>\[transfer none\]<br/><br/>---<br/><br/>### vips\_foreign\_flags ()<br/><br/>VipsForeignFlags<br/>vips_foreign_flags (_`const char *loader`_,<br/>                    _`const char *filename`_);<br/><br/>Return the flags for _`filename`_ using _`loader`_._`loader`_ is something like "tiffload" or "VipsForeignLoadTiff".<br/><br/>#### Parameters<br/><br/>\| loader   \| name of loader to use for test \|  \|<br/>\| -------- \| ------------------------------ \|  \|<br/>\| filename \| file to test                   \|  \|<br/><br/>#### Returns<br/><br/> the flags for _`filename`_.<br/><br/>---<br/><br/>### vips\_foreign\_is\_a ()<br/><br/>gboolean<br/>vips_foreign_is_a (_`const char *loader`_,<br/>                   _`const char *filename`_);<br/><br/>Return `TRUE` if _`filename`_ can be loaded by _`loader`_. _`loader`_ is something like "tiffload" or "VipsForeignLoadTiff".<br/><br/>#### Parameters<br/><br/>\| loader   \| name of loader to use for test \|  \|<br/>\| -------- \| ------------------------------ \|  \|<br/>\| filename \| file to test                   \|  \|<br/><br/>#### Returns<br/><br/>`TRUE` if _`filename`_can be loaded by _`loader`_.<br/><br/>---<br/><br/>### vips\_foreign\_is\_a\_buffer ()<br/><br/>gboolean<br/>vips_foreign_is_a_buffer (_`const char *loader`_,<br/>                          _`const void *data`_,<br/>                          _`sizet size`_);<br/><br/>Return `TRUE` if _`data`_ can be loaded by _`loader`_. _`loader`_ is something like "tiffload\_buffer" or "VipsForeignLoadTiffBuffer".<br/><br/>#### Parameters<br/><br/>\| loader \| name of loader to use for test \|                                              \|<br/>\| ------ \| ------------------------------ \| -------------------------------------------- \|<br/>\| data   \| pointer to the buffer to test. \| \[array length=size\]\[element-type guint8\] \|<br/>\| size   \| size of the buffer to test.    \| \[type gsize\]                               \|<br/><br/>#### Returns<br/><br/>`TRUE` if _`data`_can be loaded by _`loader`_.<br/><br/>---<br/><br/>### vips\_foreign\_is\_a\_source ()<br/><br/>gboolean<br/>vips_foreign_is_a_source (_`const char *loader`_,<br/>                          _`VipsSource *source`_);<br/><br/>Return `TRUE` if _`source`_ can be loaded by _`loader`_. _`loader`_ is something like "tiffload\_source" or "VipsForeignLoadTiffSource".<br/><br/>#### Parameters<br/><br/>\| loader \| name of loader to use for test \|  \|<br/>\| ------ \| ------------------------------ \|  \|<br/>\| source \| source to test                 \|  \|<br/><br/>#### Returns<br/><br/>`TRUE` if _`data`_can be loaded by _`source`_.<br/><br/>---<br/><br/>### vips\_foreign\_load\_invalidate ()<br/><br/>void<br/>vips_foreign_load_invalidate (_`VipsImage *image`_);<br/><br/>Loaders can call this on the image they are making if they see a read error from the load library. It signals "invalidate" on the load operation and will cause it to be dropped from cache.<br/><br/>If we know a file will cause a read error, we don't want to cache the failing operation, we want to make sure the image will really be opened again if our caller tries again. For example, a broken file might be replaced by a working one.<br/><br/>\[method\]<br/><br/>#### Parameters<br/><br/>\| image \| image to invalidate \|  \|<br/>\| ----- \| ------------------- \|  \|<br/><br/>---<br/><br/>### vips\_foreign\_find\_save ()<br/><br/>const char *<br/>vips_foreign_find_save (_`const char *filename`_);<br/><br/>Searches for an operation you could use to write to _`filename`_. Any trailing options on _`filename`_ are stripped and ignored.<br/><br/>See also: vips\_foreign\_find\_save\_buffer(), vips\_image\_write\_to\_file().<br/><br/>#### Parameters<br/><br/>\| filename \| name to find a saver for \|  \|<br/>\| -------- \| ------------------------ \|  \|<br/><br/>#### Returns<br/><br/>the name of an operation on success, `NULL` on error. <br/><br/>\[nullable\]<br/><br/>---<br/><br/>### vips\_foreign\_get\_suffixes ()<br/><br/>gchar **<br/>vips_foreign_get_suffixes (_`void`_);<br/><br/>Get a `NULL`\-terminated array listing all the supported suffixes.<br/><br/>This is not the same as all the supported file types, since libvips detects image format for load by testing the first few bytes.<br/><br/>Use vips\_foreign\_find\_load() to detect type for a specific file.<br/><br/>Free the return result with `g_strfreev()`.<br/><br/>#### Returns<br/><br/>all supported file extensions, as a`NULL`\-terminated array. <br/><br/>\[transfer full\]\[array\]<br/><br/>---<br/><br/>### vips\_foreign\_find\_save\_buffer ()<br/><br/>const char *<br/>vips_foreign_find_save_buffer (_`const char *suffix`_);<br/><br/>Searches for an operation you could use to write to a buffer in _`suffix`_format.<br/><br/>See also: vips\_image\_write\_to\_buffer().<br/><br/>#### Parameters<br/><br/>\| suffix \| name to find a saver for \|  \|<br/>\| ------ \| ------------------------ \|  \|<br/><br/>#### Returns<br/><br/>the name of an operation on success, `NULL` on error. <br/><br/>\[nullable\]<br/><br/>---<br/><br/>### vips\_foreign\_find\_save\_target ()<br/><br/>const char *<br/>vips_foreign_find_save_target (_`const char *suffix`_);<br/><br/>Searches for an operation you could use to write to a target in _`suffix`_format.<br/><br/>See also: vips\_image\_write\_to\_buffer().<br/><br/>#### Parameters<br/><br/>\| suffix \| format to find a saver for \|  \|<br/>\| ------ \| -------------------------- \|  \|<br/><br/>#### Returns<br/><br/>the name of an operation on success, `NULL` on error. <br/><br/>\[nullable\]<br/><br/>---<br/><br/>### vips\_vipsload ()<br/><br/>int<br/>vips_vipsload (_`const char *filename`_,<br/>               _`VipsImage **out`_,<br/>               _`...`_);<br/><br/>Read in a vips image.<br/><br/>See also: vips\_vipssave().<br/><br/>#### Parameters<br/><br/>\| filename \| file to load                                      \|         \|<br/>\| -------- \| ------------------------------------------------- \| ------- \|<br/>\| out      \| decompressed image.                               \| \[out\] \|<br/>\| ...      \| NULL\-terminated list of optional named arguments \|         \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_vipsload\_source ()<br/><br/>int<br/>vips_vipsload_source (_`VipsSource *source`_,<br/>                      _`VipsImage **out`_,<br/>                      _`...`_);<br/><br/>Exactly as vips\_vipsload(), but read from a source.<br/><br/>#### Parameters<br/><br/>\| source \| source to load from                               \|         \|<br/>\| ------ \| ------------------------------------------------- \| ------- \|<br/>\| out    \| decompressed image.                               \| \[out\] \|<br/>\| ...    \| NULL\-terminated list of optional named arguments \|         \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_vipssave ()<br/><br/>int<br/>vips_vipssave (_`VipsImage *in`_,<br/>               _`const char *filename`_,<br/>               _`...`_);<br/><br/>Write _`in`_ to _`filename`_ in VIPS format.<br/><br/>See also: vips\_vipsload().<br/><br/>\[method\]<br/><br/>#### Parameters<br/><br/>\| in       \| image to save                                     \|  \|<br/>\| -------- \| ------------------------------------------------- \|  \|<br/>\| filename \| file to write to                                  \|  \|<br/>\| ...      \| NULL\-terminated list of optional named arguments \|  \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_vipssave\_target ()<br/><br/>int<br/>vips_vipssave_target (_`VipsImage *in`_,<br/>                      _`VipsTarget *target`_,<br/>                      _`...`_);<br/><br/>As vips\_vipssave(), but save to a target.<br/><br/>\[method\]<br/><br/>#### Parameters<br/><br/>\| in     \| image to save                                     \|  \|<br/>\| ------ \| ------------------------------------------------- \|  \|<br/>\| target \| save image to this target                         \|  \|<br/>\| ...    \| NULL\-terminated list of optional named arguments \|  \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_openslideload ()<br/><br/>int<br/>vips_openslideload (_`const char *filename`_,<br/>                    _`VipsImage **out`_,<br/>                    _`...`_);<br/><br/>Optional arguments:<br/><br/>* _`level`_: `gint`, load this level<br/>* _`associated`_: `gchararray`, load this associated image<br/>* _`attachassociated`_: `gboolean`, attach all associated images as metadata<br/>* _`autocrop`_: `gboolean`, crop to image bounds<br/>* _`rgb`_: `gboolean`, output RGB (not RGBA) pixels<br/><br/>Read a virtual slide supported by the OpenSlide library into a VIPS image. OpenSlide supports images in Aperio, Hamamatsu, MIRAX, Sakura, Trestle, and Ventana formats.<br/><br/>To facilitate zooming, virtual slide formats include multiple scaled-down versions of the high-resolution image. These are typically called "levels". By default, vips\_openslideload() reads the highest-resolution level (level 0). Set _`level`_ to the level number you want.<br/><br/>In addition to the slide image itself, virtual slide formats sometimes include additional images, such as a scan of the slide's barcode. OpenSlide calls these "associated images". To read an associated image, set _`associated`_ to the image's name. A slide's associated images are listed in the "slide-associated-images" metadata item.<br/><br/>If you set _`attachassociated`_, then all associated images are attached as metadata items. Use vips\_image\_get\_image() on _`out`_ to retrieve them. Images are attached as "openslide-associated-XXXXX", where XXXXX is the name of the associated image.<br/><br/>By default, the output of this operator is RGBA. Set _`rgb`_ to enable RGB output.<br/><br/>See also: vips\_image\_new\_from\_file().<br/><br/>#### Parameters<br/><br/>\| filename \| file to load                                      \|         \|<br/>\| -------- \| ------------------------------------------------- \| ------- \|<br/>\| out      \| decompressed image.                               \| \[out\] \|<br/>\| ...      \| NULL\-terminated list of optional named arguments \|         \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_openslideload\_source ()<br/><br/>int<br/>vips_openslideload_source (_`VipsSource *source`_,<br/>                           _`VipsImage **out`_,<br/>                           _`...`_);<br/><br/>Optional arguments:<br/><br/>* _`level`_: `gint`, load this level<br/>* _`associated`_: `gchararray`, load this associated image<br/>* _`attachassociated`_: `gboolean`, attach all associated images as metadata<br/>* _`autocrop`_: `gboolean`, crop to image bounds<br/>* _`rgb`_: `gboolean`, output RGB (not RGBA) pixels<br/><br/>Exactly as vips\_openslideload(), but read from a source.<br/><br/>#### Parameters<br/><br/>\| source \| source to load from                               \|         \|<br/>\| ------ \| ------------------------------------------------- \| ------- \|<br/>\| out    \| decompressed image.                               \| \[out\] \|<br/>\| ...    \| NULL\-terminated list of optional named arguments \|         \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_jpegload ()<br/><br/>int<br/>vips_jpegload (_`const char *filename`_,<br/>               _`VipsImage **out`_,<br/>               _`...`_);<br/><br/>Optional arguments:<br/><br/>* _`shrink`_: `gint`, shrink by this much on load<br/>* _`failon`_: VipsFailOn, types of read error to fail on<br/>* _`autorotate`_: `gboolean`, rotate image upright during load<br/><br/>Read a JPEG file into a VIPS image. It can read most 8-bit JPEG images, including CMYK and YCbCr.<br/><br/>_`shrink`_ means shrink by this integer factor during load. Possible values are 1, 2, 4 and 8\. Shrinking during read is very much faster than decompressing the whole image and then shrinking later.<br/><br/>Use _`failon`_ to set the type of error that will cause load to fail. By default, loaders are permissive, that is, VIPS\_FAIL\_ON\_NONE.<br/><br/>Setting _`autorotate`_ to `TRUE` will make the loader interpret the orientation tag and automatically rotate the image appropriately during load.<br/><br/>If _`autorotate`_ is `FALSE`, the metadata field VIPS\_META\_ORIENTATION is set to the value of the orientation tag. Applications may read and interpret this field as they wish later in processing. See vips\_autorot(). Save operations will use VIPS\_META\_ORIENTATION, if present, to set the orientation of output images.<br/><br/>Example:<br/><br/>\| 1 2 3 4 \| vips\_jpegload("fred.jpg", &out,     "shrink", 8,     "fail\_on", VIPS\_FAIL\_ON\_TRUNCATED,     NULL); \|<br/>\| ------- \| ------------------------------------------------------------------------------------------------------- \|<br/><br/>Any embedded ICC profiles are ignored: you always just get the RGB from the file. Instead, the embedded profile will be attached to the image asVIPS\_META\_ICC\_NAME. You need to use something likevips\_icc\_import() to get CIE values from the file.<br/><br/>EXIF metadata is attached as VIPS\_META\_EXIF\_NAME, IPTC asVIPS\_META\_IPTC\_NAME, and XMP as VIPS\_META\_XMP\_NAME.<br/><br/>The int metadata item "jpeg-multiscan" is set to the result of`jpeg_has_multiple_scans()`. Interlaced jpeg images need a large amount of memory to load, so this field gives callers a chance to handle these images differently.<br/><br/>The string-valued field "jpeg-chroma-subsample" gives the chroma subsample in standard notation. 4:4:4 means no subsample, 4:2:0 means YCbCr with Cb and Cr subsampled horizontally and vertically, 4:4:4:4 means a CMYK image with no subsampling.<br/><br/>The EXIF thumbnail, if present, is attached to the image as "jpeg-thumbnail-data". See vips\_image\_get\_blob().<br/><br/>See also: vips\_jpegload\_buffer(), vips\_image\_new\_from\_file(), vips\_autorot().<br/><br/>#### Parameters<br/><br/>\| filename \| file to load                                      \|         \|<br/>\| -------- \| ------------------------------------------------- \| ------- \|<br/>\| out      \| decompressed image.                               \| \[out\] \|<br/>\| ...      \| NULL\-terminated list of optional named arguments \|         \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_jpegload\_buffer ()<br/><br/>int<br/>vips_jpegload_buffer (_`void *buf`_,<br/>                      _`sizet len`_,<br/>                      _`VipsImage **out`_,<br/>                      _`...`_);<br/><br/>Optional arguments:<br/><br/>* _`shrink`_: `gint`, shrink by this much on load<br/>* _`failon`_: VipsFailOn, types of read error to fail on<br/>* _`autorotate`_: `gboolean`, use exif Orientation tag to rotate the image during load<br/><br/>Read a JPEG-formatted memory block into a VIPS image. Exactly asvips\_jpegload(), but read from a memory buffer.<br/><br/>You must not free the buffer while _`out`_ is active. The“postclose” signal on _`out`_ is a good place to free.<br/><br/>See also: vips\_jpegload().<br/><br/>#### Parameters<br/><br/>\| buf \| memory area to load.                              \| \[array length=len\]\[element-type guint8\] \|<br/>\| --- \| ------------------------------------------------- \| ------------------------------------------- \|<br/>\| len \| size of memory area.                              \| \[type gsize\]                              \|<br/>\| out \| image to write.                                   \| \[out\]                                     \|<br/>\| ... \| NULL\-terminated list of optional named arguments \|                                             \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_jpegload\_source ()<br/><br/>int<br/>vips_jpegload_source (_`VipsSource *source`_,<br/>                      _`VipsImage **out`_,<br/>                      _`...`_);<br/><br/>Optional arguments:<br/><br/>* _`shrink`_: `gint`, shrink by this much on load<br/>* _`failon`_: VipsFailOn, types of read error to fail on<br/>* _`autorotate`_: `gboolean`, use exif Orientation tag to rotate the image during load<br/><br/>Read a JPEG-formatted memory block into a VIPS image. Exactly asvips\_jpegload(), but read from a source.<br/><br/>See also: vips\_jpegload().<br/><br/>#### Parameters<br/><br/>\| source \| source to load                                    \|         \|<br/>\| ------ \| ------------------------------------------------- \| ------- \|<br/>\| out    \| image to write.                                   \| \[out\] \|<br/>\| ...    \| NULL\-terminated list of optional named arguments \|         \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_jpegsave\_target ()<br/><br/>int<br/>vips_jpegsave_target (_`VipsImage *in`_,<br/>                      _`VipsTarget *target`_,<br/>                      _`...`_);<br/><br/>Optional arguments:<br/><br/>* _`Q`_: `gint`, quality factor<br/>* _`optimizecoding`_: `gboolean`, compute optimal Huffman coding tables<br/>* _`interlace`_: `gboolean`, write an interlaced (progressive) jpeg<br/>* _`subsamplemode`_: VipsForeignSubsample, chroma subsampling mode<br/>* _`trellisquant`_: `gboolean`, apply trellis quantisation to each 8x8 block<br/>* _`overshootderinging`_: `gboolean`, overshoot samples with extreme values<br/>* _`optimizescans`_: `gboolean`, split DCT coefficients into separate scans<br/>* _`quanttable`_: `gint`, quantization table index<br/>* _`restartinterval`_: `gint`, restart interval in mcu<br/><br/>As vips\_jpegsave(), but save to a target.<br/><br/>See also: vips\_jpegsave(), vips\_image\_write\_to\_target().<br/><br/>\[method\]<br/><br/>#### Parameters<br/><br/>\| in     \| image to save                                     \|  \|<br/>\| ------ \| ------------------------------------------------- \|  \|<br/>\| target \| save image to this target                         \|  \|<br/>\| ...    \| NULL\-terminated list of optional named arguments \|  \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_jpegsave ()<br/><br/>int<br/>vips_jpegsave (_`VipsImage *in`_,<br/>               _`const char *filename`_,<br/>               _`...`_);<br/><br/>Optional arguments:<br/><br/>* _`Q`_: `gint`, quality factor<br/>* _`optimizecoding`_: `gboolean`, compute optimal Huffman coding tables<br/>* _`interlace`_: `gboolean`, write an interlaced (progressive) jpeg<br/>* _`subsamplemode`_: VipsForeignSubsample, chroma subsampling mode<br/>* _`trellisquant`_: `gboolean`, apply trellis quantisation to each 8x8 block<br/>* _`overshootderinging`_: `gboolean`, overshoot samples with extreme values<br/>* _`optimizescans`_: `gboolean`, split DCT coefficients into separate scans<br/>* _`quanttable`_: `gint`, quantization table index<br/>* _`restartinterval`_: `gint`, restart interval in mcu<br/><br/>Write a VIPS image to a file as JPEG.<br/><br/>Use _`Q`_ to set the JPEG compression factor. Default 75.<br/><br/>If _`optimizecoding`_ is set, the Huffman tables are optimized. This is slightly slower and produces slightly smaller files.<br/><br/>If _`interlace`_ is set, the jpeg files will be interlaced (progressive jpeg, in jpg parlance). These files may be better for display over a slow network connection, but need much more memory to encode and decode.<br/><br/>Chroma subsampling is normally automatically disabled for Q >= 90\. You can force the subsampling mode with _`subsamplemode`_.<br/><br/>If _`trellisquant`_ is set and the version of libjpeg supports it (e.g. mozjpeg >= 3.0), apply trellis quantisation to each 8x8 block. Reduces file size but increases compression time.<br/><br/>If _`overshootderinging`_ is set and the version of libjpeg supports it (e.g. mozjpeg >= 3.0), apply overshooting to samples with extreme values for example 0 and 255 for 8-bit. Overshooting may reduce ringing artifacts from compression, in particular in areas where black text appears on a white background.<br/><br/>If _`optimizescans`_ is set and the version of libjpeg supports it (e.g. mozjpeg >= 3.0), split the spectrum of DCT coefficients into separate scans. Reduces file size but increases compression time.<br/><br/>If _`quanttable`_ is set and the version of libjpeg supports it (e.g. mozjpeg >= 3.0) it selects the quantization table to use:<br/><br/>* 0 — Tables from JPEG Annex K (vips and libjpeg default)<br/>* 1 — Flat table<br/>* 2 — Table tuned for MSSIM on Kodak image set<br/>* 3 — Table from ImageMagick by N. Robidoux (current mozjpeg default)<br/>* 4 — Table tuned for PSNR-HVS-M on Kodak image set<br/>* 5 — Table from Relevance of Human Vision to JPEG-DCT Compression (1992)<br/>* 6 — Table from DCTune Perceptual Optimization of Compressed Dental X-Rays (1997)<br/>* 7 — Table from A Visual Detection Model for DCT Coefficient Quantization (1993)<br/>* 8 — Table from An Improved Detection Model for DCT Coefficient Quantization (1993)<br/><br/>Quantization table 0 is the default in vips and libjpeg(-turbo), but it tends to favor detail over color accuracy, producing colored patches and stripes as well as heavy banding in flat areas at high compression ratios. Quantization table 2 is a good candidate to try if the default quantization table produces banding or color shifts and is well suited for hires images. Quantization table 3 is the default in mozjpeg and has been tuned to produce good results at the default quality setting; banding at high compression. Quantization table 4 is the most accurate at the cost of compression ratio. Tables 5-7 are based on older research papers, but generally achieve worse compression ratios and/or quality than 2 or 4.<br/><br/>For maximum compression with mozjpeg, a useful set of options is `strip, optimize-coding, interlace, optimize-scans, trellis-quant, quant_table=3`.<br/><br/>By default, the output stream won't have restart markers. If a non-zero restart\_interval is specified, a restart marker will be added after each specified number of MCU blocks. This makes the stream more recoverable if there are transmission errors, but also allows for some decoders to read part of the JPEG without decoding the whole stream.<br/><br/>The image is automatically converted to RGB, Monochrome or CMYK before saving.<br/><br/>EXIF data is constructed from VIPS\_META\_EXIF\_NAME, then modified with any other related tags on the image before being written to the file. VIPS\_META\_RESOLUTION\_UNIT is used to set the EXIF resolution unit. VIPS\_META\_ORIENTATION is used to set the EXIF orientation tag.<br/><br/>IPTC as VIPS\_META\_IPTC\_NAME and XMP as VIPS\_META\_XMP\_NAMEare coded and attached.<br/><br/>See also: vips\_jpegsave\_buffer(), vips\_image\_write\_to\_file().<br/><br/>\[method\]<br/><br/>#### Parameters<br/><br/>\| in       \| image to save                                     \|  \|<br/>\| -------- \| ------------------------------------------------- \|  \|<br/>\| filename \| file to write to                                  \|  \|<br/>\| ...      \| NULL\-terminated list of optional named arguments \|  \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_jpegsave\_buffer ()<br/><br/>int<br/>vips_jpegsave_buffer (_`VipsImage *in`_,<br/>                      _`void **buf`_,<br/>                      _`sizet *len`_,<br/>                      _`...`_);<br/><br/>Optional arguments:<br/><br/>* _`Q`_: `gint`, quality factor<br/>* _`optimizecoding`_: `gboolean`, compute optimal Huffman coding tables<br/>* _`interlace`_: `gboolean`, write an interlaced (progressive) jpeg<br/>* _`subsamplemode`_: VipsForeignSubsample, chroma subsampling mode<br/>* _`trellisquant`_: `gboolean`, apply trellis quantisation to each 8x8 block<br/>* _`overshootderinging`_: `gboolean`, overshoot samples with extreme values<br/>* _`optimizescans`_: `gboolean`, split DCT coefficients into separate scans<br/>* _`quanttable`_: `gint`, quantization table index<br/>* _`restartinterval`_: `gint`, restart interval in mcu<br/><br/>As vips\_jpegsave(), but save to a memory buffer.<br/><br/>The address of the buffer is returned in _`obuf`_, the length of the buffer in_`olen`_. You are responsible for freeing the buffer with `g_free()` when you are done with it.<br/><br/>See also: vips\_jpegsave(), vips\_image\_write\_to\_file().<br/><br/>\[method\]<br/><br/>#### Parameters<br/><br/>\| in  \| image to save                                     \|                                             \|<br/>\| --- \| ------------------------------------------------- \| ------------------------------------------- \|<br/>\| buf \| return output buffer here.                        \| \[array length=len\]\[element-type guint8\] \|<br/>\| len \| return output length here.                        \| \[type gsize\]                              \|<br/>\| ... \| NULL\-terminated list of optional named arguments \|                                             \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_jpegsave\_mime ()<br/><br/>int<br/>vips_jpegsave_mime (_`VipsImage *in`_,<br/>                    _`...`_);<br/><br/>Optional arguments:<br/><br/>* _`Q`_: `gint`, quality factor<br/>* _`optimizecoding`_: `gboolean`, compute optimal Huffman coding tables<br/>* _`interlace`_: `gboolean`, write an interlaced (progressive) jpeg<br/>* _`subsamplemode`_: VipsForeignSubsample, chroma subsampling mode<br/>* _`trellisquant`_: `gboolean`, apply trellis quantisation to each 8x8 block<br/>* _`overshootderinging`_: `gboolean`, overshoot samples with extreme values<br/>* _`optimizescans`_: `gboolean`, split DCT coefficients into separate scans<br/>* _`quanttable`_: `gint`, quantization table index<br/>* _`restartinterval`_: `gint`, restart interval in mcu<br/><br/>As vips\_jpegsave(), but save as a mime jpeg on stdout.<br/><br/>See also: vips\_jpegsave(), vips\_image\_write\_to\_file().<br/><br/>\[method\]<br/><br/>#### Parameters<br/><br/>\| in  \| image to save                                     \|  \|<br/>\| --- \| ------------------------------------------------- \|  \|<br/>\| ... \| NULL\-terminated list of optional named arguments \|  \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_webpload\_source ()<br/><br/>int<br/>vips_webpload_source (_`VipsSource *source`_,<br/>                      _`VipsImage **out`_,<br/>                      _`...`_);<br/><br/>Optional arguments:<br/><br/>* _`page`_: `gint`, page (frame) to read<br/>* _`n`_: `gint`, load this many pages<br/>* _`scale`_: `gdouble`, scale by this much on load<br/><br/>Exactly as vips\_webpload(), but read from a source.<br/><br/>See also: vips\_webpload()<br/><br/>#### Parameters<br/><br/>\| source \| source to load from                               \|         \|<br/>\| ------ \| ------------------------------------------------- \| ------- \|<br/>\| out    \| image to write.                                   \| \[out\] \|<br/>\| ...    \| NULL\-terminated list of optional named arguments \|         \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_webpload ()<br/><br/>int<br/>vips_webpload (_`const char *filename`_,<br/>               _`VipsImage **out`_,<br/>               _`...`_);<br/><br/>Optional arguments:<br/><br/>* _`page`_: `gint`, page (frame) to read<br/>* _`n`_: `gint`, load this many pages<br/>* _`scale`_: `gdouble`, scale by this much on load<br/><br/>Read a WebP file into a VIPS image.<br/><br/>Use _`page`_ to select a page to render, numbering from zero.<br/><br/>Use _`n`_ to select the number of pages to render. The default is 1\. Pages are rendered in a vertical column, with each individual page aligned to the left. Set to -1 to mean "until the end of the document". Use vips\_grid()to change page layout.<br/><br/>Use _`scale`_ to specify a scale-on-load factor. For example, 2.0 to double the size on load. Animated webp images don't support shrink-on-load, so a further resize may be necessary.<br/><br/>The loader supports ICC, EXIF and XMP metadata.<br/><br/>See also: vips\_image\_new\_from\_file().<br/><br/>#### Parameters<br/><br/>\| filename \| file to load                                      \|         \|<br/>\| -------- \| ------------------------------------------------- \| ------- \|<br/>\| out      \| decompressed image.                               \| \[out\] \|<br/>\| ...      \| NULL\-terminated list of optional named arguments \|         \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_webpload\_buffer ()<br/><br/>int<br/>vips_webpload_buffer (_`void *buf`_,<br/>                      _`sizet len`_,<br/>                      _`VipsImage **out`_,<br/>                      _`...`_);<br/><br/>Optional arguments:<br/><br/>* _`page`_: `gint`, page (frame) to read<br/>* _`n`_: `gint`, load this many pages<br/>* _`scale`_: `gdouble`, scale by this much on load<br/><br/>Read a WebP-formatted memory block into a VIPS image. Exactly asvips\_webpload(), but read from a memory buffer.<br/><br/>You must not free the buffer while _`out`_ is active. The“postclose” signal on _`out`_ is a good place to free.<br/><br/>See also: vips\_webpload()<br/><br/>#### Parameters<br/><br/>\| buf \| memory area to load.                              \| \[array length=len\]\[element-type guint8\] \|<br/>\| --- \| ------------------------------------------------- \| ------------------------------------------- \|<br/>\| len \| size of memory area.                              \| \[type gsize\]                              \|<br/>\| out \| image to write.                                   \| \[out\]                                     \|<br/>\| ... \| NULL\-terminated list of optional named arguments \|                                             \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_webpsave\_target ()<br/><br/>int<br/>vips_webpsave_target (_`VipsImage *in`_,<br/>                      _`VipsTarget *target`_,<br/>                      _`...`_);<br/><br/>Optional arguments:<br/><br/>* _`Q`_: `gint`, quality factor<br/>* _`lossless`_: `gboolean`, enables lossless compression<br/>* _`preset`_: VipsForeignWebpPreset, choose lossy compression preset<br/>* _`smartsubsample`_: `gboolean`, enables high quality chroma subsampling<br/>* _`smartdeblock`_: `gboolean`, enables auto-adjusting of the deblocking filter<br/>* _`nearlossless`_: `gboolean`, preprocess in lossless mode (controlled by Q)<br/>* _`alphaq`_: `gint`, set alpha quality in lossless mode<br/>* _`effort`_: `gint`, level of CPU effort to reduce file size<br/>* _`targetsize`_: `gint`, desired target size in bytes<br/>* _`passes`_: `gint`, number of entropy-analysis passes<br/>* _`minsize`_: `gboolean`, minimise size<br/>* _`mixed`_: `gboolean`, allow both lossy and lossless encoding<br/>* _`kmin`_: `gint`, minimum number of frames between keyframes<br/>* _`kmax`_: `gint`, maximum number of frames between keyframes<br/><br/>As vips\_webpsave(), but save to a target.<br/><br/>See also: vips\_webpsave().<br/><br/>\[method\]<br/><br/>#### Parameters<br/><br/>\| in     \| image to save                                     \|  \|<br/>\| ------ \| ------------------------------------------------- \|  \|<br/>\| target \| save image to this target                         \|  \|<br/>\| ...    \| NULL\-terminated list of optional named arguments \|  \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_webpsave ()<br/><br/>int<br/>vips_webpsave (_`VipsImage *in`_,<br/>               _`const char *filename`_,<br/>               _`...`_);<br/><br/>Optional arguments:<br/><br/>* _`Q`_: `gint`, quality factor<br/>* _`lossless`_: `gboolean`, enables lossless compression<br/>* _`preset`_: VipsForeignWebpPreset, choose lossy compression preset<br/>* _`smartsubsample`_: `gboolean`, enables high quality chroma subsampling<br/>* _`smartdeblock`_: `gboolean`, enables auto-adjusting of the deblocking filter<br/>* _`nearlossless`_: `gboolean`, preprocess in lossless mode (controlled by Q)<br/>* _`alphaq`_: `gint`, set alpha quality in lossless mode<br/>* _`effort`_: `gint`, level of CPU effort to reduce file size<br/>* _`targetsize`_: `gint`, desired target size in bytes<br/>* _`passes`_: `gint`, number of entropy-analysis passes<br/>* _`minsize`_: `gboolean`, minimise size<br/>* _`mixed`_: `gboolean`, allow both lossy and lossless encoding<br/>* _`kmin`_: `gint`, minimum number of frames between keyframes<br/>* _`kmax`_: `gint`, maximum number of frames between keyframes<br/><br/>Write an image to a file in WebP format.<br/><br/>By default, images are saved in lossy format, with_`Q`_ giving the WebP quality factor. It has the range 0 - 100, with the default 75.<br/><br/>Use _`preset`_ to hint the image type to the lossy compressor. The default isVIPS\_FOREIGN\_WEBP\_PRESET\_DEFAULT.<br/><br/>Set _`smartsubsample`_ to enable high quality chroma subsampling.<br/><br/>Set _`smartdeblock`_ to enable auto-adjusting of the deblocking filter. This can improve image quality, especially on low-contrast edges, but encoding can take significantly longer.<br/><br/>Use _`alphaq`_ to set the quality for the alpha channel in lossy mode. It has the range 1 - 100, with the default 100.<br/><br/>Use _`effort`_ to control how much CPU time to spend attempting to reduce file size. A higher value means more effort and therefore CPU time should be spent. It has the range 0-6 and a default value of 4.<br/><br/>Use _`targetsize`_ to set the desired target size in bytes.<br/><br/>Use _`passes`_ to set the number of entropy-analysis passes, by default 1, unless _`targetsize`_ is set, in which case the default is 3\. It is not recommended to set _`passes`_ unless you set _`targetsize`_. Doing so will result in longer encoding times for no benefit.<br/><br/>Set _`lossless`_ to use lossless compression, or combine _`nearlossless`_with _`Q`_ 80, 60, 40 or 20 to apply increasing amounts of preprocessing which improves the near-lossless compression ratio by up to 50%.<br/><br/>For animated webp output, _`minsize`_ will try to optimize for minimum size.<br/><br/>For animated webp output, _`kmax`_ sets the maximum number of frames between keyframes. Setting 0 means only keyframes. _`kmin`_ sets the minimum number of frames between frames. Setting 0 means no keyframes. By default, keyframes are disabled.<br/><br/>For animated webp output, _`mixed`_ tries to improve the file size by mixing both lossy and lossless encoding.<br/><br/>Use the metadata items `loop` and `delay` to set the number of loops for the animation and the frame delays.<br/><br/>See also: vips\_webpload(), vips\_image\_write\_to\_file().<br/><br/>\[method\]<br/><br/>#### Parameters<br/><br/>\| in       \| image to save                                     \|  \|<br/>\| -------- \| ------------------------------------------------- \|  \|<br/>\| filename \| file to write to                                  \|  \|<br/>\| ...      \| NULL\-terminated list of optional named arguments \|  \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_webpsave\_buffer ()<br/><br/>int<br/>vips_webpsave_buffer (_`VipsImage *in`_,<br/>                      _`void **buf`_,<br/>                      _`sizet *len`_,<br/>                      _`...`_);<br/><br/>Optional arguments:<br/><br/>* _`Q`_: `gint`, quality factor<br/>* _`lossless`_: `gboolean`, enables lossless compression<br/>* _`preset`_: VipsForeignWebpPreset, choose lossy compression preset<br/>* _`smartsubsample`_: `gboolean`, enables high quality chroma subsampling<br/>* _`smartdeblock`_: `gboolean`, enables auto-adjusting of the deblocking filter<br/>* _`nearlossless`_: `gboolean`, preprocess in lossless mode (controlled by Q)<br/>* _`alphaq`_: `gint`, set alpha quality in lossless mode<br/>* _`effort`_: `gint`, level of CPU effort to reduce file size<br/>* _`targetsize`_: `gint`, desired target size in bytes<br/>* _`passes`_: `gint`, number of entropy-analysis passes<br/>* _`minsize`_: `gboolean`, minimise size<br/>* _`mixed`_: `gboolean`, allow both lossy and lossless encoding<br/>* _`kmin`_: `gint`, minimum number of frames between keyframes<br/>* _`kmax`_: `gint`, maximum number of frames between keyframes<br/><br/>As vips\_webpsave(), but save to a memory buffer.<br/><br/>The address of the buffer is returned in _`buf`_, the length of the buffer in_`len`_. You are responsible for freeing the buffer with `g_free()` when you are done with it.<br/><br/>See also: vips\_webpsave().<br/><br/>\[method\]<br/><br/>#### Parameters<br/><br/>\| in  \| image to save                                     \|                                                    \|<br/>\| --- \| ------------------------------------------------- \| -------------------------------------------------- \|<br/>\| buf \| return output buffer here.                        \| \[out\]\[array length=len\]\[element-type guint8\] \|<br/>\| len \| return output length here                         \|                                                    \|<br/>\| ... \| NULL\-terminated list of optional named arguments \|                                                    \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_webpsave\_mime ()<br/><br/>int<br/>vips_webpsave_mime (_`VipsImage *in`_,<br/>                    _`...`_);<br/><br/>Optional arguments:<br/><br/>* _`Q`_: `gint`, quality factor<br/>* _`lossless`_: `gboolean`, enables lossless compression<br/>* _`preset`_: VipsForeignWebpPreset, choose lossy compression preset<br/>* _`smartsubsample`_: `gboolean`, enables high quality chroma subsampling<br/>* _`smartdeblock`_: `gboolean`, enables auto-adjusting of the deblocking filter<br/>* _`nearlossless`_: `gboolean`, preprocess in lossless mode (controlled by Q)<br/>* _`alphaq`_: `gint`, set alpha quality in lossless mode<br/>* _`effort`_: `gint`, level of CPU effort to reduce file size<br/>* _`targetsize`_: `gint`, desired target size in bytes<br/>* _`passes`_: `gint`, number of entropy-analysis passes<br/>* _`minsize`_: `gboolean`, minimise size<br/>* _`mixed`_: `gboolean`, allow both lossy and lossless encoding<br/>* _`kmin`_: `gint`, minimum number of frames between keyframes<br/>* _`kmax`_: `gint`, maximum number of frames between keyframes<br/><br/>As vips\_webpsave(), but save as a mime webp on stdout.<br/><br/>See also: vips\_webpsave(), vips\_image\_write\_to\_file().<br/><br/>\[method\]<br/><br/>#### Parameters<br/><br/>\| in  \| image to save                                     \|  \|<br/>\| --- \| ------------------------------------------------- \|  \|<br/>\| ... \| NULL\-terminated list of optional named arguments \|  \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_tiffload ()<br/><br/>int<br/>vips_tiffload (_`const char *filename`_,<br/>               _`VipsImage **out`_,<br/>               _`...`_);<br/><br/>Optional arguments:<br/><br/>* _`page`_: `gint`, load this page<br/>* _`n`_: `gint`, load this many pages<br/>* _`autorotate`_: `gboolean`, use orientation tag to rotate the image during load<br/>* _`subifd`_: `gint`, select this subifd index<br/><br/>Read a TIFF file into a VIPS image. It is a full baseline TIFF 6 reader, with extensions for tiled images, multipage images, XYZ and LAB colour space, pyramidal images and JPEG compression, including CMYK and YCbCr.<br/><br/>_`page`_ means load this page from the file. By default the first page (page 0) is read.<br/><br/>_`n`_ means load this many pages. By default a single page is read. All the pages must have the same dimensions, and they are loaded as a tall, thin "toilet roll" image. The VIPS\_META\_PAGE\_HEIGHT metadata tag gives the height in pixels of each page. Use -1 to load all pages.<br/><br/>Setting _`autorotate`_ to `TRUE` will make the loader interpret the orientation tag and automatically rotate the image appropriately during load.<br/><br/>If _`autorotate`_ is `FALSE`, the metadata field VIPS\_META\_ORIENTATION is set to the value of the orientation tag. Applications may read and interpret this field as they wish later in processing. See vips\_autorot(). Save operations will use VIPS\_META\_ORIENTATION, if present, to set the orientation of output images.<br/><br/>If _`autorotate`_ is TRUE, the image will be rotated upright during load and no metadata attached. This can be very slow.<br/><br/>If _`subifd`_ is -1 (the default), the main image is selected for each page. If it is 0 or greater and there is a SUBIFD tag, the indexed SUBIFD is selected. This can be used to read lower resolution layers from bioformats-style image pyramids.<br/><br/>Any ICC profile is read and attached to the VIPS image asVIPS\_META\_ICC\_NAME. Any XMP metadata is read and attached to the image as VIPS\_META\_XMP\_NAME. Any IPTC is attached as VIPS\_META\_IPTC\_NAME. The image description is attached as VIPS\_META\_IMAGEDESCRIPTION. Data in the photoshop tag is attached as VIPS\_META\_PHOTOSHOP\_NAME.<br/><br/>See also: vips\_image\_new\_from\_file(), vips\_autorot().<br/><br/>#### Parameters<br/><br/>\| filename \| file to load                                      \|         \|<br/>\| -------- \| ------------------------------------------------- \| ------- \|<br/>\| out      \| decompressed image.                               \| \[out\] \|<br/>\| ...      \| NULL\-terminated list of optional named arguments \|         \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_tiffload\_buffer ()<br/><br/>int<br/>vips_tiffload_buffer (_`void *buf`_,<br/>                      _`sizet len`_,<br/>                      _`VipsImage **out`_,<br/>                      _`...`_);<br/><br/>Optional arguments:<br/><br/>* _`page`_: `gint`, load this page<br/>* _`n`_: `gint`, load this many pages<br/>* _`autorotate`_: `gboolean`, use orientation tag to rotate the image during load<br/>* _`subifd`_: `gint`, select this subifd index<br/><br/>Read a TIFF-formatted memory block into a VIPS image. Exactly asvips\_tiffload(), but read from a memory source.<br/><br/>You must not free the buffer while _`out`_ is active. The“postclose” signal on _`out`_ is a good place to free.<br/><br/>See also: vips\_tiffload().<br/><br/>#### Parameters<br/><br/>\| buf \| memory area to load.                              \| \[array length=len\]\[element-type guint8\] \|<br/>\| --- \| ------------------------------------------------- \| ------------------------------------------- \|<br/>\| len \| size of memory area.                              \| \[type gsize\]                              \|<br/>\| out \| image to write.                                   \| \[out\]                                     \|<br/>\| ... \| NULL\-terminated list of optional named arguments \|                                             \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_tiffload\_source ()<br/><br/>int<br/>vips_tiffload_source (_`VipsSource *source`_,<br/>                      _`VipsImage **out`_,<br/>                      _`...`_);<br/><br/>Optional arguments:<br/><br/>* _`page`_: `gint`, load this page<br/>* _`n`_: `gint`, load this many pages<br/>* _`autorotate`_: `gboolean`, use orientation tag to rotate the image during load<br/>* _`subifd`_: `gint`, select this subifd index<br/><br/>Exactly as vips\_tiffload(), but read from a source.<br/><br/>See also: vips\_tiffload().<br/><br/>#### Parameters<br/><br/>\| source \| source to load                                    \|         \|<br/>\| ------ \| ------------------------------------------------- \| ------- \|<br/>\| out    \| image to write.                                   \| \[out\] \|<br/>\| ...    \| NULL\-terminated list of optional named arguments \|         \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_tiffsave ()<br/><br/>int<br/>vips_tiffsave (_`VipsImage *in`_,<br/>               _`const char *filename`_,<br/>               _`...`_);<br/><br/>Optional arguments:<br/><br/>* _`compression`_: use this VipsForeignTiffCompression<br/>* _`Q`_: `gint` quality factor<br/>* _`predictor`_: use this VipsForeignTiffPredictor<br/>* _`tile`_: `gboolean`, set `TRUE` to write a tiled tiff<br/>* _`tilewidth`_: `gint` for tile size<br/>* _`tileheight`_: `gint` for tile size<br/>* _`pyramid`_: `gboolean`, write an image pyramid<br/>* _`bitdepth`_: `int`, change bit depth to 1,2, or 4 bit<br/>* _`miniswhite`_: `gboolean`, write 1-bit images as MINISWHITE<br/>* _`resunit`_: VipsForeignTiffResunit for resolution unit<br/>* _`xres`_: `gdouble` horizontal resolution in pixels/mm<br/>* _`yres`_: `gdouble` vertical resolution in pixels/mm<br/>* _`bigtiff`_: `gboolean`, write a BigTiff file<br/>* _`properties`_: `gboolean`, set `TRUE` to write an IMAGEDESCRIPTION tag<br/>* _`regionshrink`_: VipsRegionShrink How to shrink each 2x2 region.<br/>* _`level`_: `gint`, Zstd or Deflate (zlib) compression level<br/>* _`lossless`_: `gboolean`, WebP lossless mode<br/>* _`depth`_: VipsForeignDzDepth how deep to make the pyramid<br/>* _`subifd`_: `gboolean` write pyr layers as sub-ifds<br/>* _`premultiply`_: `gboolean` write premultiplied alpha<br/><br/>Write a VIPS image to a file as TIFF.<br/><br/>If _`in`_ has the VIPS\_META\_PAGE\_HEIGHT metadata item, this is assumed to be a "toilet roll" image. It will be written as series of pages, each VIPS\_META\_PAGE\_HEIGHT pixels high.<br/><br/>Use _`compression`_ to set the tiff compression. Currently jpeg, packbits, fax4, lzw, none, deflate, webp and zstd are supported. The default is no compression. JPEG compression is a good lossy compressor for photographs, packbits is good for 1-bit images, and deflate is the best lossless compression TIFF can do.<br/><br/>XYZ images are automatically saved as libtiff LOGLUV with SGILOG compression. Float LAB images are saved as float CIELAB. Set _`bitdepth`_ to save as 8-bit CIELAB.<br/><br/>Use _`Q`_ to set the JPEG compression factor. Default 75.<br/><br/>User _`level`_ to set the ZSTD (1-22) or Deflate (1-9) compression level. Use _`lossless`_ to set WEBP lossless mode on. Use _`Q`_ to set the WEBP compression level.<br/><br/>Use _`predictor`_ to set the predictor for lzw, deflate and zstd compression. It defaults to VIPS\_FOREIGN\_TIFF\_PREDICTOR\_HORIZONTAL, meaning horizontal differencing. Please refer to the libtiff specifications for further discussion of various predictors.<br/><br/>Set _`tile`_ to TRUE to write a tiled tiff. By default tiff are written in strips. Use _`tilewidth`_ and _`tileheight`_ to set the tile size. The defaiult is 128 by 128.<br/><br/>Set _`pyramid`_ to write the image as a set of images, one per page, of decreasing size. Use _`regionshrink`_ to set how images will be shrunk: by default each 2x2 block is just averaged, but you can set MODE or MEDIAN as well.<br/><br/>By default, the pyramid stops when the image is small enough to fit in one tile. Use _`depth`_ to stop when the image fits in one pixel, or to only write a single layer.<br/><br/>Set _`bitdepth`_ to save 8-bit uchar images as 1, 2 or 4-bit TIFFs. In case of depth 1: Values >128 are written as white, values <=128 as black. Normally vips will write MINISBLACK TIFFs where black is a 0 bit, but if you set _`miniswhite`_, it will use 0 for a white bit. Many pre-press applications only work with images which use this sense. _`miniswhite`_ only affects one-bit images, it does nothing for greyscale images. In case of depth 2: The same holds but values < 64 are written as black. For 64 <= values < 128 they are written as dark grey, for 128 <= values < 192 they are written as light gray and values above are written as white. In case _`miniswhite`_ is set to true this behavior is inverted. In case of depth 4: values < 16 are written as black, and so on for the lighter shades. In case _`miniswhite`_ is set to true this behavior is inverted.<br/><br/>Use _`resunit`_ to override the default resolution unit. The default resolution unit is taken from the header fieldVIPS\_META\_RESOLUTION\_UNIT. If this field is not set, then VIPS defaults to cm.<br/><br/>Use _`xres`_ and _`yres`_ to override the default horizontal and vertical resolutions. By default these values are taken from the VIPS image header. libvips resolution is always in pixels per millimetre.<br/><br/>Set _`bigtiff`_ to attempt to write a bigtiff. Bigtiff is a variant of the TIFF format that allows more than 4GB in a file.<br/><br/>Set _`properties`_ to write all vips metadata to the IMAGEDESCRIPTION tag as xml. If _`properties`_ is not set, the value of VIPS\_META\_IMAGEDESCRIPTION is used instead.<br/><br/>The value of VIPS\_META\_XMP\_NAME is written to the XMP tag. VIPS\_META\_ORIENTATION (if set) is used to set the value of the orientation tag. VIPS\_META\_IPTC (if set) is used to set the value of the IPTC tag.VIPS\_META\_PHOTOSHOP\_NAME (if set) is used to set the value of the PHOTOSHOP tag.<br/><br/>By default, pyramid layers are saved as consecutive pages. Set _`subifd`_ to save pyramid layers as sub-directories of the main image. Setting this option can improve compatibility with formats like OME.<br/><br/>Set _`premultiply`_ to save with premultiplied alpha. Some programs, such as InDesign, will only work with premultiplied alpha.<br/><br/>See also: vips\_tiffload(), vips\_image\_write\_to\_file().<br/><br/>\[method\]<br/><br/>#### Parameters<br/><br/>\| in       \| image to save                                     \|  \|<br/>\| -------- \| ------------------------------------------------- \|  \|<br/>\| filename \| file to write to                                  \|  \|<br/>\| ...      \| NULL\-terminated list of optional named arguments \|  \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_tiffsave\_buffer ()<br/><br/>int<br/>vips_tiffsave_buffer (_`VipsImage *in`_,<br/>                      _`void **buf`_,<br/>                      _`sizet *len`_,<br/>                      _`...`_);<br/><br/>Optional arguments:<br/><br/>* _`compression`_: use this VipsForeignTiffCompression<br/>* _`Q`_: `gint` quality factor<br/>* _`predictor`_: use this VipsForeignTiffPredictor<br/>* _`tile`_: `gboolean`, set `TRUE` to write a tiled tiff<br/>* _`tilewidth`_: `gint` for tile size<br/>* _`tileheight`_: `gint` for tile size<br/>* _`pyramid`_: `gboolean`, write an image pyramid<br/>* _`bitdepth`_: `int`, set write bit depth to 1, 2, 4 or 8<br/>* _`miniswhite`_: `gboolean`, write 1-bit images as MINISWHITE<br/>* _`resunit`_: VipsForeignTiffResunit for resolution unit<br/>* _`xres`_: `gdouble` horizontal resolution in pixels/mm<br/>* _`yres`_: `gdouble` vertical resolution in pixels/mm<br/>* _`bigtiff`_: `gboolean`, write a BigTiff file<br/>* _`properties`_: `gboolean`, set `TRUE` to write an IMAGEDESCRIPTION tag<br/>* _`regionshrink`_: VipsRegionShrink How to shrink each 2x2 region.<br/>* _`level`_: `gint`, Zstd or Deflate (zlib) compression level<br/>* _`lossless`_: `gboolean`, WebP lossless mode<br/>* _`depth`_: VipsForeignDzDepth how deep to make the pyramid<br/>* _`subifd`_: `gboolean` write pyr layers as sub-ifds<br/>* _`premultiply`_: `gboolean` write premultiplied alpha<br/><br/>As vips\_tiffsave(), but save to a memory buffer.<br/><br/>The address of the buffer is returned in _`buf`_, the length of the buffer in_`len`_. You are responsible for freeing the buffer with `g_free()` when you are done with it.<br/><br/>See also: vips\_tiffsave(), vips\_image\_write\_to\_file().<br/><br/>\[method\]<br/><br/>#### Parameters<br/><br/>\| in  \| image to save                                     \|                                             \|<br/>\| --- \| ------------------------------------------------- \| ------------------------------------------- \|<br/>\| buf \| return output buffer here.                        \| \[array length=len\]\[element-type guint8\] \|<br/>\| len \| return output length here.                        \| \[type gsize\]                              \|<br/>\| ... \| NULL\-terminated list of optional named arguments \|                                             \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_tiffsave\_target ()<br/><br/>int<br/>vips_tiffsave_target (_`VipsImage *in`_,<br/>                      _`VipsTarget *target`_,<br/>                      _`...`_);<br/><br/>Optional arguments:<br/><br/>* _`compression`_: use this VipsForeignTiffCompression<br/>* _`Q`_: `gint` quality factor<br/>* _`predictor`_: use this VipsForeignTiffPredictor<br/>* _`tile`_: `gboolean`, set `TRUE` to write a tiled tiff<br/>* _`tilewidth`_: `gint` for tile size<br/>* _`tileheight`_: `gint` for tile size<br/>* _`pyramid`_: `gboolean`, write an image pyramid<br/>* _`bitdepth`_: `int`, set write bit depth to 1, 2, 4 or 8<br/>* _`miniswhite`_: `gboolean`, write 1-bit images as MINISWHITE<br/>* _`resunit`_: VipsForeignTiffResunit for resolution unit<br/>* _`xres`_: `gdouble` horizontal resolution in pixels/mm<br/>* _`yres`_: `gdouble` vertical resolution in pixels/mm<br/>* _`bigtiff`_: `gboolean`, write a BigTiff file<br/>* _`properties`_: `gboolean`, set `TRUE` to write an IMAGEDESCRIPTION tag<br/>* _`regionshrink`_: VipsRegionShrink How to shrink each 2x2 region.<br/>* _`level`_: `gint`, Zstd or Deflate (zlib) compression level<br/>* _`lossless`_: `gboolean`, WebP lossless mode<br/>* _`depth`_: VipsForeignDzDepth how deep to make the pyramid<br/>* _`subifd`_: `gboolean` write pyr layers as sub-ifds<br/>* _`premultiply`_: `gboolean` write premultiplied alpha<br/><br/>As vips\_tiffsave(), but save to a target.<br/><br/>See also: vips\_tiffsave(), vips\_image\_write\_to\_target().<br/><br/>\[method\]<br/><br/>#### Parameters<br/><br/>\| in     \| image to save                                     \|  \|<br/>\| ------ \| ------------------------------------------------- \|  \|<br/>\| target \| save image to this target                         \|  \|<br/>\| ...    \| NULL\-terminated list of optional named arguments \|  \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_openexrload ()<br/><br/>int<br/>vips_openexrload (_`const char *filename`_,<br/>                  _`VipsImage **out`_,<br/>                  _`...`_);<br/><br/>Read a OpenEXR file into a VIPS image.<br/><br/>The reader can handle scanline and tiled OpenEXR images. It can't handle OpenEXR colour management, image attributes, many pixel formats, anything other than RGBA.<br/><br/>This reader uses the rather limited OpenEXR C API. It should really be redone in C++.<br/><br/>See also: vips\_image\_new\_from\_file().<br/><br/>#### Parameters<br/><br/>\| filename \| file to load                                      \|         \|<br/>\| -------- \| ------------------------------------------------- \| ------- \|<br/>\| out      \| decompressed image.                               \| \[out\] \|<br/>\| ...      \| NULL\-terminated list of optional named arguments \|         \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_fitsload ()<br/><br/>int<br/>vips_fitsload (_`const char *filename`_,<br/>               _`VipsImage **out`_,<br/>               _`...`_);<br/><br/>Read a FITS image file into a VIPS image.<br/><br/>This operation can read images with up to three dimensions. Any higher dimensions must be empty.<br/><br/>It can read 8, 16 and 32-bit integer images, signed and unsigned, float and double.<br/><br/>FITS metadata is attached with the "fits-" prefix.<br/><br/>See also: vips\_image\_new\_from\_file().<br/><br/>#### Parameters<br/><br/>\| filename \| file to load                                      \|         \|<br/>\| -------- \| ------------------------------------------------- \| ------- \|<br/>\| out      \| decompressed image.                               \| \[out\] \|<br/>\| ...      \| NULL\-terminated list of optional named arguments \|         \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_fitssave ()<br/><br/>int<br/>vips_fitssave (_`VipsImage *in`_,<br/>               _`const char *filename`_,<br/>               _`...`_);<br/><br/>Write a VIPS image to a file in FITS format.<br/><br/>See also: vips\_image\_write\_to\_file().<br/><br/>\[method\]<br/><br/>#### Parameters<br/><br/>\| in       \| image to save                                     \|  \|<br/>\| -------- \| ------------------------------------------------- \|  \|<br/>\| filename \| file to write to                                  \|  \|<br/>\| ...      \| NULL\-terminated list of optional named arguments \|  \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_analyzeload ()<br/><br/>int<br/>vips_analyzeload (_`const char *filename`_,<br/>                  _`VipsImage **out`_,<br/>                  _`...`_);<br/><br/>Load an Analyze 6.0 file. If _`filename`_ is "fred.img", this will look for an image header called "fred.hdr" and pixel data in "fred.img". You can also load "fred" or "fred.hdr".<br/><br/>Images are loaded lazilly and byte-swapped, if necessary. The Analyze metadata is read and attached.<br/><br/>See also: vips\_image\_new\_from\_file().<br/><br/>#### Parameters<br/><br/>\| filename \| file to load                                      \|         \|<br/>\| -------- \| ------------------------------------------------- \| ------- \|<br/>\| out      \| decompressed image.                               \| \[out\] \|<br/>\| ...      \| NULL\-terminated list of optional named arguments \|         \|<br/><br/>#### Returns<br/><br/> 0 on success, -1 on error.<br/><br/>---<br/><br/>### vips\_rawload ()<br/><br/>int<br/>vips_rawload (_`const char *filename`_,<br/> |
| How can I ignore warning msg in vips_save_buffer #3222 | https://github.com/libvips/libvips/discussions/3222 | Skip to content <br/><br/>## Navigation Menu<br/><br/>Toggle navigation <br/><br/> Sign in <br/><br/>Appearance settings <br/><br/>* Product  <br/>   * GitHub Copilot Write better code with AI  <br/>   * GitHub Models New  Manage and compare prompts  <br/>   * GitHub Advanced Security Find and fix vulnerabilities  <br/>   * Actions Automate any workflow  <br/>   * Codespaces Instant dev environments  <br/>   * Issues Plan and track work  <br/>   * Code Review Manage code changes  <br/>   * Discussions Collaborate outside of code  <br/>   * Code Search Find more, search less  <br/>Explore  <br/>   * Why GitHub  <br/>   * All features  <br/>   * Documentation  <br/>   * GitHub Skills  <br/>   * Blog<br/>* Solutions  <br/>By company size  <br/>   * Enterprises  <br/>   * Small and medium teams  <br/>   * Startups  <br/>   * Nonprofits  <br/>By use case  <br/>   * DevSecOps  <br/>   * DevOps  <br/>   * CI/CD  <br/>   * View all use cases  <br/>By industry  <br/>   * Healthcare  <br/>   * Financial services  <br/>   * Manufacturing  <br/>   * Government  <br/>   * View all industries  <br/> View all solutions<br/>* Resources  <br/>Topics  <br/>   * AI  <br/>   * DevOps  <br/>   * Security  <br/>   * Software Development  <br/>   * View all  <br/>Explore  <br/>   * Learning Pathways  <br/>   * Events & Webinars  <br/>   * Ebooks & Whitepapers  <br/>   * Customer Stories  <br/>   * Partners  <br/>   * Executive Insights<br/>* Open Source  <br/>   * GitHub Sponsors Fund open source developers  <br/>   * The ReadME Project GitHub community articles  <br/>Repositories  <br/>   * Topics  <br/>   * Trending  <br/>   * Collections<br/>* Enterprise  <br/>   * Enterprise platform AI-powered developer platform  <br/>Available add-ons  <br/>   * GitHub Advanced Security Enterprise-grade security features  <br/>   * Copilot for business Enterprise-grade AI features  <br/>   * Premium Support Enterprise-grade 24/7 support<br/>* Pricing<br/><br/>Search or jump to... <br/><br/># Search code, repositories, users, issues, pull requests...<br/><br/> Search <br/><br/>Clear <br/><br/>Search syntax tips <br/><br/>#  Provide feedback<br/><br/>We read every piece of feedback, and take your input very seriously.<br/><br/>Include my email address so I can be contacted <br/><br/> Cancel  Submit feedback <br/><br/>#  Saved searches<br/><br/>## Use saved searches to filter your results more quickly<br/><br/>Name <br/><br/>Query <br/><br/> To see all available qualifiers, see our documentation.<br/><br/> Cancel  Create saved search <br/><br/> Sign in <br/><br/> Sign up <br/><br/>Appearance settings <br/><br/>Resetting focus <br/><br/>You signed in with another tab or window. Reload to refresh your session. You signed out in another tab or window. Reload to refresh your session. You switched accounts on another tab or window. Reload to refresh your session. Dismiss alert <br/><br/>\{{ message \}}<br/><br/> libvips / **libvips** Public <br/><br/>* ###  Uh oh!  <br/>There was an error while loading. Please reload this page.<br/>* Notifications You must be signed in to change notification settings<br/>* Fork702<br/>* Star 10.4k<br/><br/>* Code<br/>* Issues 60<br/>* Pull requests 8<br/>* Discussions<br/>* Actions<br/>* Projects 0<br/>* Wiki<br/>* Security  <br/> Uh oh!  <br/>There was an error while loading. Please reload this page.<br/>* Insights<br/><br/>Additional navigation options <br/><br/>* Code<br/>* Issues<br/>* Pull requests<br/>* Discussions<br/>* Actions<br/>* Projects<br/>* Wiki<br/>* Security<br/>* Insights<br/><br/>#  How can I ignore warning msg in vips\_save\_buffer #3222 <br/><br/> Answered by jcupitt <br/><br/> jishi92  asked this question inQ&A <br/><br/> How can I ignore warning msg in vips\_save\_buffer #3222 <br/><br/>@jishi92  jishi92 <br/><br/>Dec 8, 2022 · 2 comments· 24 replies<br/><br/> Answered by jcupitt Return to top <br/><br/>Discussion options <br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>#  \{{title\}}<br/><br/> Something went wrong.<br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>Quote reply <br/><br/>edited <br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>#  \{{editor\}}'s edit<br/><br/> \{{actor\}} deleted this content.<br/><br/>#  \{{editor\}}'s edit<br/><br/> Something went wrong.<br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>## <br/><br/>jishi92 Dec 8, 2022 <br/><br/> \- <br/><br/>\| In this case, image can be process successfully.But an exception error is thrown： VipsJpeg: Premature end of input file How can I ignore warning msg in vips\_jpegsave\_buffer in my code.I think the result is valid and I don't want to accept this warning. The cmd is : vips invert broken-jpg.jpeg test000.jpg [broken-jpg](https://user-images.githubusercontent.com/22196414/206409314-249ba272-d945-4f43-a415-60b1f6a9fe9b.jpeg) \|<br/>\| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \|<br/><br/>Beta Was this translation helpful? Give feedback. <br/><br/>1 You must be logged in to vote <br/><br/>All reactions <br/><br/>Answered by jcupitt Dec 8, 2022 <br/><br/>Hi again,<br/><br/>Warnings have no effect by default. For example:<br/><br/>```<br/>$ vips copy truncated.jpg x.jpg<br/><br/>(vips:124623): VIPS-WARNING **: 11:13:08.580: read gave 2 warnings<br/><br/>(vips:124623): VIPS-WARNING **: 11:13:08.581: VipsJpeg: Premature end of JPEG file<br/><br/>$ echo $?<br/>0<br/><br/>```<br/><br/>So the command succeeded, despite the warning.<br/><br/>You can make it fail with `fail-on`, eg.:<br/><br/>```<br/> $ vips copy truncated.jpg[fail-on=warning] x.jpg<br/><br/>(vips:124761): VIPS-WARNING **: 11:14:39.724: error in tile 0 x 136<br/>VipsJpeg: Premature end of input file<br/>$ echo $?<br/>1<br/><br/>```<br/><br/> View full answer <br/><br/>## Replies:  2 comments ·  24 replies <br/><br/>* Oldest<br/>* Newest<br/>* Top<br/><br/>Comment options <br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>#  \{{title\}}<br/><br/> Something went wrong.<br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>Quote reply <br/><br/>### <br/><br/>jcupitt Dec 8, 2022 <br/><br/> Maintainer <br/><br/> \- <br/><br/>\| Hi again, Warnings have no effect by default. For example: $ vips copy truncated.jpg x.jpg (vips:124623): VIPS-WARNING \*\*: 11:13:08.580: read gave 2 warnings (vips:124623): VIPS-WARNING \*\*: 11:13:08.581: VipsJpeg: Premature end of JPEG file $ echo $? 0 So the command succeeded, despite the warning. You can make it fail with fail-on, eg.:  $ vips copy truncated.jpg\[fail-on=warning\] x.jpg (vips:124761): VIPS-WARNING \*\*: 11:14:39.724: error in tile 0 x 136 VipsJpeg: Premature end of input file $ echo $? 1 \|<br/>\| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \|<br/><br/>Beta Was this translation helpful? Give feedback. <br/><br/>Marked as answer <br/><br/>1 You must be logged in to vote <br/><br/>All reactions <br/><br/> 22 replies <br/><br/>Show 17 previous replies <br/><br/>@jishi92<br/><br/>Comment options <br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>#  \{{title\}}<br/><br/> Something went wrong.<br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>Quote reply <br/><br/>#### <br/><br/>jishi92 Dec 12, 2022 <br/><br/> Author <br/><br/> \- <br/><br/>\| Yes, I think so.The fail-on parameter just affects the behaviour of the loader.So why does this parameter(fail-on=none) affect the exported result.This parameter should just affect load\_image not save\_image. \|<br/>\| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \|<br/><br/>Beta Was this translation helpful? Give feedback. <br/><br/>All reactions <br/><br/>@jcupitt<br/><br/>Comment options <br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>#  \{{title\}}<br/><br/> Something went wrong.<br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>Quote reply <br/><br/>#### <br/><br/>jcupitt Dec 12, 2022 <br/><br/> Maintainer <br/><br/> \- <br/><br/>\| It does just affect the load. But because libvips is demand-driven, the load won't actually occur until the save operation executes, so you see the error later. \|<br/>\| ---------------------------------------------------------------------------------------------------------------------------------------------------------------- \|<br/><br/>Beta Was this translation helpful? Give feedback. <br/><br/>All reactions <br/><br/>@jishi92<br/><br/>Comment options <br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>#  \{{title\}}<br/><br/> Something went wrong.<br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>Quote reply <br/><br/>#### <br/><br/>jishi92 Dec 13, 2022 <br/><br/> Author <br/><br/> \- <br/><br/>\| Ok,I think I get it.If I set fail-on=none does that mean vips will not return any errors(always return 0), whether or not the processing succeeds. \|<br/>\| -------------------------------------------------------------------------------------------------------------------------------------------------- \|<br/><br/>Beta Was this translation helpful? Give feedback. <br/><br/>All reactions <br/><br/>@jcupitt<br/><br/>Comment options <br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>#  \{{title\}}<br/><br/> Something went wrong.<br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>Quote reply <br/><br/>#### <br/><br/>jcupitt Dec 13, 2022 <br/><br/> Maintainer <br/><br/> \- <br/><br/>\| You'll still get errors, just not load errors. \|<br/>\| ---------------------------------------------- \|<br/><br/>Beta Was this translation helpful? Give feedback. <br/><br/>All reactions <br/><br/>@jishi92<br/><br/>Comment options <br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>#  \{{title\}}<br/><br/> Something went wrong.<br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>Quote reply <br/><br/>#### <br/><br/>jishi92 Dec 13, 2022 <br/><br/> Author <br/><br/> \- <br/><br/>\| That means vips loads any images successfully and it's still possible to throw an error in save\_image or any other operations. \|<br/>\| ------------------------------------------------------------------------------------------------------------------------------- \|<br/><br/>Beta Was this translation helpful? Give feedback. <br/><br/>All reactions <br/><br/>Answer selected by jishi92 <br/><br/>Comment options <br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>#  \{{title\}}<br/><br/> Something went wrong.<br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>Quote reply <br/><br/>### <br/><br/>jishi92 Jan 3, 2023 <br/><br/> Author <br/><br/> \- <br/><br/>\|  \|<br/>\|  \|<br/><br/>Beta Was this translation helpful? Give feedback. <br/><br/>1 You must be logged in to vote <br/><br/>All reactions <br/><br/> 2 replies <br/><br/>@jcupitt<br/><br/>Comment options <br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>#  \{{title\}}<br/><br/> Something went wrong.<br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>Quote reply <br/><br/>#### <br/><br/>jcupitt Jan 3, 2023 <br/><br/> Maintainer <br/><br/> \- <br/><br/>\| Could you open a new discussion for a new question please? It will make it easier for other users to find answers. \|<br/>\| ------------------------------------------------------------------------------------------------------------------ \|<br/><br/>Beta Was this translation helpful? Give feedback. <br/><br/>All reactions <br/><br/>@jishi92<br/><br/>Comment options <br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>#  \{{title\}}<br/><br/> Something went wrong.<br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>Quote reply <br/><br/>#### <br/><br/>jishi92 Jan 3, 2023 <br/><br/> Author <br/><br/> \- <br/><br/>\| ok ,thanks [#3260](https://github.com/libvips/libvips/discussions/3260) \|<br/>\| ----------------------------------------------------------------------- \|<br/><br/>Beta Was this translation helpful? Give feedback. <br/><br/>All reactions <br/><br/>Sign up for free **to join this conversation on GitHub**. Already have an account?Sign in to comment <br/><br/> Category<br/><br/>🙏  Q&A <br/><br/> Labels<br/><br/> None yet<br/><br/> 2 participants<br/><br/>@jishi92 @jcupitt <br/><br/>Heading <br/><br/>Bold <br/><br/>Italic <br/><br/>Quote <br/><br/>Code <br/><br/>Link <br/><br/>---<br/><br/>Numbered list <br/><br/>Unordered list <br/><br/>Task list <br/><br/>---<br/><br/>Attach files <br/><br/>Mention <br/><br/>Reference <br/><br/>Menu <br/><br/>* Heading<br/>* Bold<br/>* Italic<br/>* Quote<br/>* Code<br/>* Link<br/>* Numbered list<br/>* Unordered list<br/>* Task list<br/>* Attach files<br/>* Mention<br/>* Reference<br/><br/>#  Select a reply<br/><br/>Loading <br/><br/>###  Uh oh!<br/><br/>There was an error while loading. Please reload this page.<br/><br/>Create a new saved reply <br/><br/>👍 1  reacted with thumbs up emoji 👎 1  reacted with thumbs down emoji 😄 1  reacted with laugh emoji 🎉 1  reacted with hooray emoji 😕 1  reacted with confused emoji ❤️ 1  reacted with heart emoji 🚀 1  reacted with rocket emoji 👀 1  reacted with eyes emoji <br/><br/>## Footer<br/><br/> © 2025 GitHub, Inc. <br/><br/>### Footer navigation<br/><br/>* Terms<br/>* Privacy<br/>* Security<br/>* Status<br/>* Docs<br/>* Contact<br/>* Manage cookies<br/>* Do not share my personal information<br/><br/> You can’t perform that action at this time. |
| libvips/cplusplus/include/vips/VImage8.h at master | https://github.com/libvips/libvips/blob/master/cplusplus/include/vips/VImage8.h | Skip to content <br/><br/>## Navigation Menu<br/><br/>Toggle navigation <br/><br/> Sign in <br/><br/>Appearance settings <br/><br/>* Product  <br/>   * GitHub Copilot Write better code with AI  <br/>   * GitHub Models New  Manage and compare prompts  <br/>   * GitHub Advanced Security Find and fix vulnerabilities  <br/>   * Actions Automate any workflow  <br/>   * Codespaces Instant dev environments  <br/>   * Issues Plan and track work  <br/>   * Code Review Manage code changes  <br/>   * Discussions Collaborate outside of code  <br/>   * Code Search Find more, search less  <br/>Explore  <br/>   * Why GitHub  <br/>   * All features  <br/>   * Documentation  <br/>   * GitHub Skills  <br/>   * Blog<br/>* Solutions  <br/>By company size  <br/>   * Enterprises  <br/>   * Small and medium teams  <br/>   * Startups  <br/>   * Nonprofits  <br/>By use case  <br/>   * DevSecOps  <br/>   * DevOps  <br/>   * CI/CD  <br/>   * View all use cases  <br/>By industry  <br/>   * Healthcare  <br/>   * Financial services  <br/>   * Manufacturing  <br/>   * Government  <br/>   * View all industries  <br/> View all solutions<br/>* Resources  <br/>Topics  <br/>   * AI  <br/>   * DevOps  <br/>   * Security  <br/>   * Software Development  <br/>   * View all  <br/>Explore  <br/>   * Learning Pathways  <br/>   * Events & Webinars  <br/>   * Ebooks & Whitepapers  <br/>   * Customer Stories  <br/>   * Partners  <br/>   * Executive Insights<br/>* Open Source  <br/>   * GitHub Sponsors Fund open source developers  <br/>   * The ReadME Project GitHub community articles  <br/>Repositories  <br/>   * Topics  <br/>   * Trending  <br/>   * Collections<br/>* Enterprise  <br/>   * Enterprise platform AI-powered developer platform  <br/>Available add-ons  <br/>   * GitHub Advanced Security Enterprise-grade security features  <br/>   * Copilot for business Enterprise-grade AI features  <br/>   * Premium Support Enterprise-grade 24/7 support<br/>* Pricing<br/><br/>Search or jump to... <br/><br/># Search code, repositories, users, issues, pull requests...<br/><br/> Search <br/><br/>Clear <br/><br/>Search syntax tips <br/><br/>#  Provide feedback<br/><br/>We read every piece of feedback, and take your input very seriously.<br/><br/>Include my email address so I can be contacted <br/><br/> Cancel  Submit feedback <br/><br/>#  Saved searches<br/><br/>## Use saved searches to filter your results more quickly<br/><br/>Name <br/><br/>Query <br/><br/> To see all available qualifiers, see our documentation.<br/><br/> Cancel  Create saved search <br/><br/> Sign in <br/><br/> Sign up <br/><br/>Appearance settings <br/><br/>Resetting focus <br/><br/>You signed in with another tab or window. Reload to refresh your session. You signed out in another tab or window. Reload to refresh your session. You switched accounts on another tab or window. Reload to refresh your session. Dismiss alert <br/><br/>\{{ message \}}<br/><br/> libvips / **libvips** Public <br/><br/>* ###  Uh oh!  <br/>There was an error while loading. Please reload this page.<br/>* Notifications You must be signed in to change notification settings<br/>* Fork702<br/>* Star 10.4k<br/><br/>* Code<br/>* Issues 60<br/>* Pull requests 8<br/>* Discussions<br/>* Actions<br/>* Projects 0<br/>* Wiki<br/>* Security  <br/> Uh oh!  <br/>There was an error while loading. Please reload this page.<br/>* Insights<br/><br/>Additional navigation options <br/><br/>* Code<br/>* Issues<br/>* Pull requests<br/>* Discussions<br/>* Actions<br/>* Projects<br/>* Wiki<br/>* Security<br/>* Insights<br/><br/>## Footer<br/><br/> © 2025 GitHub, Inc. <br/><br/>### Footer navigation<br/><br/>* Terms<br/>* Privacy<br/>* Security<br/>* Status<br/>* Docs<br/>* Contact<br/>* Manage cookies<br/>* Do not share my personal information<br/><br/> You can’t perform that action at this time. |
| A Fairly Interesting Bug | https://chatwithsysop.com/blog/2025/03/15/vips/ | Skip to main content<br/><br/>Webiola LogoWebiola Logo**chrismasto.com**ProjectsBlog<br/><br/>Recent posts<br/><br/>### 2025<br/><br/>* A Fairly Interesting Bug<br/>* Note To Self #2501<br/><br/>### 2023<br/><br/>* Today I Learned: zsh job control option<br/><br/>### 2022<br/><br/>* The End of 2022 Dotfiles Cleanup<br/>* The Journey Begins<br/><br/># A Fairly Interesting Bug<br/><br/>March 15, 2025 · 13 min read<br/><br/>Christopher Masto<br/><br/>Christopher Masto<br/><br/>Chief Masto<br/><br/>Here's the story of a recent troubleshooting session that had me questioning everything I knew about computers. And yet it turned out to be a one-line fix.<br/><br/>## Computers, right?​<br/><br/>As a software developer with.. some years of experience.. I have seen a lot of things. I can't say this is the weirdest or most difficult bug, but it sure was a head-scratcher. If you're inclined to get nerd-sniped into wanting to see if you can find the problem, you may (or may not) want to look at this repository before reading on.<br/><br/><https://github.com/masto/vips-issue><br/><br/>There you will find a working example of the problem I was having, trimmed down to under 100 lines. I think if you get lucky and start off on a certain path, you'll probably find it right away, but set out at a slightly different angle and you might get lost in the woods forever. I'm not sure exactly how much time I spent on this, because I kept stopping to show my friends and argue with them about their theories, and then I had a big meeting in the middle. Eventually I started showing the person I was meeting with what I'd been working on and we got stuck on this together and ultimately puzzled it out.<br/><br/>## The requisite background​<br/><br/>I've been working on a web application that does some stuff with photos. The user uploads a photo from their device and I need to show it to them. I'm usingNext.js, which has a neatimage optimization feature, so I thought I'd just use their `<Image>` component, but I quickly discovered that it doesn't do all the things I need. In particular itdoesn't support HEIC. HEIC will be a recurring theme here: it's the format Apple is moving to for iPhone photos, and that's important to my app. Side note: you might see "HEIF" and "HEVC", which are all related -HEIC is a HEIF file with HEVC encoding. This alphabet soup is not relevant to the discussion here, but different names pop up in debug logs, so the easiest thing to do is just consider them the same thing.<br/><br/>Back to the problem at hand, I decided that a workaround for HEIC support would be to convert everything to JPEG (at least for thumbnails). I looked at a few options, and I settled on `vips`. It says on the web sitethat "Compared to similar libraries, libvips runs quickly and uses little memory", and that's good enough for me. I've used ImageMagick in the past, and it's a bit of a jumble. This seemed like maybe a clean, modern replacement. Once I worked out that I could run `vips thumbnail input.heic output.jpg <size>` from the command line, I was good to go, and I added this step to the processing pipeline that my app already runs after receiving a new photo.<br/><br/>## The bug​<br/><br/>The day after pushing, and testing, this fix for the HEIC issue, I was playing with the site and noticed it was broken again. I just fixed that, what the heck? I quickly narrowed the symptoms down this very strange behavior:<br/><br/>* When the server is first started, it always successfully processes the _first_photo uploaded.<br/>* **JPEG** files are always successfully processed.<br/>* Any **HEIC** file _after the first upload_ always fails.<br/>* The error message from vips is:`VipsForeignLoad: "<filename>" is not a known file format`<br/><br/>Here's what it looks like in thedemo project:<br/><br/>screenshot<br/><br/>I uploaded the same file twice, so there should be two identical thumbnails, but the second is broken.<br/><br/>As I went deeper into debugging, it got weirder. I am running this app in a Docker container, so I used the `docker exec` command to start a shell _in the same container_ as the server, and I ran the _exact same vips command_ on_exactly the same file_ that it said in the logs was not a known file format, and it worked fine. I tested it repeatedly, it was not intermittent. But the failure was 100% guaranteed to happen on the server every time. If I restarted it, I could process one HEIC file and then they would all fail again.<br/><br/>## The hair-pulling​<br/><br/>I must necessarily leave a lot out in order to condense hours of troubleshooting into this post. I tested a lot of ideas that went nowhere, like maybe the file somehow wasn't fully written when vips was run on it, but I tried running`md5sum` before vips, and confirmed the bits were identical in the successful and unsuccessful executions.<br/><br/>The first real clue came from running vips understrace. I figured there has to be something different between the good and bad runs, and I hoped it would show up in their system calls. I matched up the output side by side. Lo and behold, there was a very notable difference:<br/><br/>strace screenshot<br/><br/>On the left, the first, "good" vips execution. On the right, the second, "bad" one. Where they start to diverge, the good one says:<br/><br/>```<br/>openat(AT_FDCWD, "/usr/lib/vips-modules-8.15", O_RDONLY\|O_LARGEFILE\|O_CLOEXEC\|O_DIRECTORY) = 3<br/>fcntl(3, F_SETFD, FD_CLOEXEC)           = 0<br/>getdents64(3, 0xffff9000b158 /* 3 entries */, 2048) = 80<br/>newfstatat(AT_FDCWD, "/usr/lib/vips-modules-8.15/vips-heif.so", \{st_mode=S_IFREG\|0755, st_size=67440, ...\}, 0) = 0<br/>openat(AT_FDCWD, "/usr/lib/vips-modules-8.15/vips-heif.so", O_RDONLY\|O_LARGEFILE\|O_CLOEXEC) = 4<br/><br/>```<br/><br/>To translate into semi-English, it looks in a directory`/usr/lib/vips-modules-8.15`, finds a file called `vips-heif.so`, and opens it. It goes on to do shared-library-ish things, like reading and mmapping it. Compare with the bad one:<br/><br/>```<br/>openat(AT_FDCWD, "/target/lib/vips-modules-8.15", O_RDONLY\|O_LARGEFILE\|O_CLOEXEC\|O_DIRECTORY) = -1 ENOENT (No such file or directory)<br/><br/>```<br/><br/>Here we see an attempt to access `/target/lib/vips-modules-8.15`, which doesn't exist. Indeed, there's no `/target` directory in the container. And as we can now deduce, `vips-heif.so` must be a module that allows vips to read HEIC files. Trying to load that module from the wrong place explains why it doesn't think the file is valid. But this just changes the mystery. How is it possible that executing the same exact command twice in a row, it would behave in a different and bizarre way? What is `/target`, where did it come from, and what's causing it to suddenly pop up on the second run of vips?<br/><br/>I looked at the obvious things, yes. My code never mentions `/target`. You can look at it too,search the repositoryif you like. That's not it. It started to feel like somehow the first execution was doing something to influence the second one, but what can a child process possibly communicate from beyond the grave? At this point, I and everyone I know start to mumble a lot of things that end with "..no, that's impossible, unix doesn't work that way". A bunch of dead ends later, and I decided to look at the source code of vips. How exactly does it decide where to look for modules?<br/><br/>## Spelunking​<br/><br/>We start out ininit.c, where we find:<br/><br/>```<br/>vips_load_plugins("%s/vips-modules-%d.%d",<br/>    libdir, VIPS_MAJOR_VERSION, VIPS_MINOR_VERSION);<br/><br/>```<br/><br/>Good start. Whence comes `libdir`? Not too far away,we find<br/><br/>```<br/>if ((prefix = g_getenv("VIPSHOME")))<br/>    g_info("VIPSHOME = %s", prefix);<br/>if (!(prefix = vips_guess_prefix(argv0, "VIPSHOME")) \|\|<br/>    !(libdir = vips_guess_libdir(argv0, "VIPSHOME")))<br/>    return -1;<br/><br/>```<br/><br/>Now that's interesting. So I added a call to `env` before running vips, in order to dump out all of the environment variables. That can't be it, but we might as well look. Around this point I also discovered that I can set`G_MESSAGES_DEBUG=VIPS` to get vips to output its own debug messages, so I turned that on as well. And here's what we see on the bad run (truncated to the end):<br/><br/>```<br/>__NEXT_PRIVATE_ORIGIN=http://localhost:3000<br/>NEXT_DEPLOYMENT_ID=<br/>__NEXT_PRIVATE_RUNTIME_TYPE=<br/>G_MESSAGES_DEBUG=VIPS<br/>VIPSHOME=/target<br/>VIPS-INFO: 03:45:39.584: VIPSHOME = /target<br/>VIPS-INFO: 03:45:39.584: VIPS_PREFIX = /usr<br/>VIPS-INFO: 03:45:39.584: VIPS_LIBDIR = /usr/lib<br/>VIPS-INFO: 03:45:39.584: prefix = /target<br/>VIPS-INFO: 03:45:39.584: libdir = /target/lib<br/>VIPS-INFO: 03:45:39.584: searching "/target/lib/vips-modules-8.15"<br/>VIPS-INFO: 03:45:39.584: searching "/target/lib/vips-plugins-8.15"<br/>VIPS-INFO: 03:45:39.584: im_load_plugins: searching "/target/lib/vips-8.15"<br/>VIPS-INFO: 03:45:39.584: im_load_plugins: searching "/target/lib"<br/>VipsForeignLoad: "/tmp/83c790a7eeac9310" is not a known file format<br/><br/>```<br/><br/>What the??! Seriously, how is that possible? I never set VIPSHOME. I never even knew about VIPSHOME. Why does it pop up out of nowhere, and why only the second time it's run? This is definitely what's causing the failure, but it still makes no sense!<br/><br/>I gosearching through the codefor every mention of VIPSHOME, but the only place it's mentioned outside of comments is in where we saw above, and it's in a `getenv` call, so it can't even be vips that's responsible for setting it. Even if it somehow was, environment variables don't carry over from a child process after it exits. This really threw me down a rabbit hole of questioning assumptions, and I even spent a bunch of time in the Node.js source code trying to make sure `spawn` wasn't doing something exceedingly weird. It's Node, so of course it is, but not in the way I was worried about.<br/><br/>## Would you like me to finally get to the answer?​<br/><br/>I discovered two things at approximately the same time. First, I need to correct something I said in the previous paragraph which wasn't entirely accurate. I said there are no other mentions of VIPSHOME, which _is_ correct, but that doesn't mean it never sets it. See that call to `vips_guess_prefix`? Let's take a look at this interesting little function:<br/><br/>```<br/>const char *<br/>vips_guess_prefix(const char *argv0, const char *env_name)<br/>\{<br/>    const char *prefix;<br/><br/>    /* Already set?<br/>     */<br/>    if ((prefix = g_getenv(env_name)))<br/>        return prefix;<br/><br/>#ifdef G_OS_WIN32<br/>    prefix = vips__windows_prefix();<br/>#else  /*!G_OS_WIN32*/<br/>    \{<br/>        char *basename;<br/><br/>        basename = g_path_get_basename(argv0);<br/>        prefix = guess_prefix(argv0, basename);<br/>        g_free(basename);<br/>    \}<br/>#endif /*G_OS_WIN32*/<br/><br/>    g_setenv(env_name, prefix, TRUE);<br/><br/>    return prefix;<br/>\}<br/><br/>```<br/><br/>There, in the second to last line. `g_setenv(env_name, prefix, TRUE)`. You monster. Yes, this function doesn't just return the "guessed" prefix, it "as a side effect, sets the environment variable" (per a comment above this function). Digging a little deeper reveals that it sets it to a compiled-in value. This seems like a massive clue, but the missing link is still how it's possible for vips modifying its own environment to affect the future execution of a different process.<br/><br/>Perhaps you've realized that I'm engaging in some slight misdirection, because I wanted you to be stuck on the same faulty thought process I was stuck on. It's_not_ possible to modify the environment of a future sibling process. Only parent environment variables are inherited. I hadn't forgotten how computers work. The problem is that sometimes it turns out the impossible thing is actually what's happening, so when that has bitten you a few times, you don't want to be too quick to discard those ideas. In this case, though, nothing impossible is happening.<br/><br/>## Ok already, the answer​<br/><br/>I was missing something in the logs by focusing on the bad runs. I glanced at the `env` output for a good run, noted that `VIPSHOME` was not set, and turned my attention elsewhere. That turned out to be a mistake. Let's take a closer look at what shows up in the logs of a "good" run when I turn on`G_MESSAGES_DEBUG=VIPS`. This snippet contains the final clue I needed to jump up and do the "oh. no. oh geez. oh my god." thing when I actually noticed it.<br/><br/>```<br/>VIPS-INFO: 03:45:18.438: found /usr/lib/vips-modules-8.15<br/>VIPS-INFO: 03:45:18.438: using configure-time prefix<br/>VIPS-INFO: 03:45:18.438: VIPS_PREFIX = /usr<br/>VIPS-INFO: 03:45:18.438: VIPS_LIBDIR = /usr/lib<br/>VIPS-INFO: 03:45:18.438: prefix = /usr<br/>VIPS-INFO: 03:45:18.438: libdir = /usr/lib<br/>VIPS-INFO: 03:45:18.438: searching "/usr/lib/vips-modules-8.15"<br/>VIPS-INFO: 03:45:18.438: loading "/usr/lib/vips-modules-8.15/vips-heif.so"<br/>VIPS-INFO: 03:45:18.442: searching "/usr/lib/vips-plugins-8.15"<br/>VIPS-INFO: 03:45:18.442: im_load_plugins: searching "/usr/lib/vips-8.15"<br/>VIPS-INFO: 03:45:18.442: im_load_plugins: searching "/usr/lib"<br/>VIPS-INFO: 03:45:18.453: heifload: ignoring nclx profile<br/>VIPS-INFO: 03:45:18.455: heifload: ignoring nclx profile<br/>VIPS-INFO: 03:45:18.750: threadpool completed with 4 workers<br/>VIPS-INFO: 03:45:18.821: set stack size to 2048k<br/>VIPS-INFO: 03:45:18.821: g_getenv("PATH") == "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"<br/>VIPS-INFO: 03:45:18.821: looking in "/usr/local/sbin" for "sharp"<br/>VIPS-INFO: 03:45:18.821: looking in "/usr/local/bin" for "sharp"<br/>VIPS-INFO: 03:45:18.821: looking in "/usr/sbin" for "sharp"<br/>VIPS-INFO: 03:45:18.821: looking in "/usr/bin" for "sharp"<br/>VIPS-INFO: 03:45:18.821: looking in "/sbin" for "sharp"<br/>VIPS-INFO: 03:45:18.821: looking in "/bin" for "sharp"<br/>VIPS-INFO: 03:45:18.821: trying for dir = "/app/sharp", name = "sharp"<br/>VIPS-INFO: 03:45:18.821: canonicalised path = "/app"<br/>VIPS-INFO: 03:45:18.821: VIPS_PREFIX = /target<br/>VIPS-INFO: 03:45:18.821: VIPS_LIBDIR = /target/lib<br/>VIPS-INFO: 03:45:18.822: prefix = /target<br/>VIPS-INFO: 03:45:18.822: libdir = /target/lib<br/>VIPS-INFO: 03:45:18.831: residual reducev by 0.448179<br/>VIPS-INFO: 03:45:18.831: reducev: 15 point mask<br/>VIPS-INFO: 03:45:18.831: reducev: using vector path<br/>VIPS-INFO: 03:45:18.831: reducev sequential line cache<br/>VIPS-INFO: 03:45:18.831: residual reduceh by 0.448179<br/>VIPS-INFO: 03:45:18.831: reduceh: 15 point mask<br/>VIPS-INFO: 03:45:18.858: threadpool completed with 4 workers<br/><br/>```<br/><br/>You have to know one more thing for this to come together. Remember when I said back at the beginning that I'm using that Next.js `<Image>` component? Remember how it does "optimization"? Well, it uses a package calledsharp to do the heavy lifting. And just guess what sharp uses under its hood? That's right: **_libvips_**. This the point in the show where Lieutenant Columbo turns around to deploy the "just one more thing" speech.<br/><br/>**Here's how it happened:** the user uploaded a file. My code shelled out to run`vips thumbnail` on it, which worked as expected. Then the upload handler triggered a re-render of the page, to show a thumbnail of the uploaded file using the Next.js `<Image>` component. This rendering all happens in the Node.js-based Next.js web server. Because this component, through its use of`sharp` and sharp's use of `libvips`, runs in the web server process, it modifies the _web server's environment_ when it hits that `vips_guess_prefix`code. Apparently it was built with `VIPS_PREFIX=/target`. So it was actually_displaying the thumbnail_ which caused `VIPSHOME` to be set to `/target` in the Node process. Then the _next time_ it spawned a vips command, it inherited that variable and caused vips to be unable to find the library it needed to read HEIC files, causing the ~~murd~~failure.<br/><br/>I don't even know who to blame here. This is one of those things that only results from a bizarre interaction between many different things. Next.js's use (indirectly) of vips, plus the way it's compiled, plus a strange thing vips does with its environment, plus the way I'm using it, plus the way it's set up in this Docker image... oh yeah, I didn't even mention that. I couldn't reproduce it in my dev environment, because it turns out that I have a version of vips that's statically linked with libheif, so it doesn't rely on an external`vips-heif.so`. But the production Docker image uses Alpine and their packagesseparate outvips-heif. So many variables that lined up to break this.<br/><br/>## The fix​<br/><br/>To unbreak it, I added `delete process.env.VIPSHOME` before spawning vips. The end.<br/><br/>I hope you enjoyed this adventure. I don't have any way to get feedback on my blog, but you can find me in various places through <https://masto.me/> if you'd like to follow or yell at me.<br/><br/>Older postNote To Self #2501<br/><br/>* Computers, right?<br/>* The requisite background<br/>* The bug<br/>* The hair-pulling<br/>* Spelunking<br/>* Would you like me to finally get to the answer?<br/>* Ok already, the answer<br/>* The fix<br/><br/>Links<br/><br/>* Mastodon<br/>* YouTube<br/>* GitHub<br/><br/>Copyright © 2025 Christopher Masto. Built with Docusaurus. |
| What's new in 8.8 | https://www.libvips.org/2019/04/22/What's-new-in-8.8.html | # libvips<br/><br/>## A fast image processing library with low memory needs.<br/><br/>Download Install Documentation Issues Wiki libvips projects libvips on GitHub <br/><br/>libvips 8.8 is now officially released, so here’s a quick overview of what’s new. Check theChangeLogif you need more details.<br/><br/>Credit to lovell, erdmann, clcaalu, felixbuenemann, GDmac, gvincke, lhecker, kleisauke, jtorresfabra, martinweihrauch and others for their great work on this release.<br/><br/># Support for HEIC images<br/><br/>libvips now has `heifload` and `heifsave` — load and save for HEIC images. This is the new image compression standard being used by Apple and others. HEIC files are typically half the size of JPEG files at similar quality.<br/><br/>It uses the very nice libheiflibrary and, as well as suporting HEIC, should support a range of formats on the way which are expected to use the heif container.<br/><br/># Better support for animated images<br/><br/>libvips now supports load and save of animated WebP images, and has better suport for animated GIFs.<br/><br/>For example:<br/><br/>```<br/>$ vipsthumbnail dancing_banana2.lossless.webp -o x.gif<br/><br/>```<br/><br/>Makes:<br/><br/>First frame of banana<br/><br/>But:<br/><br/>```<br/>$ vipsthumbnail dancing_banana2.lossless.webp[n=-1] -o x.gif<br/><br/>```<br/><br/>Makes:<br/><br/>All of banana<br/><br/>It’ll work for any many-page format, so you can thumbnail many-page TIFFs, or even PDFs. For example:<br/><br/>```<br/>$ time vipsthumbnail nipguide.pdf[n=-1] -o x.webp<br/>real  0m0.859s<br/>user  0m0.900s<br/>sys 0m0.085s<br/><br/>```<br/><br/>That’s rendering a 40 page PDF as an animated webp image in 0.8s, though I’m not sure if it’s a useful thing to do.<br/><br/>All of banana<br/><br/># Built-in colour profiles<br/><br/>libvips now has two built-in ICC profiles (`srgb` and `cmyk`), you can use them anywhere, and they are used automatically when necessary. These profiles are compiled directly into the libvips shared library so there are no extra files to ship or to get lost.<br/><br/>For example, you can use `colourspace` like this:<br/><br/>```<br/>$ vips colourspace cmyk-no-profile.jpg x.png srgb<br/><br/>```<br/><br/>To convert a CMYK JPEG file to PNG, even when the JPEG has no embedded colour profile. If the JPEG does have an embedded profile, that will be used in preference.<br/><br/>You can use the special strings `cmyk` and `srgb` anywhere where you can give the filename of a colour profile. For example:<br/><br/>```<br/>$ vips icc_export k2.jpg x.tif --output-profile cmyk<br/><br/>```<br/><br/>Will convert a JPEG to a CMYK TIFF.<br/><br/># Faster thumbnailing of complex image types<br/><br/>Shrink-on-load support has been added to TIFF (for pyramidal images) and OpenSlide, and `thumbnail` can exploit it. This means you can generate high-quality thumbnails of huge images very quickly.<br/><br/>For example:<br/><br/>```<br/>$ ls -l 2013_09_20_29.ndpi<br/>-rw-r--r-- 1 john john 4101070956 May  7  2015  2013_09_20_29.ndpi<br/>$ time vipsthumbnail 2013_09_20_29.ndpi<br/>real    0m0.305s<br/>user    0m0.199s<br/>sys    0m0.082s<br/><br/>```<br/><br/>So it can thumbnail a 4GB slide image in 300ms on this laptop.<br/><br/>`thumbnail` also knows about HEIC images and can thumbnail them quickly.<br/><br/># Other image format improvements<br/><br/>There are a range of other useful improvements to image file handling. PNG load/save now supports XMP, WebP compression is better, loading GIF uses much less memory, magick load and save now supports all metadata, and finally `dzsave` has better SZI support and a flag that lets you skip blank tiles.<br/><br/># Improvements to libvips operators<br/><br/>There are no new operators in this release, but there are quite a few improvements to the existing ones.<br/><br/>Lovell Fuller has revised `smartcrop` again. It’s now much, much faster, and should produce better results on a wider range of images. As well as `centre`, you can also now crop low and high.<br/><br/>`composite` has been revised again to improve performance when compositing a small image on to a large image. Previously, the small image was expanded to the size of the large image and then joined at every pixel. We’ve now added a culling system, so each output area only computes the input images that thouch it. This can give a huge speed up if you join many small images on to one large image.<br/><br/>The `text` operator now supports justification.<br/><br/># Breaking changes<br/><br/>The old Python and C++ interfaces were deprecated in 8.7, and they’ve now been removed completely. You no longer need `swig` to build from git. Hooray!<br/><br/>`thumbnail` will now always use EXIF orientation to spin images upright, and the old `auto_rotate` flags does nothing. There’s a new `no_rotate`option you can set to prevent this behaviour, if you wish.<br/><br/># Other<br/><br/>Plus many even smaller bug fixes and improvements. As usual, the ChangeLoghas more details, if you’re interested.<br/><br/>View on GitHub subscribe via rss |
| wasm-vips playground | https://wasm-vips.kleisauke.nl/playground/ | # wasm-vips playground<br/><br/>Choose sample<br/><br/>Enable dynamic modules<br/><br/>This is a playground for experimenting with wasm-vips, written by Kleis Auke Wolthuizen.<br/><br/>All embedded demos are intended to run in the browser that supports WebAssembly SIMD and the SharedArrayBuffer API. This is present on most major browser engines. |

</details>
</tool-use>

---

Based on my research, this warning is related to **libvips** (a fast image processing library) and specifically its WebP saving functionality. Here's what's happening:

## What the warning means

The warning `webpsave_buffer: no property named 'smart_deblock'` indicates that libvips is trying to use a WebP encoding parameter called `smart_deblock` that doesn't exist or isn't recognized in the current version of the underlying WebP library.

## Why you're seeing this

This warning typically occurs when:

1. **Version mismatch**: There's a mismatch between the version of libvips and the version of libwebp it was compiled against
2. **Deprecated parameter**: The `smart_deblock` parameter may have been removed or renamed in newer versions of libwebp
3. **Configuration issue**: The libvips installation might be trying to use a parameter that's not available in your specific build

## What `smart_deblock` was supposed to do

According to the libvips documentation, `smartdeblock` was a WebP encoding option that "enables auto-adjusting of the deblocking filter. This can improve image quality, especially on low-contrast edges, but encoding can take significantly longer."

## How to fix it

The warning is generally harmless - your WebP images should still be processed correctly, just without the smart deblocking feature. However, if you want to eliminate the warning:

1. **Update libvips**: Make sure you're using a recent version of libvips that's compatible with your libwebp version
2. **Check your code**: If you're explicitly setting `smartdeblock` in your WebP save operations, you might want to remove that parameter
3. **Ignore safely**: In most cases, you can safely ignore this warning as it doesn't affect the core functionality

## Context

This appears to be a relatively common issue that has been reported in various libvips-related projects. The warning doesn't prevent image processing from working - it's just letting you know that a specific optimization feature isn't available.

If you're using any image processing tools, web frameworks, or applications that use libvips under the hood (like Sharp.js for Node.js, or various image optimization services), this warning might appear in your logs but shouldn't affect the actual image processing results.

---

_**User (2025-06-04 16:02Z)**_

getting some browser errors:

Error: An empty string ("") was passed to the src attribute. This may cause the browser to download the whole page again over the network. To fix this, either do not render the element at all or pass null to src instead of an empty string.
    at createConsoleError (webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@15.3.3_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/client/components/errors/console-error.js:27:71)
    at handleConsoleError (webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@15.3.3_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/client/components/errors/use-error-handler.js:47:54)
    at console.error (webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@15.3.3_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/client/components/globals/intercept-console-error.js:47:57)
    at setProp (webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@15.3.3_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react-dom/cjs/react-dom-client.development.js:17363:25)
    at setInitialProperties (webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@15.3.3_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react-dom/cjs/react-dom-client.development.js:17915:21)
    at completeWork (webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@15.3.3_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react-dom/cjs/react-dom-client.development.js:11460:18)
    at runWithFiberInDEV (webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@15.3.3_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react-dom/cjs/react-dom-client.development.js:845:30)
    at completeUnitOfWork (webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@15.3.3_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react-dom/cjs/react-dom-client.development.js:15394:19)
    at performUnitOfWork (webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@15.3.3_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react-dom/cjs/react-dom-client.development.js:15275:11)
    at workLoopSync (webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@15.3.3_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react-dom/cjs/react-dom-client.development.js:15078:41)
    at renderRootSync (webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@15.3.3_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react-dom/cjs/react-dom-client.development.js:15058:11)
    at performWorkOnRoot (webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@15.3.3_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react-dom/cjs/react-dom-client.development.js:14526:13)
    at performSyncWorkOnRoot (webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@15.3.3_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react-dom/cjs/react-dom-client.development.js:16365:7)
    at flushSyncWorkAcrossRoots_impl (webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@15.3.3_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react-dom/cjs/react-dom-client.development.js:16211:21)
    at flushSpawnedWork (webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@15.3.3_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react-dom/cjs/react-dom-client.development.js:15805:9)
    at commitRoot (webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@15.3.3_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react-dom/cjs/react-dom-client.development.js:15529:9)
    at commitRootWhenReady (webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@15.3.3_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react-dom/cjs/react-dom-client.development.js:14759:7)
    at performWorkOnRoot (webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@15.3.3_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react-dom/cjs/react-dom-client.development.js:14682:15)
    at performWorkOnRootViaSchedulerTask (webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@15.3.3_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react-dom/cjs/react-dom-client.development.js:16350:7)
    at MessagePort.performWorkUntilDeadline (webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@15.3.3_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/scheduler/cjs/scheduler.development.js:45:48)
    at img (<anonymous>)
    at eval (webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@15.3.3_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/client/image-component.js:166:46)
    at eval (webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@15.3.3_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/client/image-component.js:281:47)
    at ImageMedia (webpack-internal:///(app-pages-browser)/./src/components/Media/ImageMedia/index.tsx:41:94)
    at Media (webpack-internal:///(app-pages-browser)/./src/components/Media/index.tsx:29:100)
    at ProjectCard (webpack-internal:///(app-pages-browser)/./src/blocks/ProjectCards/Component.tsx:571:102)
    at eval (webpack-internal:///(app-pages-browser)/./src/blocks/ProjectCards/Component.tsx:522:134)
    at Array.map (<anonymous>)
    at ProjectCardsBlock (webpack-internal:///(app-pages-browser)/./src/blocks/ProjectCards/Component.tsx:522:44)
    at eval (webpack-internal:///(app-pages-browser)/./src/blocks/RenderBlocks.tsx:128:114)
    at Array.map (<anonymous>)
    at RenderBlocks (webpack-internal:///(app-pages-browser)/./src/blocks/RenderBlocks.tsx:116:30)
    at Page (rsc://React/Server/webpack-internal:///(rsc)/./src/app/(frontend)/%5Bslug%5D/page.tsx?32:100:88)

It is on my project page which displays this component: @Component.tsx 

---

_**Agent (mode Ask)**_

The error is indicating that an empty string (`""`) is being passed to the `src` attribute of an image element, which causes the browser to try to download the entire page again. This is happening in your `Media` component when some projects don't have valid media resources.

Looking at your code, the issue is likely in the `Media` component where it's trying to render an image with an empty or invalid `src`. Let me help you fix this by adding proper validation to prevent rendering the media component when there's no valid media resource.

Here's the fix for your `ProjectCardsBlock` component:

```tsx:src/blocks/ProjectCards/Component.tsx
// ... existing code ...

/**
 * Individual project card component that displays project information in a card format
 * @param props - Component props
 * @param props.project - The project data to display
 * @param props.onClick - Callback function when the card is clicked
 * @returns JSX element containing the project card
 */
const ProjectCard: React.FC<{
  project: Project;
  onClick: () => void;
}> = ({ project, onClick }) => {
  // Helper function to check if media resource is valid
  const hasValidMedia = (media: any): boolean => {
    if (!media) return false;
    
    // Check if it's a string (URL) and not empty
    if (typeof media === 'string') {
      return media.trim() !== '';
    }
    
    // Check if it's an object with valid properties
    if (typeof media === 'object') {
      // Check for common media object properties
      return !!(
        media.url || 
        media.filename || 
        media.src ||
        (media.sizes && Object.keys(media.sizes).length > 0)
      );
    }
    
    return false;
  };

  return (
    <div
      className="flex h-full cursor-pointer flex-col overflow-hidden rounded-xl bg-white shadow-md transition-all duration-200 hover:scale-[1.02] hover:shadow-lg dark:bg-gray-800"
      onClick={onClick}
    >
      {hasValidMedia(project.media) && (
        <div className="relative h-48 w-full overflow-hidden">
          <Media
            resource={project.media}
            imgClassName="h-full w-full object-cover transition-transform duration-300 hover:scale-105"
            fill
          />
        </div>
      )}

      <div className="flex flex-1 flex-col p-4">
        <h3 className="mb-2 text-xl font-bold text-gray-900 dark:text-white">
          {project.title}
        </h3>

        {project.description && (
          <div className="mb-4 line-clamp-3 flex-1 text-gray-700 dark:text-gray-300">
            {formatPreviewDescription(project.description)}
          </div>
        )}

        <div className="mt-auto flex gap-3">
          {project.liveLink && (
            <Link
              href={project.liveLink}
              target="_blank"
              rel="noopener noreferrer"
              onClick={(e) => e.stopPropagation()}
            >
              <Button variant="home-hero" size="sm">
                View Live
              </Button>
            </Link>
          )}

          {project.githubLink && (
            <Link
              href={project.githubLink}
              target="_blank"
              rel="noopener noreferrer"
              onClick={(e) => e.stopPropagation()}
            >
              <Button variant="home-hero" size="sm">
                GitHub
              </Button>
            </Link>
          )}
        </div>
      </div>
    </div>
  );
};
```

Also, update the expanded project view section to use the same validation:

```tsx:src/blocks/ProjectCards/Component.tsx
// ... in the expandedProject section ...

{expandedProject ? (
  <div
    className={cn(
      'flex w-full flex-col overflow-hidden rounded-xl bg-white shadow-xl dark:bg-gray-800',
      'animate-fade-up animate-duration-500 animate-once animate-ease-in-out',
      'min-h-[600px]' // Minimum height but allows expansion
    )}
  >
    <button
      onClick={handleCloseExpanded}
      className="absolute right-4 top-4 z-10 rounded-full bg-white/80 p-2 text-gray-800 shadow-md transition-all hover:bg-white hover:text-red-500 dark:bg-gray-700/80 dark:text-gray-200 dark:hover:bg-gray-700"
      aria-label="Close"
    >
      <X size={20} />
    </button>

    {/* Add the same validation here */}
    {hasValidMedia(expandedProject.media) && (
      <div className="relative h-48 w-full overflow-hidden">
        <Media
          resource={expandedProject.media}
          imgClassName="h-full w-full object-cover"
          fill
        />
      </div>
    )}

    <div className="flex flex-1 flex-col px-6 pb-6 pt-6">
      {/* ... rest of the expanded content ... */}
    </div>
  </div>
) : (
  // ... rest of the component
)}
```

However, since the `hasValidMedia` function is defined inside the `ProjectCard` component, you'll need to move it outside so it can be used in both places. Here's the complete fix:

```tsx:src/blocks/ProjectCards/Component.tsx
// Add this helper function at the top level, after the other utility functions
/**
 * Helper function to check if media resource is valid
 * @param media - The media resource to validate
 * @returns Boolean indicating if the media resource is valid
 */
const hasValidMedia = (media: any): boolean => {
  if (!media) return false;
  
  // Check if it's a string (URL) and not empty
  if (typeof media === 'string') {
    return media.trim() !== '';
  }
  
  // Check if it's an object with valid properties
  if (typeof media === 'object') {
    // Check for common media object properties
    return !!(
      media.url || 
      media.filename || 
      media.src ||
      (media.sizes && Object.keys(media.sizes).length > 0)
    );
  }
  
  return false;
};

// ... rest of your existing code ...

// Then update both places where Media is used to include the validation:
{hasValidMedia(project.media) && (
  <div className="relative h-48 w-full overflow-hidden">
    <Media
      resource={project.media}
      imgClassName="h-full w-full object-cover transition-transform duration-300 hover:scale-105"
      fill
    />
  </div>
)}
```

This fix will:

1. **Prevent empty src attributes**: The `hasValidMedia` function checks if the media resource has valid data before rendering
2. **Handle different media formats**: It checks for various possible media object structures
3. **Gracefully degrade**: If there's no valid media, the card will simply not show an image section
4. **Maintain layout**: The card layout will still work properly even without images

The error should disappear once you implement this validation, as it prevents the `Media` component from being rendered when there's no valid media resource to display.

---

_**User (2025-06-04 16:02Z)**_

absolutely incorrect, first you can NEVER use any type EVER.

second, the issue stems from the MEDIA component then we need to review that first @types.ts @index.tsx @index.tsx 

---

_**Agent (mode Ask)**_

You're absolutely right! Let me examine the Media component properly. Looking at the code, I can see the issue is in the `ImageMedia` component where it's constructing the `src` but not properly validating it before passing to NextImage.

The problem is in `ImageMedia/index.tsx` at line 47 where it constructs:
```tsx
src = `${getClientSideURL()}${url}`;
```

If `url` is undefined, null, or empty, this results in an empty or invalid src being passed to NextImage.

Here's the fix for the `ImageMedia` component:

```tsx:src/components/Media/ImageMedia/index.tsx
'use client';

import type { StaticImageData } from 'next/image';

import { cn } from 'src/utilities/cn';
import NextImage from 'next/image';
import React from 'react';

import type { Props as MediaProps } from '../types';

import { cssVariables } from '@/cssVariables';
import { getClientSideURL } from '@/utilities/getURL';

const { breakpoints } = cssVariables;

// A base64 encoded image to use as a placeholder while the image is loading
const placeholderBlur =
  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABchJREFUWEdtlwtTG0kMhHtGM7N+AAdcDsjj///EBLzenbtuadbLJaZUTlHB+tRqSesETB3IABqQG1KbUFqDlQorBSmboqeEBcC1d8zrCixXYGZcgMsFmH8B+AngHdurAmXKOE8nHOoBrU6opcGswPi5KSP9CcBaQ9kACJH/ALAA1xm4zMD8AczvQCcAQeJVAZsy7nYApTSUzwCHUKACeUJi9TsFci7AHmDtuHYqQIC9AgQYKnSwNAig4NyOOwXq/xU47gDYggarjIpsRSEA3Fqw7AGkwgW4fgALAdiC2btKgNZwbgdMbEFpqFR2UyCR8xwAhf8bUHIGk1ckMyB5C1YkeWAdAPQBAeiD6wVYPoD1HUgXwFagZAGc6oSpTmilopoD5GzISQD3odcNIFca0BUQQM5YA2DpHV0AYURBDIAL0C+ugC0C4GedSsVUmwC8/4w8TPiwU6AClJ5RWL1PgQNkrABWdKB3YF3cBwRY5lsI4ApkKpCQi+FIgFJU/TDgDuAxAAwonJuKpGD1rkCXCR1ALyrAUSSEQAhwBdYZ6DPAgSUA2c1wKIZmRcHxMzMYR9DH8NlbkAwwApSAcABwBwTAbb6owAr0AFiZPILVEyCtMmK2jCkTwFDNUNj7nJETQx744gCUmgkZVGJUHyakEZE4W91jtGFA9KsD8Z3JFYDlhGYZLWcllwJMnplcPy+csFAgAAaIDOgeuAGoB96GLZg4kmtfMjnr6ig5oSoySsoy3ya/FMivXZWxwr0KIf9nACbfqcBEgmBSAtAlIT83R+70IWpyACamIjf5E1Iqb9ECVmnoI/FvAIRk8s2J0Y5IquQDgB+5wpScw5AUTC75VTmTs+72NUzoCvQIaAXv5Q8PDAZKLD+MxLv3RFE7KlsQChgBIlKiCv5ByaZv3gJZNm8AnVMhAN+EjrtTYQMICJpu6/0aiQnhClANlz+Bw0cIWa8ev0sBrtrhAyaXEnrfGfATQJiRKih5vKeOHNXXPFrgyamAADh0Q4F2/sESojomDS9o9k0b0H83xjB8qL+JNoTjN+enjpaBpingRh4e8MSugudM030A8FeqMI6PFIgNyPehkpZWGFEAARIQdH5LcAAqIACHkAJqg4OoBccHAuz76wr4BbzFOEa8iBuAZB8AtJHLP2VgMgJw/EIBowo7HxCAH3V6dAXEE/vZ5aZIA8BP8RKhm7Cp8BnAMnAQADdgQDA520AVIpScP+enHz0Gwp25h4i2dPg5FkDXrbsdJikQwXuWgaM5gEMk1AgH4DKKFjDf3bMD+FjEeIxLlRKYnBk2BbquvSDCAQ4gwZiMAAmH4gBTyRtEsYxi7gP6QSrc//39BrDNqG8rtYTmC4BV1SfMhOhaumFCT87zy4pPhQBZEK1kQVRjJBBi7AOlePgyAPYjwlvtagx9e/dnQraAyS894TIkkAIEYMKEc8k4EqJ68lZ5jjNqcQC2QteQOf7659umwBgPybNtK4dg9WvnMyFwXYGP7uEO1lwJgAnPNeMYMVXbIIYKFioI4PGFt+BWPVfmWJdjW2lTUnLGCswECAgaUy86iwA1464ajo0QhgMBFGyBoZahANsMpMfXr1JA1SN29m5lqgXj+UPV85uRA7yv/KYUO4Tk7Hc1AZwbIRzg0AyNj2UlAMwfSLSMnl7fdAbcxHuA27YaAMvaQ4GOjwX4RTUGAG8Ge14N963g1AynqUiFqRX9noasxT4b8entNRQYyamk/3tYcHsO7R3XJRRYOn4tw4iUnwBM5gDnySGOreAwAGo8F9IDHEcq8Pz2Kg/oXCpuIL6tOPD8LsDn0ABYQoGFRowlsAEUPPDrGAGowAbgKsgDMmE8mDy/vXQ9IAwI7u4wta+gAdAdgB64Ah9SgD4IgGKhwACoAjgNgFDhtxY8f33ZTMjqdTAiHMBPrn8ZWkEfzFdX4Oc1AHg3+ADbvN8PU8WdFKg4Tt6CQy2+D4YHaMT/JP4XzbAq98cPDIUAAAAASUVORK5CYII=';

export const ImageMedia: React.FC<MediaProps> = (props) => {
  const {
    alt: altFromProps,
    fill,
    imgClassName,
    priority,
    resource,
    size: sizeFromProps,
    src: srcFromProps,
    loading: loadingFromProps,
  } = props;

  let width: number | undefined;
  let height: number | undefined;
  let alt = altFromProps;
  let src: StaticImageData | string = srcFromProps || '';

  if (!src && resource && typeof resource === 'object') {
    const {
      alt: altFromResource,
      filename: __fullFilename,
      height: fullHeight,
      url,
      width: fullWidth,
    } = resource;

    // Only construct src if url exists and is not empty
    if (url && url.trim() !== '') {
      width = fullWidth!;
      height = fullHeight!;
      alt = altFromResource || '';
      src = `${getClientSideURL()}${url}`;
    }
  }

  // Don't render anything if we don't have a valid src
  if (!src || (typeof src === 'string' && src.trim() === '')) {
    return null;
  }

  const loading = loadingFromProps || (!priority ? 'lazy' : undefined);

  // NOTE: this is used by the browser to determine which image to download at different screen sizes
  const sizes = sizeFromProps
    ? sizeFromProps
    : Object.entries(breakpoints)
        .map(([, value]) => `(max-width: ${value}px) ${value * 2}w`)
        .join(', ');

  return (
    <picture>
      <NextImage
        alt={alt || ''}
        className={cn(imgClassName)}
        fill={fill}
        height={!fill ? height : undefined}
        placeholder="blur"
        blurDataURL={placeholderBlur}
        priority={priority}
        quality={100}
        loading={loading}
        sizes={sizes}
        src={src}
        width={!fill ? width : undefined}
      />
    </picture>
  );
};
```

The key changes:

1. **Added validation before constructing src**: Only construct the src URL if `url` exists and is not empty
2. **Early return for invalid src**: If we don't have a valid src after all checks, return `null` instead of rendering an empty image
3. **Proper string validation**: Check that src is not just whitespace

This will prevent the NextImage component from ever receiving an empty string as the src attribute, which was causing the browser error.

---

_**User (2025-06-04 16:02Z)**_

is there any issues with the getURL file where we have the functions@getURL.ts 

---

_**Agent (mode Ask)**_

Looking at the `getURL.ts` file, I can see a potential issue that could contribute to the empty src problem. The `getClientSideURL()` function can return an empty string in certain scenarios:

```typescript
return process.env.NEXT_PUBLIC_SERVER_URL || ''
```

If `NEXT_PUBLIC_SERVER_URL` is not set and we're not on Vercel, this returns an empty string. When this empty string gets concatenated with the media URL in the ImageMedia component, it could result in malformed URLs.

Here's an improved version of the `getURL.ts` file:

```typescript:src/utilities/getURL.ts
import canUseDOM from './canUseDOM'

export const getServerSideURL = () => {
  let url = process.env.NEXT_PUBLIC_SERVER_URL

  if (!url && process.env.VERCEL_PROJECT_PRODUCTION_URL) {
    return `https://${process.env.VERCEL_PROJECT_PRODUCTION_URL}`
  }

  if (!url) {
    url = 'http://localhost:3000'
  }

  return url
}

export const getClientSideURL = () => {
  if (canUseDOM) {
    const protocol = window.location.protocol
    const domain = window.location.hostname
    const port = window.location.port

    return `${protocol}//${domain}${port ? `:${port}` : ''}`
  }

  if (process.env.VERCEL_PROJECT_PRODUCTION_URL) {
    return `https://${process.env.VERCEL_PROJECT_PRODUCTION_URL}`
  }

  // Fallback to a default URL instead of empty string
  return process.env.NEXT_PUBLIC_SERVER_URL || 'http://localhost:3000'
}
```

However, there's a more fundamental issue. Looking at how it's used in the ImageMedia component:

```typescript
src = `${getClientSideURL()}${url}`;
```

This assumes that `url` from the media resource starts with a `/`. If the URL is already absolute or if there are formatting issues, this could create problems.

Here's a better approach for the ImageMedia component that handles URL construction more robustly:

```typescript:src/components/Media/ImageMedia/index.tsx
export const ImageMedia: React.FC<MediaProps> = (props) => {
  const {
    alt: altFromProps,
    fill,
    imgClassName,
    priority,
    resource,
    size: sizeFromProps,
    src: srcFromProps,
    loading: loadingFromProps,
  } = props;

  let width: number | undefined;
  let height: number | undefined;
  let alt = altFromProps;
  let src: StaticImageData | string = srcFromProps || '';

  if (!src && resource && typeof resource === 'object') {
    const {
      alt: altFromResource,
      filename: __fullFilename,
      height: fullHeight,
      url,
      width: fullWidth,
    } = resource;

    // Only construct src if url exists and is not empty
    if (url && url.trim() !== '') {
      width = fullWidth!;
      height = fullHeight!;
      alt = altFromResource || '';
      
      // Handle URL construction more robustly
      if (url.startsWith('http://') || url.startsWith('https://')) {
        // URL is already absolute
        src = url;
      } else {
        // URL is relative, prepend base URL
        const baseURL = getClientSideURL();
        const cleanUrl = url.startsWith('/') ? url : `/${url}`;
        src = `${baseURL}${cleanUrl}`;
      }
    }
  }

  // Don't render anything if we don't have a valid src
  if (!src || (typeof src === 'string' && src.trim() === '')) {
    return null;
  }

  // Additional validation to ensure src is a valid URL or path
  if (typeof src === 'string') {
    try {
      // For absolute URLs, validate with URL constructor
      if (src.startsWith('http://') || src.startsWith('https://')) {
        new URL(src); // This will throw if invalid
      }
      // For relative URLs, just check they're not empty after trim
      else if (src.trim() === '') {
        return null;
      }
    } catch {
      // Invalid URL, don't render
      return null;
    }
  }

  const loading = loadingFromProps || (!priority ? 'lazy' : undefined);

  // NOTE: this is used by the browser to determine which image to download at different screen sizes
  const sizes = sizeFromProps
    ? sizeFromProps
    : Object.entries(breakpoints)
        .map(([, value]) => `(max-width: ${value}px) ${value * 2}w`)
        .join(', ');

  return (
    <picture>
      <NextImage
        alt={alt || ''}
        className={cn(imgClassName)}
        fill={fill}
        height={!fill ? height : undefined}
        placeholder="blur"
        blurDataURL={placeholderBlur}
        priority={priority}
        quality={100}
        loading={loading}
        sizes={sizes}
        src={src}
        width={!fill ? width : undefined}
      />
    </picture>
  );
};
```

The main improvements:

1. **Better URL construction**: Handles both absolute and relative URLs properly
2. **URL validation**: Uses URL constructor to validate absolute URLs
3. **Fallback in getClientSideURL**: Prevents empty string returns
4. **Robust error handling**: Multiple validation layers to prevent invalid src attributes

This should resolve the empty src attribute issue you're experiencing.

---

_**User (2025-06-04 16:02Z)**_

@Component.tsx 

I have a component here that i made abit unique with some puzzle inclusion where the text renders as buttons that people can click.

I do not like this anymore and want to remove all the puzzle related code and achievement store code.

everything else must remain the same, the text does not need to be interactive anymore just plain text

---

_**Agent (mode Ask)**_

Here's the cleaned up version of your `HomeHero/Component.tsx` with all puzzle and achievement code removed:

```tsx:src/blocks/HomeHero/Component.tsx
'use client';

import React, { useEffect, useState } from 'react';
import type { HomeHeroBlock as HomeHeroProps } from '@/payload-types';
import { CMSLink } from '@/components/Link';
import { AnimatedDivider } from '@/components/AnimatedDivider';

export const HomeHeroBlock: React.FC<HomeHeroProps> = ({
  mainText,
  dynamicText,
  links,
}) => {
  const [currentTextIndex, setCurrentTextIndex] = useState(0);
  const [displayText, setDisplayText] = useState('');
  const [isDeleting, setIsDeleting] = useState(false);
  const typingSpeed = 60;
  const deletingSpeed = 40;
  const delayBetweenTexts = 5000;

  useEffect(() => {
    const timeout = setTimeout(
      () => {
        const fullText = dynamicText[currentTextIndex]?.text || '';

        if (isDeleting) {
          setDisplayText((prev) => prev.slice(0, -1));
          if (displayText.length === 0) {
            setIsDeleting(false);
            setCurrentTextIndex((prev) => (prev + 1) % dynamicText.length);
          }
        } else {
          setDisplayText((prev) => fullText.slice(0, prev.length + 1));
          if (displayText === fullText) {
            setTimeout(() => setIsDeleting(true), delayBetweenTexts);
          }
        }
      },
      isDeleting ? deletingSpeed : typingSpeed
    );

    return () => clearTimeout(timeout);
  }, [displayText, isDeleting, dynamicText, currentTextIndex]);

  return (
    <div className="animate-pull-down container relative z-0 -mt-1 flex h-full flex-col items-center justify-center rounded-b-xl bg-white/50 p-4 pt-8 shadow-lg shadow-black/35 lg:pt-28 dark:bg-white/5">
      <h1 className="mb-6 text-start text-2xl font-bold text-black sm:text-4xl dark:text-white">
        {mainText}
      </h1>

      {/* Dynamic Typing Animation */}
      <div className="flex items-start text-lg font-semibold text-foreground sm:text-2xl">
        <span>{displayText}</span>
        <span className="animate-blink ml-0 text-gray-500">|</span>
      </div>

      {/* Call-to-Action Buttons */}
      <div className="mt-8 flex flex-wrap justify-center gap-4">
        {links?.map((cta, index) => (
          <CMSLink key={cta.id || index} {...cta.link} appearance="home-hero" />
        ))}
      </div>

      {/* Divider Line */}
      <AnimatedDivider className="mb-8 mt-3" />
    </div>
  );
};
```

The changes made:

1. **Removed all imports** related to puzzles and achievements:
   - `cn` utility (no longer needed)
   - `Image` from Next.js
   - `secretCodes`, `SecretData`, `MediaData` types
   - `useAchievementStore`
   - `EXPANDED_TEXT_OPTIONS`

2. **Removed all puzzle-related state**:
   - `puzzleState`
   - `showError`
   - `expandedText`

3. **Removed all puzzle-related functions**:
   - `handleCharacterClick`
   - `handleClearQuery`
   - `renderInteractiveText`
   - `SecretMedia` component
   - `SecretContent` component

4. **Simplified the main text rendering**:
   - Now just displays `{mainText}` as plain text instead of interactive buttons

5. **Removed the secret content area** entirely (sequence display, error messages, secret content)

The component now focuses solely on:
- Displaying the main text as a simple heading
- The dynamic typing animation for the secondary text
- The call-to-action buttons
- The animated divider

All the core functionality remains intact while removing all the puzzle complexity.

---

_**User (2025-06-04 16:02Z)**_

I have my header component here that displays a little profile icon that on hover expands, for some reason the image is  blurry

---

_**Agent (mode Ask)**_

The blurriness in your profile image is likely caused by a few factors. Here are the fixes you should apply:

## 1. **Image Quality and Sizing Issues**

The main issue is that you're using a 32x32 pixel image but displaying it at different sizes (24x24 on small screens, 32x32 on larger screens), and when you scale it up 5x on hover, it becomes very pixelated.

## 2. **Updated Component with Fixes**

```tsx:src/Header/Component.client.tsx
'use client';
import { useHeaderTheme } from '@/providers/HeaderTheme';
import { useTheme } from '@/providers/Theme';
import React, { useEffect, useState } from 'react';

import type { Header } from '@/payload-types';

import { HeaderNav } from './Nav';
import Image from 'next/image';

interface HeaderClientProps {
  data: Header;
}

/**
 * Desktop hover animation constants
 */
const DESKTOP_PROFILE_HOVER_SCALE = 5;
const DESKTOP_PROFILE_HOVER_Y_OFFSET = 60; // Moves down on desktop

/**
 * Mobile hover/tap animation constants
 */
const MOBILE_PROFILE_HOVER_SCALE = 5;
const MOBILE_PROFILE_HOVER_Y_OFFSET = -80; // Moves up on mobile (negative value)
const MOBILE_PROFILE_HOVER_X_OFFSET = 40; // Moves right on mobile

export const HeaderClient: React.FC<HeaderClientProps> = ({ data }) => {
  /* Storing the value in a useState to avoid hydration errors */
  const [theme, setTheme] = useState<string | null>(null);
  const [isMobile, setIsMobile] = useState<boolean>(false);
  const { headerTheme, setHeaderTheme } = useHeaderTheme();
  const { theme: globalTheme } = useTheme();

  // Handle theme synchronization
  useEffect(() => {
    setHeaderTheme(globalTheme ?? null);
  }, [globalTheme, setHeaderTheme]);

  // Handle theme updates
  useEffect(() => {
    if (headerTheme && headerTheme !== theme) setTheme(headerTheme);
  }, [headerTheme, theme]);

  // Detect mobile viewport
  useEffect(() => {
    const checkIsMobile = () => {
      setIsMobile(window.innerWidth < 1024); // lg breakpoint
    };

    checkIsMobile();
    window.addEventListener('resize', checkIsMobile);

    return () => window.removeEventListener('resize', checkIsMobile);
  }, []);

  /**
   * Handle mouse enter event with different behavior for mobile vs desktop
   */
  const handleMouseEnter = (e: React.MouseEvent<HTMLImageElement>) => {
    const scale = isMobile
      ? MOBILE_PROFILE_HOVER_SCALE
      : DESKTOP_PROFILE_HOVER_SCALE;
    const yOffset = isMobile
      ? MOBILE_PROFILE_HOVER_Y_OFFSET
      : DESKTOP_PROFILE_HOVER_Y_OFFSET;
    const xOffset = isMobile ? MOBILE_PROFILE_HOVER_X_OFFSET : 0;

    e.currentTarget.style.setProperty('--tw-scale-x', scale.toString());
    e.currentTarget.style.setProperty('--tw-scale-y', scale.toString());
    e.currentTarget.style.setProperty('--tw-translate-y', `${yOffset}px`);
    e.currentTarget.style.setProperty('--tw-translate-x', `${xOffset}px`);
  };

  /**
   * Handle mouse leave event - reset all transforms
   */
  const handleMouseLeave = (e: React.MouseEvent<HTMLImageElement>) => {
    e.currentTarget.style.setProperty('--tw-scale-x', '1');
    e.currentTarget.style.setProperty('--tw-scale-y', '1');
    e.currentTarget.style.setProperty('--tw-translate-y', '0px');
    e.currentTarget.style.setProperty('--tw-translate-x', '0px');
  };

  return (
    <header
      className="fixed bottom-0 z-40 w-full self-center rounded-b-xl bg-background shadow-lg md:sticky md:top-0 md:rounded-b-xl lg:max-w-8xl dark:drop-shadow-dark-outline"
      {...(theme ? { 'data-theme': theme } : {})}
    >
      <div className="container mx-auto px-4">
        <nav className="flex h-16 items-center justify-between md:justify-center lg:justify-between">
          {/* Profile icon with hover animation */}
          <div className="flex h-8 w-8 items-center justify-center rounded-full md:hidden lg:flex">
            <Image
              src="/media/profile.png"
              alt="Profile"
              width={160} // Much larger source size for better scaling
              height={160}
              className="h-6 w-6 rounded-full object-cover transition-transform duration-300 ease-in-out hover:scale-125 sm:h-8 sm:w-8"
              style={
                {
                  '--tw-scale-x': '1',
                  '--tw-scale-y': '1',
                  '--tw-translate-y': '0px',
                  '--tw-translate-x': '0px',
                  imageRendering: 'crisp-edges', // Prevents blurring on scale
                } as React.CSSProperties
              }
              onMouseEnter={handleMouseEnter}
              onMouseLeave={handleMouseLeave}
              quality={100} // Maximum quality
              priority // Load immediately since it's above the fold
              sizes="(max-width: 640px) 24px, 32px" // Responsive sizing
            />
          </div>

          {/* HeaderNav - on mobile it appears after profile icon */}
          <div className="order-last lg:order-first">
            <HeaderNav data={data} />
          </div>
        </nav>
      </div>
    </header>
  );
};
```

## 3. **Key Changes Made:**

1. **Increased source image dimensions**: Changed from `width={32} height={32}` to `width={160} height={160}` - this provides a much higher resolution source for scaling
2. **Added `quality={100}`**: Ensures maximum image quality
3. **Added `priority`**: Loads the image immediately since it's visible above the fold
4. **Added `sizes` attribute**: Helps Next.js optimize for different screen sizes
5. **Added `imageRendering: 'crisp-edges'`**: Prevents browser blur when scaling
6. **Removed redundant hover classes**: Cleaned up the className since you're handling hover with JavaScript

## 4. **Additional Recommendations:**

1. **Use a higher resolution source image**: Make sure your `/media/profile.png` is at least 160x160 pixels or higher (ideally 320x320 for retina displays)

2. **Consider using WebP format**: If possible, convert your profile image to WebP for better compression and quality

3. **Alternative approach with CSS-only scaling** (if you prefer):
```tsx
className="h-6 w-6 rounded-full object-cover transition-all duration-300 ease-in-out hover:scale-[5] hover:translate-y-[60px] sm:h-8 sm:w-8 lg:hover:translate-y-[60px] lg:hover:translate-x-0 max-lg:hover:translate-y-[-80px] max-lg:hover:translate-x-[40px]"
```

The main fix is using a much higher resolution source image (160x160 or larger) while displaying it small, so when it scales up 5x, it still looks crisp.

---

